var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*! JsRender v1.0.0-beta: http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 53 */
(function(a,D,u){if(D&&D.views||a.jsviews){return}var au="v1.0.0-beta",W,ao,y,E,g,s="{",r="{",l="}",j="}",ak="^",F=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,al=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,af=/[ \t]*(\r\n|\n|\r)/g,h=/\\(['"])/g,aq=/['"\\]/g,t=/\x08(~)?([^\x08]+)\x08/g,o=/^if\s/,x=/<(\w+)[>\s]/,Y=/[\x00`><"'&]/g,I=/^on[A-Z]|^convert(Back)?$/,U=Y,av=0,ar=0,V={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},at="html",ai="data-jsv-tmpl",aa={},ae={template:{compile:b},tag:{compile:w},helper:{},converter:{}},X={jsviews:au,render:aa,settings:function(aw){z(ag,aw);Z(ag._dbgMode);if(ag.jsv){ag.jsv()}},sub:{View:ap,Err:N,tmplFn:K,cvt:B,parse:C,extend:z,err:P,syntaxErr:ac,isFn:function(aw){return typeof aw==="function"},DataMap:T},_cnvt:Q,_tag:c,_err:function(aw){return ag._dbgMode?("Error: "+(aw.message||aw))+". ":""}};function f(aw){return aw}function L(aw){;return aw}function Z(aw){ag._dbgMode=aw;g=aw?"Unavailable (nested view): use #getIndex()":"";ab("dbg",M.dbg=am.dbg=aw?L:f)}function T(aw){return{getTgt:aw,map:function(ay){var ax=this;if(ax.src!==ay){if(ax.src){ax.unmap()}if(typeof ay==="object"){var aA,az=aw.apply(ax,arguments);ax.src=ay;ax.tgt=az}}}}}function N(ax,aw){if(aw&&aw.onError){if(aw.onError(ax)===false){return}}this.name=(W.link?"JsViews":"JsRender")+" Error";this.message=ax||this.name}function z(ay,ax){var aw;ay=ay||{};for(aw in ax){ay[aw]=ax[aw]}return ay}(N.prototype=new Error()).constructor=N;function A(aw,ay,ax){if(!ah.rTag||aw){s=aw?aw.charAt(0):s;r=aw?aw.charAt(1):r;l=ay?ay.charAt(0):l;j=ay?ay.charAt(1):j;ak=ax||ak;aw="\\"+s+"(\\"+ak+")?\\"+r;ay="\\"+l+"\\"+j;y="(?:(?:(\\w+(?=[\\/\\s\\"+l+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+l+"]|\\"+l+"(?!\\"+j+"))*?)";ah.rTag=y+")";y=new RegExp(aw+y+"(\\/)?|(?:\\/(\\w+)))"+ay,"g");E=new RegExp("<.*>|([^\\\\]|^)[{}]|"+aw+".*"+ay)}return[s,r,l,j,ak]}function S(aA,aC){if(!aC){aC=aA;aA=u}var az,aB,ay,aD,ax=this,aw=!aC||aC==="root";if(aA){aD=ax.type===aC?ax:u;if(!aD){az=ax.views;if(ax._.useKey){for(aB in az){if(aD=az[aB].get(aA,aC)){break}}}else{for(aB=0,ay=az.length;!aD&&aB<ay;aB++){aD=az[aB].get(aA,aC)}}}}else{if(aw){while(ax.parent.parent){aD=ax=ax.parent}}else{while(ax&&!aD){aD=ax.type===aC?ax:u;ax=ax.parent}}}return aD}function ad(){var aw=this.get("item");return aw?aw.index:u}ad.depends=function(){return[this.get("item"),"index"]};function R(){return this.index}R.depends=function(){return["index"]};function aj(aA){var ay,ax=this,aw=ax.linkCtx,az=(ax.ctx||{})[aA];if(az===u&&aw&&aw.ctx){az=aw.ctx[aA]}if(az===u){az=M[aA]}if(az){if(d(az)&&!az._wrp){ay=function(){return az.apply((!this||this===a)?ax:this,arguments)};ay._wrp=1;z(ay,az)}}return ay||az}function Q(aA,ay,az){var ax,aC,aD,aB=+az===az&&az,aw=ay.linkCtx;if(aB){az=(aB=ay.tmpl.bnds[aB-1])(ay.data,ay,X)}aC=az.args[0];if(aA||aB){ax=aw&&aw.tag||{_:{inline:!aw,bnd:aB},tagName:aA+":",flow:true,_is:"tag"};for(aD in az.props){if(I.test(aD)){ax[aD]=az.props[aD]}}if(aw){aw.tag=ax;ax.linkCtx=ax.linkCtx||aw;az.ctx=an(az.ctx,aw.view.ctx)}ax.tagCtx=az;az.view=ay;ax.ctx=az.ctx||{};delete az.ctx;ay._.tag=ax;aC=B(ax,ax.convert||aA!=="true"&&aA)[0];aC=aC!=u?aC:"";aC=aB&&ay._.onRender?ay._.onRender(aC,ay,aB):aC;ay._.tag=u}return aC}function B(aw,aA){var ay=aw.tagCtx,ax=ay.view,az=ay.args;aA=aA&&(""+aA===aA?(ax.getRsc("converters",aA)||P("Unknown converter: '"+aA+"'")):aA);az=!az.length&&!ay.index&&aw.autoBind?[ax.data]:aA?az.slice():az;if(aA){if(aA.depends){aw.depends=ah.getDeps(aw.depends,aw,aA.depends,aA)}az[0]=aA.apply(aw,az)}return az}function H(az,aA){var ay,ax,aw=this;while((ay===u)&&aw){ax=aw.tmpl[az];ay=ax&&ax[aA];aw=aw.parent}return ay||X[az][aA]}function c(az,aE,aI,aJ,aD){var aZ,a0,aM,aO,aS,aT,aQ,aV,aK,aw,aR,aU,aG,aN,aX,aH,ay,aA,aC,aW,aL,aY="",aF=+aJ===aJ&&aJ,aB=aE.linkCtx||0,aP=aE.ctx,ax=aI||aE.tmpl;if(az._is==="tag"){a0=az;az=a0.tagName}a0=a0||aB.tag;if(aF){aJ=(aU=ax.bnds[aF-1])(aE.data,aE,X)}aQ=aJ.length;for(aT=0;aT<aQ;aT++){aK=aJ[aT];aC=aK.props;aR=aK.tmpl;aR=aK.content=aR&&ax.tmpls[aR-1];aI=aK.props.tmpl;if(!aT&&(!aI||!a0)){aG=aE.getRsc("tags",az)||P("Unknown tag: {{"+az+"}}")}aI=aI||(a0?a0:aG).template||aR;aI=""+aI===aI?aE.getRsc("templates",aI)||O(aI):aI;z(aK,{tmpl:aI,render:q,index:aT,view:aE,ctx:an(aK.ctx,aP)});if(!a0){if(aG._ctr){a0=new aG._ctr();aN=!!a0.init;a0.attr=a0.attr||aG.attr||u}else{a0={render:aG.render}}a0._={inline:!aB};if(aB){aB.attr=a0.attr=aB.attr||a0.attr;aB.tag=a0;a0.linkCtx=aB}if(a0._.bnd=aU||aB.fn){a0._.arrVws={}}else{if(a0.dataBoundOnly){P("{^{"+az+"}} tag must be data-bound")}}a0.tagName=az;a0.parent=aS=aP&&aP.tag;a0._is="tag";a0._def=aG;for(aA in aC=aK.props){if(I.test(aA)){a0[aA]=aC[aA]}}}aK.tag=a0;if(a0.map&&a0.tagCtxs){aK.map=a0.tagCtxs[aT].map}if(!a0.flow){aw=aK.ctx=aK.ctx||{};aM=a0.parents=aw.parentTags=aP&&an(aw.parentTags,aP.parentTags)||{};if(aS){aM[aS.tagName]=aS}aw.tag=a0}}a0.tagCtxs=aJ;aE._.tag=a0;a0.rendering={};for(aT=0;aT<aQ;aT++){aK=a0.tagCtx=aJ[aT];aC=aK.props;ay=B(a0,a0.convert);if((aX=aC.map||a0).map){if(ay.length||aC.map){aH=aK.map=z(aK.map||{unmap:aX.unmap},aC);if(aH.src!==ay[0]){if(aH.src){aH.unmap()}aX.map.apply(aH,ay)}ay=[aH.tgt]}}a0.ctx=aK.ctx;if(!aT&&aN){aL=a0.template;a0.init(aK,aB,a0.ctx);aN=u;if(a0.template!==aL){a0._.tmpl=a0.template}}aV=u;aZ=a0.render;if(aZ=a0.render){aV=aZ.apply(a0,ay)}ay=ay.length?ay:[aE];aV=aV!==u?aV:aK.render(ay[0],true)||(aD?u:"");aY=aY?aY+(aV||""):aV}delete a0.rendering;a0.tagCtx=a0.tagCtxs[0];a0.ctx=a0.tagCtx.ctx;if(a0._.inline&&(aO=a0.attr)&&aO!==at){aY=aO==="text"?am.html(aY):""}return aF&&aE._.onRender?aE._.onRender(aY,aE,aF):aY}function ap(aw,aB,aH,ax,aC,aD,aG,aJ){var aE,aA,aI,az=aB==="array",ay={key:0,useKey:az?0:1,id:""+ar++,onRender:aJ,bnds:{}},aF={data:ax,tmpl:aC,content:aG,views:az?[]:{},parent:aH,type:aB,get:S,getIndex:R,getRsc:H,hlp:aj,_:ay,_is:"view"};if(aH){aE=aH.views;aA=aH._;if(aA.useKey){aE[ay.key="_"+aA.useKey++]=aF;aF.index=g;aF.getIndex=ad;aI=aA.tag;ay.bnd=az&&(!aI||!!aI._.bnd&&aI)}else{aE.splice(ay.key=aF.index=aD,0,aF)}aF.ctx=aw||aH.ctx}else{aF.ctx=aw}return aF}function p(aA){var aw,aB,ax,ay,az;for(aw in ae){ay=ae[aw];if((az=ay.compile)&&(aB=aA[aw+"s"])){for(ax in aB){aB[ax]=az(ax,aB[ax],aA,aw,ay)}}}}function w(ax,az,ay){var aA,aw;if(d(az)){az={depends:az.depends,render:az}}else{if(aw=az.template){az.template=""+aw===aw?(O[aw]||O(aw)):aw}if(az.init!==false){aA=az._ctr=function(aB){};(aA.prototype=az).constructor=aA}}if(ay){az._parentTmpl=ay}return az}function b(aw,aC,aD,aB,ax,aE){function az(aF){if((""+aF===aF)||aF.nodeType>0){try{ay=aF.nodeType>0?aF:!E.test(aF)&&D&&D(a.document).find(aF)[0]}catch(aG){}if(ay){aF=ay.getAttribute(ai);aw=aw||aF;aF=O[aF];if(!aF){aw=aw||"_"+av++;ay.setAttribute(ai,aw);aF=O[aw]=b(aw,ay.innerHTML,aD,aB,ax,aE)}ay=null}return aF}}var aA,ay;aC=aC||"";aA=az(aC);aE=aE||(aC.markup?aC:{});aE.tmplName=aw;if(aD){aE._parentTmpl=aD}if(!aA&&aC.markup&&(aA=az(aC.markup))){if(aA.fn&&(aA.debug!==aC.debug||aA.allowCode!==aC.allowCode)){aA=aA.markup}}if(aA!==u){if(aw&&!aD){aa[aw]=function(){return aC.render.apply(aC,arguments)}}if(aA.fn||aC.fn){if(aA.fn){if(aw&&aw!==aA.tmplName){aC=an(aE,aA)}else{aC=aA}}}else{aC=m(aA,aE);K(aA.replace(aq,"\\$&"),aC)}p(aE);return aC}}function m(az,aA){var aw,ax=ag.wrapMap||{},ay=z({markup:az,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:q},aA);if(!aA.htmlTag){aw=x.exec(az);ay.htmlTag=aw?aw[1].toLowerCase():""}aw=ax[ay.htmlTag];if(aw&&aw!==ax.div){ay.markup=W.trim(ay.markup)}return ay}function e(ay,ax){function az(aA,aC,aG){var aB,aF,aE,aD;if(aA&&""+aA!==aA&&!aA.nodeType&&!aA.markup){for(aE in aA){az(aE,aA[aE],aC)}return X}if(aC===u){aC=aA;aA=u}if(aA&&""+aA!==aA){aG=aC;aC=aA;aA=u}aD=aG?aG[aw]=aG[aw]||{}:az;aF=ax.compile;if(aB=ah.onBeforeStoreItem){aF=aB(aD,aA,aC,aF)||aF}if(!aA){aC=aF(u,aC)}else{if(aC===null){delete aD[aA]}else{aD[aA]=aF?(aC=aF(aA,aC,aG,ay,ax)):aC}}if(aF&&aC){aC._is=ay}if(aB=ah.onStoreItem){aB(aD,aA,aC,aF)}return aC}var aw=ay+"s";X[aw]=az;ae[ay]=ax}function q(aQ,ay,az,aA,aR,aB){var aL,aK,aD,aN,aP,aI,aH,aE,ax,aO,aM,aw,aC,aJ=this,aG=!aJ.attr||aJ.attr===at,aF="";if(!!ay===ay){az=ay;ay=u}if(aR===true){aH=true;aR=0}if(aJ.tag){aE=aJ;aJ=aJ.tag;aO=aJ._;aw=aJ.tagName;aC=aO.tmpl||aE.tmpl;ay=an(ay,aJ.ctx);ax=aE.content;if(aE.props.link===false){ay=ay||{};ay.link=false}aA=aA||aE.view;aQ=arguments.length?aQ:aA}else{aC=aJ.jquery&&(aJ[0]||P('Unknown template: "'+aJ.selector+'"'))||aJ}if(aC){if(!aA&&aQ&&aQ._is==="view"){aA=aQ}if(aA){ax=ax||aA.content;aB=aB||aA._.onRender;if(aQ===aA){aQ=aA.data}ay=an(ay,aA.ctx)}if(!aA||aA.data===u){(ay=ay||{}).root=aQ}if(!aC.fn){aC=O[aC]||O(aC)}if(aC){aB=(ay&&ay.link)!==false&&aG&&aB;aM=aB;if(aB===true){aM=u;aB=aA._.onRender}ay=aC.helpers?an(aC.helpers,ay):ay;if(W.isArray(aQ)&&!az){aN=aH?aA:(aR!==u&&aA)||ap(ay,"array",aA,aQ,aC,aR,ax,aB);for(aL=0,aK=aQ.length;aL<aK;aL++){aD=aQ[aL];aP=ap(ay,"item",aN,aD,aC,(aR||0)+aL,ax,aB);aI=aC.fn(aD,aP,X);aF+=aN._.onRender?aN._.onRender(aI,aP):aI}}else{aN=aH?aA:ap(ay,aw||"data",aA,aQ,aC,aR,ax,aB);if(aO&&!aJ.flow){aN.tag=aJ}aF+=aC.fn(aQ,aN,X)}return aM?aM(aF,aN):aF}}return""}function P(aw){throw new ah.Err(aw)}function ac(aw){P("Syntax error\n"+aw)}function K(aK,aG,aJ,aC){function az(aL){aL-=aB;if(aL){aE.push(aK.substr(aB,aL).replace(af,"\\n"))}}function aI(aL){aL&&ac('Unmatched or missing tag: "{{/'+aL+'}}" in template:\n'+aK)}function aw(aP,a3,aQ,a0,aY,aT,aN,aX,aZ,aV,a2,aR){if(aT){aY=":";a0=at}aV=aV||aJ;var aL,aU,a1=a3&&[],aM="",aO="",aW="",aS=!aV&&!aY&&!aN;aQ=aQ||(aZ=aZ||"#data",aY);az(aR);aB=aR+aP.length;if(aX){if(aA){aE.push(["*","\n"+aZ.replace(h,"$1")+"\n"])}}else{if(aQ){if(aQ==="else"){if(o.test(aZ)){ac('for "{{else if expr}}" use "{{else expr}}"')}a1=aD[6];aD[7]=aK.substring(aD[7],aR);aD=aF.pop();aE=aD[3];aS=true}if(aZ){aZ=aZ.replace(af," ");aM=C(aZ,a1,aG).replace(t,function(a4,a5,a6){if(a5){aW+=a6+","}else{aO+=a6+","}ay=ay||I.test(a6.split(":")[0]);return""})}aO=aO.slice(0,-1);aM=aM.slice(0,-1);aL=aO&&(aO.indexOf("noerror:true")+1)&&aO||"";aH=[aQ,a0||!!aC||ay||"",aM,aS&&[],'\n\tparams:"'+aZ+'",\n\tprops:{'+aO+"}"+(aW?",ctx:{"+aW.slice(0,-1)+"}":""),aL,a1||0];aE.push(aH);if(aS){aF.push(aD);aD=aH;aD[7]=aB}}else{if(a2){aU=aD[0];aI(a2!==aU&&aU!=="else"&&a2);aD[7]=aK.substring(aD[7],aR);aD=aF.pop()}}}aI(!aD&&a2);aE=aD[3]}var aH,ay,aA=aG&&aG.allowCode,ax=[],aB=0,aF=[],aE=ax,aD=[,,,ax];aI(aF[0]&&aF[0][3].pop()[0]);aK.replace(y,aw);az(aK.length);if(aB=ax[ax.length-1]){aI(""+aB!==aB&&(+aB[7]===aB[7])&&aB[0])}return J(ax,aJ?aK:aG,aJ)}function J(aJ,aL,aI){var aU,aO,aE,a0,aZ,aC,a3,aB,aR,aD,aN,ay,a1,aF,ax,aG,aS,aQ,aW,aH,aA,aV,a2,aM,aT,aY=0,az="",aw="",aK={},aP=aJ.length;if(""+aL===aL){ax=aI?'data-link="'+aL.replace(af," ").slice(1,-1)+'"':aL;aL=0}else{ax=aL.tmplName||"unnamed";if(aL.allowCode){aK.allowCode=true}if(aL.debug){aK.debug=true}ay=aL.bnds;aF=aL.tmpls}for(aU=0;aU<aP;aU++){aO=aJ[aU];if(""+aO===aO){az+='\nret+="'+aO+'";'}else{aE=aO[0];if(aE==="*"){az+=""+aO[1]}else{a0=aO[1];aZ=aO[2];aQ=aO[3];aC=aO[4];aw=aO[5];aW=aO[7];if(!(aV=aE==="else")){aY=0;if(ay&&(a1=aO[6])){aY=ay.push(a1)}}if(a2=aE===":"){if(a0){aE=a0===at?">":a0+aE}if(aw){aM="prm"+aU;aw="try{var "+aM+"=["+aZ+"][0];}catch(e){"+aM+'="";}\n';aZ=aM}}else{if(aQ){aG=m(aW,aK);aG.tmplName=ax+"/"+aE;J(aQ,aG);aF.push(aG)}if(!aV){aS=aE;aA=az;az=""}aH=aJ[aU+1];aH=aH&&aH[0]==="else"}aC+=",\n\targs:["+aZ+"]}";if(a2&&(a1||a0&&a0!==at)){aT=new Function("data,view,j,u"," // "+ax+" "+aY+" "+aE+"\n"+aw+"return {"+aC+";");aT.paths=a1;aT._ctxs=aE;if(aI){return aT}aN=1}az+=(a2?"\n"+(a1?"":aw)+(aI?"return ":"ret+=")+(aN?(aN=0,aD=true,'c("'+a0+'",view,'+(a1?((ay[aY-1]=aT),aY):"{"+aC)+");"):aE===">"?(aB=true,"h("+aZ+");"):(aR=true,"(v="+aZ+")!="+(aI?"=":"")+'u?v:"";')):(a3=true,"{view:view,tmpl:"+(aQ?aF.length:"0")+","+aC+","));if(aS&&!aH){az="["+az.slice(0,-1)+"]";if(aI||a1){az=new Function("data,view,j,u"," // "+ax+" "+aY+" "+aS+"\nreturn "+az+";");if(a1){(ay[aY-1]=az).paths=a1}az._ctxs=aE;if(aI){return az}}az=aA+'\nret+=t("'+aS+'",view,this,'+(aY||az)+");";a1=0;aS=0}}}}az="// "+ax+"\nvar j=j||"+(D?"jQuery.":"js")+"views"+(aR?",v":"")+(a3?",t=j._tag":"")+(aD?",c=j._cnvt":"")+(aB?",h=j.converters.html":"")+(aI?";\n":',ret="";\n')+(ag.tryCatch?"try{\n":"")+(aK.debug?"debugger;":"")+az+(aI?"\n":"\nreturn ret;\n")+(ag.tryCatch?"\n}catch(e){return j._err(e);}":"");try{az=new Function("data,view,j,u",az)}catch(aX){ac("Compiled template code:\n\n"+az,aX)}if(aL){aL.fn=az}return az}function C(aB,ax,aG){function aH(aM,a3,aO,aJ,aV,aT,aP,a4,aK,aU,a2,a1,aX,a0,aR,aY,aN,aZ,aQ,aS){var aL;aT=aT||"";aO=aO||a3||a1;aV=aV||aK;aU=aU||aN||"";function aW(bc,a6,a7,a5,bd,bb,a8,a9){if(a7){if(ax){if(aC==="linkTo"){aI=ax._jsvto=ax._jsvto||[];aI.push(aV)}if(!aC||aD){ax.push(aV.slice(a6.length))}}if(a7!=="."){var ba=(a5?'view.hlp("'+a5+'")':bd?"view":"data")+(a9?(bb?"."+bb:a5?"":(bd?"":"."+a7))+(a8||""):(a9=a5?"":bd?bb||"":a7,""));ba=ba+(a9?"."+a9:"");return a6+(ba.slice(0,9)==="view.data"?ba.slice(5):ba)}}return bc}if(aP&&!aE&&!aA){ac(aB)}else{if(ax&&aY&&!aE&&!aA){if(!aC||aD||aI){aL=aF[ay];if(aS.length-1>aQ-aL){aL=aS.slice(aL,aQ+1);aY=r+":"+aL+l;aY=az[aY]=az[aY]||K(s+aY+j,aG,true);if(!aY.paths){C(aL,aY.paths=[],aG)}(aI||ax).push({_jsvOb:aY})}}}return(aE?(aE=!aX,(aE?aM:'"')):aA?(aA=!a0,(aA?aM:'"')):((aO?(ay++,aF[ay]=aQ++,aO):"")+(aZ?(ay?"":aC?(aC=aD=aI=false,"\b"):","):a4?(ay&&ac(aB),aC=aV,aD=aJ,"\b"+aV+":"):aV?(aV.split("^").join(".").replace(F,aW)+(aU?(aw[++ay]=true,aV.charAt(0)!=="."&&(aF[ay]=aQ),aU):aT)):aT?aT:aR?((aw[ay--]=false,aR)+(aU?(aw[++ay]=true,aU):"")):a2?(aw[ay]||ac(aB),","):a3?"":(aE=aX,aA=a0,'"'))))}}var aC,aI,aD,az=aG.links,aw={},aF={0:-1},ay=0,aA=false,aE=false;return(aB+" ").replace(/\)\^/g,").").replace(al,aH)}function an(ax,aw){return ax&&ax!==aw?(aw?z(z({},aw),ax):ax):aw&&z({},aw)}function n(aw){return V[aw]||(V[aw]="&#"+aw.charCodeAt(0)+";")}for(ao in ae){e(ao,ae[ao])}var G,O=X.templates,am=X.converters,M=X.helpers,ab=X.tags,ah=X.sub,d=ah.isFn,ag=X.settings;if(D){W=D;W.fn.render=q;if(G=W.observable){z(ah,G.sub);delete G.sub}}else{W=a.jsviews={};W.isArray=Array&&Array.isArray||function(aw){return Object.prototype.toString.call(aw)==="[object Array]"}}W.render=aa;W.views=X;W.templates=O=X.templates;ag({debugMode:Z,delimiters:A,_dbgMode:true,tryCatch:true});ab({"else":function(){},"if":{render:function(ay){var aw=this,ax=(aw.rendering.done||!ay&&(arguments.length||!aw.tagCtx.index))?"":(aw.rendering.done=true,aw.selected=aw.tagCtx.index,aw.tagCtx.render(aw.tagCtx.view,true));return ax},onUpdate:function(aA,az,ay){var ax,aw,aB;for(ax=0;(aw=this.tagCtxs[ax])&&aw.args.length;ax++){aw=aw.args[0];aB=!aw!==!ay[ax].args[0];if((!this.convert&&!!aw)||aB){return aB}}return false},flow:true},"for":{render:function(aB){var aA,az=this,ay=az.tagCtx,aw="",ax=0;if(!az.rendering.done){if(aA=!arguments.length){aB=ay.view.data}if(aB!==u){aw+=ay.render(aB,aA);ax+=W.isArray(aB)?aB.length:1}if(az.rendering.done=ax){az.selected=ay.index}}return aw},flow:true,autoBind:true},include:{flow:true,autoBind:true},"*":{render:f,flow:true}});function v(ay){var aw,az,ax=[];if(typeof ay==="object"){for(aw in ay){az=ay[aw];if(!az||!az.toJSON||az.toJSON()){if(!d(az)){ax.push({key:aw,prop:ay[aw]})}}}}return ax}ab({props:z(z({},ab["for"]),T(v))});ab.props.autoBind=true;am({html:function(aw){return aw!=u?String(aw).replace(U,n):""},attr:function(aw){return aw!=u?String(aw).replace(Y,n):aw===null?aw:""},url:function(aw){return aw!=u?encodeURI(String(aw)):aw===null?aw:""}});A()})(this,this.jQuery);
/*!
* http://erraticdev.blogspot.com/2010/12/converting-dates-in-json-strings-using.html
* jQuery.parseJSON() extension (supports ISO & Asp.net date conversion)
*
* Version 1.0 (13 Jan 2011)
*
* Copyright (c) 2011 Robert Koritnik
* Licensed under the terms of the MIT license
* http://www.opensource.org/licenses/mit-license.php
*/
(function(g){var h=/^[\],:{}\s]*$/;var n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var d=/(?:^|:|,)(?:\s*\[)+/g;var a=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z/i;var e=/\/Date\((\d+)(?:-\d+)?\)\//i;var f=/"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z"/i;var l=/"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/i;var j=(window.JSON&&window.JSON.parse)?true:false;var b=j&&window.JSON.parse('{"x":9}',function(p,o){return"Y"})==="Y";var c=function(o,p){if(typeof(p)==="string"){if(a.test(p)){return new Date(p)}if(e.test(p)){return new Date(parseInt(e.exec(p)[1],10))}}return p};g.extend({parseJSON:function(p,o){if(typeof p!=="string"||!p){return null}p=g.trim(p);if(h.test(p.replace(n,"@").replace(m,"]").replace(d,""))){if(b||(j&&o!==true)){return window.JSON.parse(p,o===true?c:undefined)}else{p=o===true?p.replace(f,"new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))").replace(l,"new Date($1)"):p;return(new Function("return "+p))()}}else{g.error("Invalid JSON: "+p)}}})})(jQuery);(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(j,e){
/*!
	 * if using jslint please allow for the jQuery global and use following options:
	 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
	 */
;if(j.jstree){return}var c=0,d=false,m=false,l=false,o=[],a=j("script:last").attr("src"),n=document,q=n.createElement("LI"),g,f;q.setAttribute("role","treeitem");g=n.createElement("I");g.className="jstree-icon jstree-ocl";q.appendChild(g);g=n.createElement("A");g.className="jstree-anchor";g.setAttribute("href","#");f=n.createElement("I");f.className="jstree-icon jstree-themeicon";g.appendChild(f);q.appendChild(g);g=f=null;j.jstree={version:"3.0.0",defaults:{plugins:[]},plugins:{},path:a&&a.indexOf("/")!==-1?a.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&'".,=\- \/]/g};j.jstree.create=function(u,r){var t=new j.jstree.core(++c),s=r;r=j.extend(true,{},j.jstree.defaults,r);if(s&&s.plugins){r.plugins=s.plugins}j.each(r.plugins,function(w,v){if(w!=="core"){t=t.plugin(v,r[v])}});t.init(u,r);return t};j.jstree.core=function(r){this._id=r;this._cnt=0;this._data={core:{themes:{name:false,dots:false,icons:false},selected:[],last_error:{}}}};j.jstree.reference=function(t){var r=null,s=null;if(t&&t.id){t=t.id}if(!s||!s.length){try{s=j(t)}catch(u){}}if(!s||!s.length){try{s=j("#"+t.replace(j.jstree.idregex,"\\$&"))}catch(u){}}if(s&&s.length&&(s=s.closest(".jstree")).length&&(s=s.data("jstree"))){r=s}else{j(".jstree").each(function(){var v=j(this).data("jstree");if(v&&v._model.data[t]){r=v;return false}})}return r};j.fn.jstree=function(s){var u=(typeof s==="string"),t=Array.prototype.slice.call(arguments,1),r=null;this.each(function(){var v=j.jstree.reference(this),w=u&&v?v[s]:null;r=u&&w?w.apply(v,t):null;if(!v&&!u&&(s===e||j.isPlainObject(s))){j(this).data("jstree",new j.jstree.create(this,s))}if((v&&!u)||s===true){r=v||false}if(r!==null&&r!==e){return false}});return r!==null&&r!==e?r:this};j.expr[":"].jstree=j.expr.createPseudo(function(r){return function(s){return j(s).hasClass("jstree")&&j(s).data("jstree")!==e}});j.jstree.defaults.core={data:false,strings:false,check_callback:false,error:j.noop,animation:200,multiple:true,themes:{name:false,url:false,dir:false,dots:true,icons:true,stripes:false,variant:false,responsive:true},expand_selected_onload:true};j.jstree.core.prototype={plugin:function(t,s){var r=j.jstree.plugins[t];if(r){this._data[t]={};r.prototype=this;return new r(s,this)}return this},init:function(s,r){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:false}}},changed:[],force_full_redraw:false,redraw_timeout:false,default_state:{loaded:true,opened:false,selected:false,disabled:false}};this.element=j(s).addClass("jstree jstree-"+this._id);this.settings=r;this.element.bind("destroyed",j.proxy(this.teardown,this));this._data.core.ready=false;this._data.core.loaded=false;this._data.core.rtl=(this.element.css("direction")==="rtl");this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(true);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<ul class='jstree-container-ul'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||18;this.trigger("loading");this.load_node("#")},destroy:function(){this.element.unbind("destroyed",this.teardown);this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});this.element=null},bind:function(){this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var r=window.getSelection();try{r.removeAllRanges();r.collapse()}catch(s){}}}}).on("click.jstree",".jstree-ocl",j.proxy(function(r){this.toggle_node(r.target)},this)).on("click.jstree",".jstree-anchor",j.proxy(function(r){r.preventDefault();j(r.currentTarget).focus();this.activate_node(r.currentTarget,r)},this)).on("keydown.jstree",".jstree-anchor",j.proxy(function(r){if(r.target.tagName==="INPUT"){return true}var s=null;switch(r.which){case 13:case 32:r.type="click";j(r.currentTarget).trigger(r);break;case 37:r.preventDefault();if(this.is_open(r.currentTarget)){this.close_node(r.currentTarget)}else{s=this.get_prev_dom(r.currentTarget);if(s&&s.length){s.children(".jstree-anchor").focus()}}break;case 38:r.preventDefault();s=this.get_prev_dom(r.currentTarget);if(s&&s.length){s.children(".jstree-anchor").focus()}break;case 39:r.preventDefault();if(this.is_closed(r.currentTarget)){this.open_node(r.currentTarget,function(t){this.get_node(t,true).children(".jstree-anchor").focus()})}else{s=this.get_next_dom(r.currentTarget);if(s&&s.length){s.children(".jstree-anchor").focus()}}break;case 40:r.preventDefault();s=this.get_next_dom(r.currentTarget);if(s&&s.length){s.children(".jstree-anchor").focus()}break;case 46:r.preventDefault();s=this.get_node(r.currentTarget);if(s&&s.id&&s.id!=="#"){s=this.is_selected(s)?this.get_selected():s}break;case 113:r.preventDefault();s=this.get_node(r.currentTarget);break;default:break}},this)).on("load_node.jstree",j.proxy(function(v,u){if(u.status){if(u.node.id==="#"&&!this._data.core.loaded){this._data.core.loaded=true;this.trigger("loaded")}if(!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length){this._data.core.ready=true;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t=[],s,r;for(s=0,r=this._data.core.selected.length;s<r;s++){t=t.concat(this._model.data[this._data.core.selected[s]].parents)}t=j.vakata.array_unique(t);for(s=0,r=t.length;s<r;s++){this.open_node(t[s],false,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(j.proxy(function(){this.trigger("ready")},this),0)}}},this)).on("init.jstree",j.proxy(function(){var r=this.settings.core.themes;this._data.core.themes.dots=r.dots;this._data.core.themes.stripes=r.stripes;this._data.core.themes.icons=r.icons;this.set_theme(r.name||"default",r.url);this.set_theme_variant(r.variant)},this)).on("loading.jstree",j.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("focus.jstree",".jstree-anchor",j.proxy(function(r){this.element.find(".jstree-hovered").not(r.currentTarget).mouseleave();j(r.currentTarget).mouseenter()},this)).on("mouseenter.jstree",".jstree-anchor",j.proxy(function(r){this.hover_node(r.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",j.proxy(function(r){this.dehover_node(r.currentTarget)},this))},unbind:function(){this.element.off(".jstree");j(document).off(".jstree-"+this._id)},trigger:function(r,s){if(!s){s={}}s.instance=this;this.element.triggerHandler(r.replace(".jstree","")+".jstree",s)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children("ul:eq(0)")},get_string:function(s){var r=this.settings.core.strings;if(j.isFunction(r)){return r.call(this,s)}if(r&&r[s]){return r[s]}return s},_firstChild:function(r){r=r?r.firstChild:null;while(r!==null&&r.nodeType!==1){r=r.nextSibling}return r},_nextSibling:function(r){r=r?r.nextSibling:null;while(r!==null&&r.nodeType!==1){r=r.nextSibling}return r},_previousSibling:function(r){r=r?r.previousSibling:null;while(r!==null&&r.nodeType!==1){r=r.previousSibling}return r},get_node:function(t,r){if(t&&t.id){t=t.id}var u;try{if(this._model.data[t]){t=this._model.data[t]}else{if(((u=j(t,this.element)).length||(u=j("#"+t.replace(j.jstree.idregex,"\\$&"),this.element)).length)&&this._model.data[u.closest("li").attr("id")]){t=this._model.data[u.closest("li").attr("id")]}else{if((u=j(t,this.element)).length&&u.hasClass("jstree")){t=this._model.data["#"]}else{return false}}}if(r){t=t.id==="#"?this.element:j("#"+t.id.replace(j.jstree.idregex,"\\$&"),this.element)}return t}catch(s){return false}},get_path:function(w,u,t){w=w.parents?w:this.get_node(w);if(!w||w.id==="#"||!w.parents){return false}var s,r,v=[];v.push(t?w.id:w.text);for(s=0,r=w.parents.length;s<r;s++){v.push(t?w.parents[s]:this.get_text(w.parents[s]))}v=v.reverse().slice(1);return u?v.join(u):v},get_next_dom:function(t,r){var s;t=this.get_node(t,true);if(t[0]===this.element[0]){s=this._firstChild(this.get_container_ul()[0]);return s?j(s):false}if(!t||!t.length){return false}if(r){s=this._nextSibling(t[0]);return s?j(s):false}if(t.hasClass("jstree-open")){s=this._firstChild(t.children("ul")[0]);return s?j(s):false}if((s=this._nextSibling(t[0]))!==null){return j(s)}return t.parentsUntil(".jstree","li").next("li").eq(0)},get_prev_dom:function(t,r){var s;t=this.get_node(t,true);if(t[0]===this.element[0]){s=this.get_container_ul()[0].lastChild;return s?j(s):false}if(!t||!t.length){return false}if(r){s=this._previousSibling(t[0]);return s?j(s):false}if((s=this._previousSibling(t[0]))!==null){t=j(s);while(t.hasClass("jstree-open")){t=t.children("ul:eq(0)").children("li:last")}return t}s=t[0].parentNode.parentNode;return s&&s.tagName==="LI"?j(s):false},get_parent:function(r){r=this.get_node(r);if(!r||r.id==="#"){return false}return r.parent},get_children_dom:function(r){r=this.get_node(r,true);if(r[0]===this.element[0]){return this.get_container_ul().children("li")}if(!r||!r.length){return false}return r.children("ul").children("li")},is_parent:function(r){r=this.get_node(r);return r&&(r.state.loaded===false||r.children.length>0)},is_loaded:function(r){r=this.get_node(r);return r&&r.state.loaded},is_loading:function(r){r=this.get_node(r);return r&&r.state&&r.state.loading},is_open:function(r){r=this.get_node(r);return r&&r.state.opened},is_closed:function(r){r=this.get_node(r);return r&&this.is_parent(r)&&!r.state.opened},is_leaf:function(r){return !this.is_parent(r)},load_node:function(u,z){var x,w,s,r,v,t,y;if(j.isArray(u)){u=u.slice();for(x=0,w=u.length;x<w;x++){this.load_node(u[x],z)}return true}u=this.get_node(u);if(!u){if(z){z.call(this,u,false)}return false}if(u.state.loaded){u.state.loaded=false;for(s=0,r=u.children_d.length;s<r;s++){for(v=0,t=u.parents.length;v<t;v++){this._model.data[u.parents[v]].children_d=j.vakata.array_remove_item(this._model.data[u.parents[v]].children_d,u.children_d[s])}if(this._model.data[u.children_d[s]].state.selected){y=true;this._data.core.selected=j.vakata.array_remove_item(this._data.core.selected,u.children_d[s])}delete this._model.data[u.children_d[s]]}u.children=[];u.children_d=[];if(y){this.trigger("changed",{action:"load_node",node:u,selected:this._data.core.selected})}}u.state.loading=true;this.get_node(u,true).addClass("jstree-loading");this._load_node(u,j.proxy(function(A){u.state.loading=false;u.state.loaded=A;var B=this.get_node(u,true);if(u.state.loaded&&!u.children.length&&B&&B.length&&!B.hasClass("jstree-leaf")){B.removeClass("jstree-closed jstree-open").addClass("jstree-leaf")}B.removeClass("jstree-loading");this.trigger("load_node",{node:u,status:A});if(z){z.call(this,u,A)}},this));return true},_load_nodes:function(t,z,w){var x=true,y=function(){this._load_nodes(t,z,true)},s=this._model.data,v,u;for(v=0,u=t.length;v<u;v++){if(s[t[v]]&&(!s[t[v]].state.loaded||!w)){if(!this.is_loading(t[v])){this.load_node(t[v],y)}x=false}}if(x){if(!z.done){z.call(this,t);z.done=true}}},_load_node:function(v,w){var u=this.settings.core.data,r;if(!u){return w.call(this,v.id==="#"?this._append_html_data(v,this._data.core.original_container_html.clone(true)):false)}if(j.isFunction(u)){return u.call(this,v,j.proxy(function(s){return s===false?w.call(this,false):w.call(this,this[typeof s==="string"?"_append_html_data":"_append_json_data"](v,typeof s==="string"?j(s):s))},this))}if(typeof u==="object"){if(u.url){u=j.extend(true,{},u);if(j.isFunction(u.url)){u.url=u.url.call(this,v)}if(j.isFunction(u.data)){u.data=u.data.call(this,v)}return j.ajax(u).done(j.proxy(function(A,y,s){var z=s.getResponseHeader("Content-Type");if(z.indexOf("json")!==-1||typeof A==="object"){return w.call(this,this._append_json_data(v,A))}if(z.indexOf("html")!==-1||typeof A==="string"){return w.call(this,this._append_html_data(v,j(A)))}this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:v.id,xhr:s})};return w.call(this,false)},this)).fail(j.proxy(function(s){w.call(this,false);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:v.id,xhr:s})};this.settings.core.error.call(this,this._data.core.last_error)},this))}r=(j.isArray(u)||j.isPlainObject(u))?JSON.parse(JSON.stringify(u)):u;if(v.id!=="#"){this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:v.id})}}return w.call(this,(v.id==="#"?this._append_json_data(v,r):false))}if(typeof u==="string"){if(v.id!=="#"){this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:v.id})}}return w.call(this,(v.id==="#"?this._append_html_data(v,j(u)):false))}return w.call(this,false)},_node_changed:function(r){r=this.get_node(r);if(r){this._model.changed.push(r.id)}},_append_html_data:function(v,y){v=this.get_node(v);v.children=[];v.children_d=[];var B=y.is("ul")?y.children():y,A=v.id,D=[],z=[],t=this._model.data,r=t[A],C=this._data.core.selected.length,x,w,u;B.each(j.proxy(function(E,s){x=this._parse_model_from_html(j(s),A,r.parents.concat());if(x){D.push(x);z.push(x);if(t[x].children_d.length){z=z.concat(t[x].children_d)}}},this));r.children=D;r.children_d=z;for(w=0,u=r.parents.length;w<u;w++){t[r.parents[w]].children_d=t[r.parents[w]].children_d.concat(z)}this.trigger("model",{nodes:z,parent:A});if(A!=="#"){this._node_changed(A);this.redraw()}else{this.get_container_ul().children(".jstree-initial-node").remove();this.redraw(true)}if(this._data.core.selected.length!==C){this.trigger("changed",{action:"model",selected:this._data.core.selected})}return true},_append_json_data:function(v,y){v=this.get_node(v);v.children=[];v.children_d=[];var B=y,A=v.id,D=[],z=[],t=this._model.data,r=t[A],C=this._data.core.selected.length,x,w,u;if(B.d){B=B.d;if(typeof B==="string"){B=JSON.parse(B)}}if(!j.isArray(B)){B=[B]}if(B.length&&B[0].id!==e&&B[0].parent!==e){for(w=0,u=B.length;w<u;w++){if(!B[w].children){B[w].children=[]}t[B[w].id.toString()]=B[w]}for(w=0,u=B.length;w<u;w++){t[B[w].parent.toString()].children.push(B[w].id.toString());r.children_d.push(B[w].id.toString())}for(w=0,u=r.children.length;w<u;w++){x=this._parse_model_from_flat_json(t[r.children[w]],A,r.parents.concat());z.push(x);if(t[x].children_d.length){z=z.concat(t[x].children_d)}}}else{for(w=0,u=B.length;w<u;w++){x=this._parse_model_from_json(B[w],A,r.parents.concat());if(x){D.push(x);z.push(x);if(t[x].children_d.length){z=z.concat(t[x].children_d)}}}r.children=D;r.children_d=z;for(w=0,u=r.parents.length;w<u;w++){t[r.parents[w]].children_d=t[r.parents[w]].children_d.concat(z)}}this.trigger("model",{nodes:z,parent:A});if(A!=="#"){this._node_changed(A);this.redraw()}else{this.redraw(true)}if(this._data.core.selected.length!==C){this.trigger("changed",{action:"model",selected:this._data.core.selected})}return true},_parse_model_from_html:function(z,s,r){if(!r){r=[]}else{r=[].concat(r)}if(s){r.unshift(s)}var A,y,t=this._model.data,w={id:false,text:false,icon:true,parent:s,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false},x,v,u;for(x in this._model.default_state){if(this._model.default_state.hasOwnProperty(x)){w.state[x]=this._model.default_state[x]}}v=j.vakata.attributes(z,true);j.each(v,function(C,B){B=j.trim(B);if(!B.length){return true}w.li_attr[C]=B;if(C==="id"){w.id=B.toString()}});v=z.children("a").eq(0);if(v.length){v=j.vakata.attributes(v,true);j.each(v,function(C,B){B=j.trim(B);if(B.length){w.a_attr[C]=B}})}v=z.children("a:eq(0)").length?z.children("a:eq(0)").clone():z.clone();v.children("ins, i, ul").remove();v=v.html();v=j("<div />").html(v);w.text=v.html();v=z.data();w.data=v?j.extend(true,{},v):null;w.state.opened=z.hasClass("jstree-open");w.state.selected=z.children("a").hasClass("jstree-clicked");w.state.disabled=z.children("a").hasClass("jstree-disabled");if(w.data&&w.data.jstree){for(x in w.data.jstree){if(w.data.jstree.hasOwnProperty(x)){w.state[x]=w.data.jstree[x]}}}v=z.children("a").children(".jstree-themeicon");if(v.length){w.icon=v.hasClass("jstree-themeicon-hidden")?false:v.attr("rel")}if(w.state.icon){w.icon=w.state.icon}v=z.children("ul").children("li");do{u="j"+this._id+"_"+(++this._cnt)}while(t[u]);w.id=w.li_attr.id?w.li_attr.id.toString():u;if(v.length){v.each(j.proxy(function(C,B){A=this._parse_model_from_html(j(B),w.id,r);y=this._model.data[A];w.children.push(A);if(y.children_d.length){w.children_d=w.children_d.concat(y.children_d)}},this));w.children_d=w.children_d.concat(w.children)}else{if(z.hasClass("jstree-closed")){w.state.loaded=false}}if(w.li_attr["class"]){w.li_attr["class"]=w.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")}if(w.a_attr["class"]){w.a_attr["class"]=w.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")}t[w.id]=w;if(w.state.selected){this._data.core.selected.push(w.id)}return w.id},_parse_model_from_flat_json:function(z,s,r){if(!r){r=[]}else{r=r.concat()}if(s){r.unshift(s)}var u=z.id.toString(),t=this._model.data,B=this._model.default_state,x,v,A,y,w={id:u,text:z.text||"",icon:z.icon!==e?z.icon:true,parent:s,parents:r,children:z.children||[],children_d:z.children_d||[],data:z.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(x in B){if(B.hasOwnProperty(x)){w.state[x]=B[x]}}if(z&&z.data&&z.data.jstree&&z.data.jstree.icon){w.icon=z.data.jstree.icon}if(z&&z.data){w.data=z.data;if(z.data.jstree){for(x in z.data.jstree){if(z.data.jstree.hasOwnProperty(x)){w.state[x]=z.data.jstree[x]}}}}if(z&&typeof z.state==="object"){for(x in z.state){if(z.state.hasOwnProperty(x)){w.state[x]=z.state[x]}}}if(z&&typeof z.li_attr==="object"){for(x in z.li_attr){if(z.li_attr.hasOwnProperty(x)){w.li_attr[x]=z.li_attr[x]}}}if(!w.li_attr.id){w.li_attr.id=u}if(z&&typeof z.a_attr==="object"){for(x in z.a_attr){if(z.a_attr.hasOwnProperty(x)){w.a_attr[x]=z.a_attr[x]}}}if(z&&z.children&&z.children===true){w.state.loaded=false;w.children=[];w.children_d=[]}t[w.id]=w;for(x=0,v=w.children.length;x<v;x++){A=this._parse_model_from_flat_json(t[w.children[x]],w.id,r);y=t[A];w.children_d.push(A);if(y.children_d.length){w.children_d=w.children_d.concat(y.children_d)}}delete z.data;delete z.children;t[w.id].original=z;if(w.state.selected){this._data.core.selected.push(w.id)}return w.id},_parse_model_from_json:function(z,s,r){if(!r){r=[]}else{r=r.concat()}if(s){r.unshift(s)}var u=false,x,v,A,y,t=this._model.data,B=this._model.default_state,w;do{u="j"+this._id+"_"+(++this._cnt)}while(t[u]);w={id:false,text:typeof z==="string"?z:"",icon:typeof z==="object"&&z.icon!==e?z.icon:true,parent:s,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(x in B){if(B.hasOwnProperty(x)){w.state[x]=B[x]}}if(z&&z.id){w.id=z.id.toString()}if(z&&z.text){w.text=z.text}if(z&&z.data&&z.data.jstree&&z.data.jstree.icon){w.icon=z.data.jstree.icon}if(z&&z.data){w.data=z.data;if(z.data.jstree){for(x in z.data.jstree){if(z.data.jstree.hasOwnProperty(x)){w.state[x]=z.data.jstree[x]}}}}if(z&&typeof z.state==="object"){for(x in z.state){if(z.state.hasOwnProperty(x)){w.state[x]=z.state[x]}}}if(z&&typeof z.li_attr==="object"){for(x in z.li_attr){if(z.li_attr.hasOwnProperty(x)){w.li_attr[x]=z.li_attr[x]}}}if(w.li_attr.id&&!w.id){w.id=w.li_attr.id.toString()}if(!w.id){w.id=u}if(!w.li_attr.id){w.li_attr.id=w.id}if(z&&typeof z.a_attr==="object"){for(x in z.a_attr){if(z.a_attr.hasOwnProperty(x)){w.a_attr[x]=z.a_attr[x]}}}if(z&&z.children&&z.children.length){for(x=0,v=z.children.length;x<v;x++){A=this._parse_model_from_json(z.children[x],w.id,r);y=t[A];w.children.push(A);if(y.children_d.length){w.children_d=w.children_d.concat(y.children_d)}}w.children_d=w.children_d.concat(w.children)}if(z&&z.children&&z.children===true){w.state.loaded=false;w.children=[];w.children_d=[]}delete z.data;delete z.children;w.original=z;t[w.id]=w;if(w.state.selected){this._data.core.selected.push(w.id)}return w.id},_redraw:function(){var r=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),v=document.createElement("UL"),u,t,s;for(t=0,s=r.length;t<s;t++){u=this.redraw_node(r[t],true,this._model.force_full_redraw);if(u&&this._model.force_full_redraw){v.appendChild(u)}}if(this._model.force_full_redraw){v.className=this.get_container_ul()[0].className;this.element.empty().append(v)}this._model.force_full_redraw=false;this._model.changed=[];this.trigger("redraw",{nodes:r})},redraw:function(r){if(r){this._model.force_full_redraw=true}this._redraw()},redraw_node:function(v,F,E){var y=this.get_node(v),C=false,r=false,t=false,z=false,x=false,w=false,D="",B=document,u=this._model.data,A=false,G=false;if(!y){return false}if(y.id==="#"){return this.redraw(true)}F=F||y.children.length===0;v=!document.querySelector?document.getElementById(y.id):this.element[0].querySelector("#"+("0123456789".indexOf(y.id[0])!==-1?"\\3"+y.id[0]+" "+y.id.substr(1).replace(j.jstree.idregex,"\\$&"):y.id.replace(j.jstree.idregex,"\\$&")));if(!v){F=true;if(!E){C=y.parent!=="#"?j("#"+y.parent.replace(j.jstree.idregex,"\\$&"),this.element)[0]:null;if(C!==null&&(!C||!u[y.parent].state.opened)){return false}r=j.inArray(y.id,C===null?u["#"].children:u[y.parent].children)}}else{v=j(v);if(!E){C=v.parent().parent()[0];if(C===this.element[0]){C=null}r=v.index()}if(!F&&y.children.length&&!v.children("ul").length){F=true}if(!F){t=v.children("UL")[0]}G=v.attr("aria-selected");A=v.children(".jstree-anchor")[0]===document.activeElement;v.remove()}v=q.cloneNode(true);D="jstree-node ";for(z in y.li_attr){if(y.li_attr.hasOwnProperty(z)){if(z==="id"){continue}if(z!=="class"){v.setAttribute(z,y.li_attr[z])}else{D+=y.li_attr[z]}}}if(G&&G!=="false"){v.setAttribute("aria-selected",true)}if(y.state.loaded&&!y.children.length){D+=" jstree-leaf"}else{D+=y.state.opened&&y.state.loaded?" jstree-open":" jstree-closed";v.setAttribute("aria-expanded",(y.state.opened&&y.state.loaded))}if(y.parent!==null&&u[y.parent].children[u[y.parent].children.length-1]===y.id){D+=" jstree-last"}v.id=y.id;v.className=D;D=(y.state.selected?" jstree-clicked":"")+(y.state.disabled?" jstree-disabled":"");for(x in y.a_attr){if(y.a_attr.hasOwnProperty(x)){if(x==="href"&&y.a_attr[x]==="#"){continue}if(x!=="class"){v.childNodes[1].setAttribute(x,y.a_attr[x])}else{D+=" "+y.a_attr[x]}}}if(D.length){v.childNodes[1].className="jstree-anchor "+D}if((y.icon&&y.icon!==true)||y.icon===false){if(y.icon===false){v.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden"}else{if(y.icon.indexOf("/")===-1&&y.icon.indexOf(".")===-1){v.childNodes[1].childNodes[0].className+=" "+y.icon+" jstree-themeicon-custom"}else{v.childNodes[1].childNodes[0].style.backgroundImage="url("+y.icon+")";v.childNodes[1].childNodes[0].style.backgroundPosition="center center";v.childNodes[1].childNodes[0].style.backgroundSize="auto";v.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom"}}}v.childNodes[1].innerHTML+=y.text;if(F&&y.children.length&&y.state.opened&&y.state.loaded){w=B.createElement("UL");w.setAttribute("role","group");w.className="jstree-children";for(z=0,x=y.children.length;z<x;z++){w.appendChild(this.redraw_node(y.children[z],F,true))}v.appendChild(w)}if(t){v.appendChild(t)}if(!E){if(!C){C=this.element[0]}if(!C.getElementsByTagName("UL").length){z=B.createElement("UL");z.setAttribute("role","group");z.className="jstree-children";C.appendChild(z);C=z}else{C=C.getElementsByTagName("UL")[0]}if(r<C.childNodes.length){C.insertBefore(v,C.childNodes[r])}else{C.appendChild(v)}if(A){v.childNodes[1].focus()}}if(y.state.opened&&!y.state.loaded){y.state.opened=false;setTimeout(j.proxy(function(){this.open_node(y.id,false,0)},this),0)}return v},open_node:function(w,y,v){var u,s,x,r;if(j.isArray(w)){w=w.slice();for(u=0,s=w.length;u<s;u++){this.open_node(w[u],y,v)}return true}w=this.get_node(w);if(!w||w.id==="#"){return false}v=v===e?this.settings.core.animation:v;if(!this.is_closed(w)){if(y){y.call(this,w,false)}return false}if(!this.is_loaded(w)){if(this.is_loading(w)){return setTimeout(j.proxy(function(){this.open_node(w,y,v)},this),500)}this.load_node(w,function(z,t){return t?this.open_node(z,y,v):(y?y.call(this,z,false):false)})}else{x=this.get_node(w,true);r=this;if(x.length){if(w.children.length&&!this._firstChild(x.children("ul")[0])){w.state.opened=true;this.redraw_node(w,true);x=this.get_node(w,true)}if(!v){this.trigger("before_open",{node:w});x[0].className=x[0].className.replace("jstree-closed","jstree-open");x[0].setAttribute("aria-expanded",true)}else{this.trigger("before_open",{node:w});x.children("ul").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",true).children("ul").stop(true,true).slideDown(v,function(){this.style.display="";r.trigger("after_open",{node:w})})}}w.state.opened=true;if(y){y.call(this,w,true)}if(!x.length){this.trigger("before_open",{node:w})}this.trigger("open_node",{node:w});if(!v||!x.length){this.trigger("after_open",{node:w})}}},_open_to:function(u){u=this.get_node(u);if(!u||u.id==="#"){return false}var s,r,t=u.parents;for(s=0,r=t.length;s<r;s+=1){if(s!=="#"){this.open_node(t[s],false,0)}}return j("#"+u.id.replace(j.jstree.idregex,"\\$&"),this.element)},close_node:function(w,v){var u,s,r,x;if(j.isArray(w)){w=w.slice();for(u=0,s=w.length;u<s;u++){this.close_node(w[u],v)}return true}w=this.get_node(w);if(!w||w.id==="#"){return false}if(this.is_closed(w)){return false}v=v===e?this.settings.core.animation:v;r=this;x=this.get_node(w,true);if(x.length){if(!v){x[0].className=x[0].className.replace("jstree-open","jstree-closed");x.attr("aria-expanded",false).children("ul").remove()}else{x.children("ul").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",false).children("ul").stop(true,true).slideUp(v,function(){this.style.display="";x.children("ul").remove();r.trigger("after_close",{node:w})})}}w.state.opened=false;this.trigger("close_node",{node:w});if(!v||!x.length){this.trigger("after_close",{node:w})}},toggle_node:function(t){var s,r;if(j.isArray(t)){t=t.slice();for(s=0,r=t.length;s<r;s++){this.toggle_node(t[s])}return true}if(this.is_closed(t)){return this.open_node(t)}if(this.is_open(t)){return this.close_node(t)}},open_all:function(v,u,r){if(!v){v="#"}v=this.get_node(v);if(!v){return false}var w=v.id==="#"?this.get_container_ul():this.get_node(v,true),t,s,x;if(!w.length){for(t=0,s=v.children_d.length;t<s;t++){if(this.is_closed(this._model.data[v.children_d[t]])){this._model.data[v.children_d[t]].state.opened=true}}return this.trigger("open_all",{node:v})}r=r||w;x=this;w=this.is_closed(v)?w.find("li.jstree-closed").addBack():w.find("li.jstree-closed");w.each(function(){x.open_node(this,function(z,y){if(y&&this.is_parent(z)){this.open_all(z,u,r)}},u||0)});if(r.find("li.jstree-closed").length===0){this.trigger("open_all",{node:this.get_node(r)})}},close_all:function(u,t){if(!u){u="#"}u=this.get_node(u);if(!u){return false}var v=u.id==="#"?this.get_container_ul():this.get_node(u,true),w=this,s,r;if(!v.length){for(s=0,r=u.children_d.length;s<r;s++){this._model.data[u.children_d[s]].state.opened=false}return this.trigger("close_all",{node:u})}v=this.is_open(u)?v.find("li.jstree-open").addBack():v.find("li.jstree-open");j(v.get().reverse()).each(function(){w.close_node(this,t||0)});this.trigger("close_all",{node:u})},is_disabled:function(r){r=this.get_node(r);return r&&r.state&&r.state.disabled},enable_node:function(t){var s,r;if(j.isArray(t)){t=t.slice();for(s=0,r=t.length;s<r;s++){this.enable_node(t[s])}return true}t=this.get_node(t);if(!t||t.id==="#"){return false}t.state.disabled=false;this.get_node(t,true).children(".jstree-anchor").removeClass("jstree-disabled");this.trigger("enable_node",{node:t})},disable_node:function(t){var s,r;if(j.isArray(t)){t=t.slice();for(s=0,r=t.length;s<r;s++){this.disable_node(t[s])}return true}t=this.get_node(t);if(!t||t.id==="#"){return false}t.state.disabled=true;this.get_node(t,true).children(".jstree-anchor").addClass("jstree-disabled");this.trigger("disable_node",{node:t})},activate_node:function(w,v){if(this.is_disabled(w)){return false}this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==e?this.get_node(this._data.core.last_clicked.id):null;if(this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected){this._data.core.last_clicked=null}if(!this._data.core.last_clicked&&this._data.core.selected.length){this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])}if(!this.settings.core.multiple||(!v.metaKey&&!v.ctrlKey&&!v.shiftKey)||(v.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(w)||this.get_parent(w)!==this._data.core.last_clicked.parent))){if(!this.settings.core.multiple&&(v.metaKey||v.ctrlKey||v.shiftKey)&&this.is_selected(w)){this.deselect_node(w,false,false,v)}else{this.deselect_all(true);this.select_node(w,false,false,v);this._data.core.last_clicked=this.get_node(w)}}else{if(v.shiftKey){var x=this.get_node(w).id,r=this._data.core.last_clicked.id,u=this.get_node(this._data.core.last_clicked.parent).children,y=false,t,s;for(t=0,s=u.length;t<s;t+=1){if(u[t]===x){y=!y}if(u[t]===r){y=!y}if(y||u[t]===x||u[t]===r){this.select_node(u[t],false,false,v)}else{this.deselect_node(u[t],false,false,v)}}}else{if(!this.is_selected(w)){this.select_node(w,false,false,v)}else{this.deselect_node(w,false,false,v)}}}this.trigger("activate_node",{node:this.get_node(w)})},hover_node:function(s){s=this.get_node(s,true);if(!s||!s.length||s.children(".jstree-hovered").length){return false}var u=this.element.find(".jstree-hovered"),r=this.element;if(u&&u.length){this.dehover_node(u)}s.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(s)});setTimeout(function(){r.attr("aria-activedescendant",s[0].id);s.attr("aria-selected",true)},0)},dehover_node:function(r){r=this.get_node(r,true);if(!r||!r.length||!r.children(".jstree-hovered").length){return false}r.attr("aria-selected",false).children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(r)})},select_node:function(w,y,r,v){var x,u,s,t;if(j.isArray(w)){w=w.slice();for(u=0,s=w.length;u<s;u++){this.select_node(w[u],y,r,v)}return true}w=this.get_node(w);if(!w||w.id==="#"){return false}x=this.get_node(w,true);if(!w.state.selected){w.state.selected=true;this._data.core.selected.push(w.id);if(!r){x=this._open_to(w)}if(x&&x.length){x.children(".jstree-anchor").addClass("jstree-clicked")}this.trigger("select_node",{node:w,selected:this._data.core.selected,event:v});if(!y){this.trigger("changed",{action:"select_node",node:w,selected:this._data.core.selected,event:v})}}},deselect_node:function(u,w,t){var s,r,v;if(j.isArray(u)){u=u.slice();for(s=0,r=u.length;s<r;s++){this.deselect_node(u[s],w,t)}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}v=this.get_node(u,true);if(u.state.selected){u.state.selected=false;this._data.core.selected=j.vakata.array_remove_item(this._data.core.selected,u.id);if(v.length){v.children(".jstree-anchor").removeClass("jstree-clicked")}this.trigger("deselect_node",{node:u,selected:this._data.core.selected,event:t});if(!w){this.trigger("changed",{action:"deselect_node",node:u,selected:this._data.core.selected,event:t})}}},select_all:function(u){var t=this._data.core.selected.concat([]),s,r;this._data.core.selected=this._model.data["#"].children_d.concat();for(s=0,r=this._data.core.selected.length;s<r;s++){if(this._model.data[this._data.core.selected[s]]){this._model.data[this._data.core.selected[s]].state.selected=true}}this.redraw(true);this.trigger("select_all",{selected:this._data.core.selected});if(!u){this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:t})}},deselect_all:function(u){var t=this._data.core.selected.concat([]),s,r;for(s=0,r=this._data.core.selected.length;s<r;s++){if(this._model.data[this._data.core.selected[s]]){this._model.data[this._data.core.selected[s]].state.selected=false}}this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked");this.trigger("deselect_all",{selected:this._data.core.selected,node:t});if(!u){this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})}},is_selected:function(r){r=this.get_node(r);if(!r||r.id==="#"){return false}return r.state.selected},get_selected:function(r){return r?j.map(this._data.core.selected,j.proxy(function(s){return this.get_node(s)},this)):this._data.core.selected},get_top_selected:function(w){var v=this.get_selected(true),x={},u,t,s,r;for(u=0,t=v.length;u<t;u++){x[v[u].id]=v[u]}for(u=0,t=v.length;u<t;u++){for(s=0,r=v[u].children_d.length;s<r;s++){if(x[v[u].children_d[s]]){delete x[v[u].children_d[s]]}}}v=[];for(u in x){if(x.hasOwnProperty(u)){v.push(u)}}return w?j.map(v,j.proxy(function(y){return this.get_node(y)},this)):v},get_bottom_selected:function(u){var t=this.get_selected(true),v=[],s,r;for(s=0,r=t.length;s<r;s++){if(!t[s].children.length){v.push(t[s].id)}}return u?j.map(v,j.proxy(function(w){return this.get_node(w)},this)):v},get_state:function(){var s={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},r;for(r in this._model.data){if(this._model.data.hasOwnProperty(r)){if(r!=="#"){if(this._model.data[r].state.opened){s.core.open.push(r)}if(this._model.data[r].state.selected){s.core.selected.push(r)}}}}return s},set_state:function(u,x){if(u){if(u.core){var s,w,r,v;if(u.core.open){if(!j.isArray(u.core.open)){delete u.core.open;this.set_state(u,x);return false}s=true;w=false;r=this;j.each(u.core.open.concat([]),function(y,t){w=r.get_node(t);if(w){if(r.is_loaded(t)){if(r.is_closed(t)){r.open_node(t,false,0)}if(u&&u.core&&u.core.open){j.vakata.array_remove_item(u.core.open,t)}}else{if(!r.is_loading(t)){r.open_node(t,j.proxy(function(A,z){if(!z&&u&&u.core&&u.core.open){j.vakata.array_remove_item(u.core.open,A.id)}this.set_state(u,x)},r),0)}s=false}}});if(s){delete u.core.open;this.set_state(u,x)}return false}if(u.core.scroll){if(u.core.scroll&&u.core.scroll.left!==e){this.element.scrollLeft(u.core.scroll.left)}if(u.core.scroll&&u.core.scroll.top!==e){this.element.scrollTop(u.core.scroll.top)}delete u.core.scroll;this.set_state(u,x);return false}if(u.core.selected){v=this;this.deselect_all();j.each(u.core.selected,function(y,t){v.select_node(t)});delete u.core.selected;this.set_state(u,x);return false}if(j.isEmptyObject(u.core)){delete u.core;this.set_state(u,x);return false}}if(j.isEmptyObject(u)){u=null;if(x){x.call(this)}this.trigger("set_state");return false}return true}return false},refresh:function(r){this._data.core.state=this.get_state();this._cnt=0;this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:false}}};var s=this.get_container_ul()[0].className;if(!r){this.element.html("<ul class='jstree-container-ul'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>")}this.load_node("#",function(u,t){if(t){this.get_container_ul()[0].className=s;this.set_state(j.extend(true,{},this._data.core.state),function(){this.trigger("refresh")})}this._data.core.state=null})},refresh_node:function(t){t=this.get_node(t);if(!t||t.id==="#"){return false}var u=[],r=this._data.core.selected.concat([]);if(t.state.opened===true){u.push(t.id)}this.get_node(t,true).find(".jstree-open").each(function(){u.push(this.id)});this._load_nodes(u,j.proxy(function(s){this.open_node(s,false,0);this.select_node(this._data.core.selected);this.trigger("refresh_node",{node:t,nodes:s})},this))},set_id:function(u,v){u=this.get_node(u);if(!u||u.id==="#"){return false}var t,s,r=this._model.data;v=v.toString();r[u.parent].children[j.inArray(u.id,r[u.parent].children)]=v;for(t=0,s=u.parents.length;t<s;t++){r[u.parents[t]].children_d[j.inArray(u.id,r[u.parents[t]].children_d)]=v}for(t=0,s=u.children.length;t<s;t++){r[u.children[t]].parent=v}for(t=0,s=u.children_d.length;t<s;t++){r[u.children_d[t]].parents[j.inArray(u.id,r[u.children_d[t]].parents)]=v}t=j.inArray(u.id,this._data.core.selected);if(t!==-1){this._data.core.selected[t]=v}t=this.get_node(u.id,true);if(t){t.attr("id",v)}delete r[u.id];u.id=v;r[v]=u;return true},get_text:function(r){r=this.get_node(r);return(!r||r.id==="#")?false:r.text},set_text:function(u,w){var t,s,v,r;if(j.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.set_text(u[t],w)}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}u.text=w;v=this.get_node(u,true);if(v.length){v=v.children(".jstree-anchor:eq(0)");r=v.children("I").clone();v.html(w).prepend(r);this.trigger("set_text",{obj:u,text:w})}return true},get_json:function(v,s,w){v=this.get_node(v||"#");if(!v){return false}if(s&&s.flat&&!w){w=[]}var u={id:v.id,text:v.text,icon:this.get_icon(v),li_attr:v.li_attr,a_attr:v.a_attr,state:{},data:s&&s.no_data?false:v.data},t,r;if(s&&s.flat){u.parent=v.parent}else{u.children=[]}if(!s||!s.no_state){for(t in v.state){if(v.state.hasOwnProperty(t)){u.state[t]=v.state[t]}}}if(s&&s.no_id){delete u.id;if(u.li_attr&&u.li_attr.id){delete u.li_attr.id}}if(s&&s.flat&&v.id!=="#"){w.push(u)}if(!s||!s.no_children){for(t=0,r=v.children.length;t<r;t++){if(s&&s.flat){this.get_json(v.children[t],s,w)}else{u.children.push(this.get_json(v.children[t],s))}}}return s&&s.flat?w:(v.id==="#"?u.children:u)},create_node:function(w,r,y,z,x){if(w===null){w="#"}w=this.get_node(w);if(!w){return false}y=y===e?"last":y;if(!y.toString().match(/^(before|after)$/)&&!x&&!this.is_loaded(w)){return this.load_node(w,function(){this.create_node(w,r,y,z,true)})}if(!r){r={text:this.get_string("New node")}}if(r.text===e){r.text=this.get_string("New node")}var t,v,u,s;if(w.id==="#"){if(y==="before"){y="first"}if(y==="after"){y="last"}}switch(y){case"before":t=this.get_node(w.parent);y=j.inArray(w.id,t.children);w=t;break;case"after":t=this.get_node(w.parent);y=j.inArray(w.id,t.children)+1;w=t;break;case"inside":case"first":y=0;break;case"last":y=w.children.length;break;default:if(!y){y=0}break}if(y>w.children.length){y=w.children.length}if(!r.id){r.id=true}if(!this.check("create_node",r,w,y)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(r.id===true){delete r.id}r=this._parse_model_from_json(r,w.id,w.parents.concat());if(!r){return false}t=this.get_node(r);v=[];v.push(r);v=v.concat(t.children_d);this.trigger("model",{nodes:v,parent:w.id});w.children_d=w.children_d.concat(v);for(u=0,s=w.parents.length;u<s;u++){this._model.data[w.parents[u]].children_d=this._model.data[w.parents[u]].children_d.concat(v)}r=t;t=[];for(u=0,s=w.children.length;u<s;u++){t[u>=y?u+1:u]=w.children[u]}t[y]=r.id;w.children=t;this.redraw_node(w,true);if(z){z.call(this,this.get_node(r))}this.trigger("create_node",{node:this.get_node(r),parent:w.id,position:y});return r.id},rename_node:function(u,v){var t,s,r;if(j.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.rename_node(u[t],v)}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}r=u.text;if(!this.check("rename_node",u,this.get_parent(u),v)){this.settings.core.error.call(this,this._data.core.last_error);return false}this.set_text(u,v);this.trigger("rename_node",{node:u,text:v,old:r});return true},delete_node:function(u){var y,x,z,B,v,w,t,s,r,A;if(j.isArray(u)){u=u.slice();for(y=0,x=u.length;y<x;y++){this.delete_node(u[y])}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}z=this.get_node(u.parent);B=j.inArray(u.id,z.children);A=false;if(!this.check("delete_node",u,z,B)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(B!==-1){z.children=j.vakata.array_remove(z.children,B)}v=u.children_d.concat([]);v.push(u.id);for(s=0,r=v.length;s<r;s++){for(w=0,t=u.parents.length;w<t;w++){B=j.inArray(v[s],this._model.data[u.parents[w]].children_d);if(B!==-1){this._model.data[u.parents[w]].children_d=j.vakata.array_remove(this._model.data[u.parents[w]].children_d,B)}}if(this._model.data[v[s]].state.selected){A=true;B=j.inArray(v[s],this._data.core.selected);if(B!==-1){this._data.core.selected=j.vakata.array_remove(this._data.core.selected,B)}}}this.trigger("delete_node",{node:u,parent:z.id});if(A){this.trigger("changed",{action:"delete_node",node:u,selected:this._data.core.selected,parent:z.id})}for(s=0,r=v.length;s<r;s++){delete this._model.data[v[s]]}this.redraw_node(z,true);return true},check:function(r,v,u,x,t){v=v&&v.id?v:this.get_node(v);u=u&&u.id?u:this.get_node(u);var s=r.match(/^move_node|copy_node|create_node$/i)?u:v,w=this.settings.core.check_callback;if(r==="move_node"||r==="copy_node"){if((!t||!t.is_multi)&&(v.id===u.id||j.inArray(v.id,u.children)===x||j.inArray(u.id,v.children_d)!==-1)){this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:r,pos:x,obj:v&&v.id?v.id:false,par:u&&u.id?u.id:false})};return false}}if(s&&s.data){s=s.data}if(s&&s.functions&&(s.functions[r]===false||s.functions[r]===true)){if(s.functions[r]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+r,data:JSON.stringify({chk:r,pos:x,obj:v&&v.id?v.id:false,par:u&&u.id?u.id:false})}}return s.functions[r]}if(w===false||(j.isFunction(w)&&w.call(this,r,v,u,x,t)===false)||(w&&w[r]===false)){this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+r,data:JSON.stringify({chk:r,pos:x,obj:v&&v.id?v.id:false,par:u&&u.id?u.id:false})};return false}return true},last_error:function(){return this._data.core.last_error},move_node:function(y,A,t,r,z){var w,v,x,H,I,s,u,G,F,E,D,C,B;if(j.isArray(y)){y=y.reverse().slice();for(w=0,v=y.length;w<v;w++){this.move_node(y[w],A,t,r,z)}return true}y=y&&y.id?y:this.get_node(y);A=this.get_node(A);t=t===e?0:t;if(!A||!y||y.id==="#"){return false}if(!t.toString().match(/^(before|after)$/)&&!z&&!this.is_loaded(A)){return this.load_node(A,function(){this.move_node(y,A,t,r,true)})}x=(y.parent||"#").toString();H=(!t.toString().match(/^(before|after)$/)||A.id==="#")?A:this.get_node(A.parent);I=y.instance?y.instance:(this._model.data[y.id]?this:j.jstree.reference(y.id));s=!I||!I._id||(this._id!==I._id);if(s){if(this.copy_node(y,A,t,r,z)){if(I){I.delete_node(y)}return true}return false}if(H.id==="#"){if(t==="before"){t="first"}if(t==="after"){t="last"}}switch(t){case"before":t=j.inArray(A.id,H.children);break;case"after":t=j.inArray(A.id,H.children)+1;break;case"inside":case"first":t=0;break;case"last":t=H.children.length;break;default:if(!t){t=0}break}if(t>H.children.length){t=H.children.length}if(!this.check("move_node",y,H,t,{core:true,is_multi:(I&&I._id&&I._id!==this._id),is_foreign:(!I||!I._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false}if(y.parent===H.id){u=H.children.concat();G=j.inArray(y.id,u);if(G!==-1){u=j.vakata.array_remove(u,G);if(t>G){t--}}G=[];for(F=0,E=u.length;F<E;F++){G[F>=t?F+1:F]=u[F]}G[t]=y.id;H.children=G;this._node_changed(H.id);this.redraw(H.id==="#")}else{G=y.children_d.concat();G.push(y.id);for(F=0,E=y.parents.length;F<E;F++){u=[];B=I._model.data[y.parents[F]].children_d;for(D=0,C=B.length;D<C;D++){if(j.inArray(B[D],G)===-1){u.push(B[D])}}I._model.data[y.parents[F]].children_d=u}I._model.data[x].children=j.vakata.array_remove_item(I._model.data[x].children,y.id);for(F=0,E=H.parents.length;F<E;F++){this._model.data[H.parents[F]].children_d=this._model.data[H.parents[F]].children_d.concat(G)}u=[];for(F=0,E=H.children.length;F<E;F++){u[F>=t?F+1:F]=H.children[F]}u[t]=y.id;H.children=u;H.children_d.push(y.id);H.children_d=H.children_d.concat(y.children_d);y.parent=H.id;G=H.parents.concat();G.unshift(H.id);B=y.parents.length;y.parents=G;G=G.concat();for(F=0,E=y.children_d.length;F<E;F++){this._model.data[y.children_d[F]].parents=this._model.data[y.children_d[F]].parents.slice(0,B*-1);Array.prototype.push.apply(this._model.data[y.children_d[F]].parents,G)}this._node_changed(x);this._node_changed(H.id);this.redraw(x==="#"||H.id==="#")}if(r){r.call(this,y,H,t)}this.trigger("move_node",{node:y,parent:H.id,position:t,old_parent:x,is_multi:(I&&I._id&&I._id!==this._id),is_foreign:(!I||!I._id),old_instance:I,new_instance:this});return true},copy_node:function(x,D,F,G,E){var B,A,z,w,v,u,s,C,r,y,t;if(j.isArray(x)){x=x.reverse().slice();for(B=0,A=x.length;B<A;B++){this.copy_node(x[B],D,F,G,E)}return true}x=x&&x.id?x:this.get_node(x);D=this.get_node(D);F=F===e?0:F;if(!D||!x||x.id==="#"){return false}if(!F.toString().match(/^(before|after)$/)&&!E&&!this.is_loaded(D)){return this.load_node(D,function(){this.copy_node(x,D,F,G,true)})}C=(x.parent||"#").toString();r=(!F.toString().match(/^(before|after)$/)||D.id==="#")?D:this.get_node(D.parent);y=x.instance?x.instance:(this._model.data[x.id]?this:j.jstree.reference(x.id));t=!y||!y._id||(this._id!==y._id);if(r.id==="#"){if(F==="before"){F="first"}if(F==="after"){F="last"}}switch(F){case"before":F=j.inArray(D.id,r.children);break;case"after":F=j.inArray(D.id,r.children)+1;break;case"inside":case"first":F=0;break;case"last":F=r.children.length;break;default:if(!F){F=0}break}if(F>r.children.length){F=r.children.length}if(!this.check("copy_node",x,r,F,{core:true,is_multi:(y&&y._id&&y._id!==this._id),is_foreign:(!y||!y._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false}s=y?y.get_json(x,{no_id:true,no_data:true,no_state:true}):x;if(!s){return false}if(s.id===true){delete s.id}s=this._parse_model_from_json(s,r.id,r.parents.concat());if(!s){return false}w=this.get_node(s);if(x&&x.state&&x.state.loaded===false){w.state.loaded=false}z=[];z.push(s);z=z.concat(w.children_d);this.trigger("model",{nodes:z,parent:r.id});for(v=0,u=r.parents.length;v<u;v++){this._model.data[r.parents[v]].children_d=this._model.data[r.parents[v]].children_d.concat(z)}z=[];for(v=0,u=r.children.length;v<u;v++){z[v>=F?v+1:v]=r.children[v]}z[F]=w.id;r.children=z;r.children_d.push(w.id);r.children_d=r.children_d.concat(w.children_d);this._node_changed(r.id);this.redraw(r.id==="#");if(G){G.call(this,w,r,F)}this.trigger("copy_node",{node:w,original:x,parent:r.id,position:F,old_parent:C,is_multi:(y&&y._id&&y._id!==this._id),is_foreign:(!y||!y._id),old_instance:y,new_instance:this});return w.id},cut:function(u){if(!u){u=this._data.core.selected.concat()}if(!j.isArray(u)){u=[u]}if(!u.length){return false}var r=[],v,t,s;for(t=0,s=u.length;t<s;t++){v=this.get_node(u[t]);if(v&&v.id&&v.id!=="#"){r.push(v)}}if(!r.length){return false}d=r;l=this;m="move_node";this.trigger("cut",{node:u})},copy:function(u){if(!u){u=this._data.core.selected.concat()}if(!j.isArray(u)){u=[u]}if(!u.length){return false}var r=[],v,t,s;for(t=0,s=u.length;t<s;t++){v=this.get_node(u[t]);if(v&&v.id&&v.id!=="#"){r.push(v)}}if(!r.length){return false}d=r;l=this;m="copy_node";this.trigger("copy",{node:u})},get_buffer:function(){return{mode:m,node:d,inst:l}},can_paste:function(){return m!==false&&d!==false},paste:function(r,s){r=this.get_node(r);if(!r||!m||!m.match(/^(copy_node|move_node)$/)||!d){return false}if(this[m](d,r,s)){this.trigger("paste",{parent:r.id,node:d,mode:m})}d=false;m=false;l=false},edit:function(r,z){r=this._open_to(r);if(!r||!r.length){return false}var y=this._data.core.rtl,B=this.element.width(),A=r.children(".jstree-anchor"),D=j("<span>"),C=typeof z==="string"?z:this.get_text(r),v=j("<div />",{css:{position:"absolute",top:"-200px",left:(y?"0px":"-1000px"),visibility:"hidden"}}).appendTo("body"),u=j("<input />",{value:C,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:(this._data.core.li_height)+"px",lineHeight:(this._data.core.li_height)+"px",width:"150px"},blur:j.proxy(function(){var t=D.children(".jstree-rename-input"),s=t.val();if(s===""){s=C}v.remove();D.replaceWith(A);D.remove();this.set_text(r,C);if(this.rename_node(r,s)===false){this.set_text(r,C)}},this),keydown:function(t){var s=t.which;if(s===27){this.value=C}if(s===27||s===13||s===37||s===38||s===39||s===40||s===32){t.stopImmediatePropagation()}if(s===27||s===13){t.preventDefault();this.blur()}},click:function(s){s.stopImmediatePropagation()},mousedown:function(s){s.stopImmediatePropagation()},keyup:function(s){u.width(Math.min(v.text("pW"+this.value).width(),B))},keypress:function(s){if(s.which===13){return false}}}),x={fontFamily:A.css("fontFamily")||"",fontSize:A.css("fontSize")||"",fontWeight:A.css("fontWeight")||"",fontStyle:A.css("fontStyle")||"",fontStretch:A.css("fontStretch")||"",fontVariant:A.css("fontVariant")||"",letterSpacing:A.css("letterSpacing")||"",wordSpacing:A.css("wordSpacing")||""};this.set_text(r,"");D.attr("class",A.attr("class")).append(A.contents().clone()).append(u);A.replaceWith(D);v.css(x);u.css(x).width(Math.min(v.text("pW"+u[0].value).width(),B))[0].select()},set_theme:function(t,r){if(!t){return false}if(r===true){var s=this.settings.core.themes.dir;if(!s){s=j.jstree.path+"/themes"}r=s+"/"+t+"/style.css"}if(r&&j.inArray(r,o)===-1){j("head").append('<link rel="stylesheet" href="'+r+'" type="text/css" />');o.push(r)}if(this._data.core.themes.name){this.element.removeClass("jstree-"+this._data.core.themes.name)}this._data.core.themes.name=t;this.element.addClass("jstree-"+t);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive");this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(r){if(this._data.core.themes.variant){this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}this._data.core.themes.variant=r;if(r){this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=true;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=false;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){if(this._data.core.themes.stripes){this.hide_stripes()}else{this.show_stripes()}},show_dots:function(){this._data.core.themes.dots=true;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=false;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){if(this._data.core.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this._data.core.themes.icons=true;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=false;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){if(this._data.core.themes.icons){this.hide_icons()}else{this.show_icons()}},set_icon:function(v,t){var u,s,w,r;if(j.isArray(v)){v=v.slice();for(u=0,s=v.length;u<s;u++){this.set_icon(v[u],t)}return true}v=this.get_node(v);if(!v||v.id==="#"){return false}r=v.icon;v.icon=t;w=this.get_node(v,true).children(".jstree-anchor").children(".jstree-themeicon");if(t===false){this.hide_icon(v)}else{if(t===true){w.removeClass("jstree-themeicon-custom "+r).css("background","").removeAttr("rel")}else{if(t.indexOf("/")===-1&&t.indexOf(".")===-1){w.removeClass(r).css("background","");w.addClass(t+" jstree-themeicon-custom").attr("rel",t)}else{w.removeClass(r).css("background","");w.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t)}}}return true},get_icon:function(r){r=this.get_node(r);return(!r||r.id==="#")?false:r.icon},hide_icon:function(t){var s,r;if(j.isArray(t)){t=t.slice();for(s=0,r=t.length;s<r;s++){this.hide_icon(t[s])}return true}t=this.get_node(t);if(!t||t==="#"){return false}t.icon=false;this.get_node(t,true).children("a").children(".jstree-themeicon").addClass("jstree-themeicon-hidden");return true},show_icon:function(t){var s,r,u;if(j.isArray(t)){t=t.slice();for(s=0,r=t.length;s<r;s++){this.show_icon(t[s])}return true}t=this.get_node(t);if(!t||t==="#"){return false}u=this.get_node(t,true);t.icon=u.length?u.children("a").children(".jstree-themeicon").attr("rel"):true;if(!t.icon){t.icon=true}u.children("a").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden");return true}};j.vakata={};j.vakata.attributes=function(s,t){s=j(s)[0];var r=t?{}:[];if(s&&s.attributes){j.each(s.attributes,function(w,u){if(j.inArray(u.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1){return}if(u.nodeValue!==null&&j.trim(u.nodeValue)!==""){if(t){r[u.nodeName]=u.nodeValue}else{r.push(u.nodeName)}}})}return r};j.vakata.array_unique=function(v){var s=[],u,t,r;for(u=0,r=v.length;u<r;u++){for(t=0;t<=u;t++){if(v[u]===v[t]){break}}if(t===u){s.push(v[u])}}return s};j.vakata.array_remove=function(u,t,s){var r=u.slice((s||t)+1||u.length);u.length=t<0?u.length+t:t;u.push.apply(u,r);return u};j.vakata.array_remove_item=function(t,s){var r=j.inArray(s,t);return r!==-1?j.vakata.array_remove(t,r):t};(function(){var s={},t=function(v){v=v.toLowerCase();var u=/(chrome)[ \/]([\w.]+)/.exec(v)||/(webkit)[ \/]([\w.]+)/.exec(v)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(v)||/(msie) ([\w.]+)/.exec(v)||(v.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(v))||[];return{browser:u[1]||"",version:u[2]||"0"}},r=t(window.navigator.userAgent);if(r.browser){s[r.browser]=true;s.version=r.version}if(s.chrome){s.webkit=true}else{if(s.webkit){s.safari=true}}j.vakata.browser=s}());if(j.vakata.browser.msie&&j.vakata.browser.version<8){j.jstree.defaults.core.animation=0}var h=document.createElement("I");h.className="jstree-icon jstree-checkbox";j.jstree.defaults.checkbox={visible:true,three_state:true,whole_node:true,keep_selected_style:true};j.jstree.plugins.checkbox=function(r,s){this.bind=function(){s.bind.call(this);this._data.checkbox.uto=false;this.element.on("init.jstree",j.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;if(!this.settings.checkbox.keep_selected_style){this.element.addClass("jstree-checkbox-no-clicked")}},this)).on("loading.jstree",j.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.three_state){this.element.on("changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",j.proxy(function(){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout(j.proxy(this._undetermined,this),50)},this)).on("model.jstree",j.proxy(function(C,z){var u=this._model.data,t=u[z.parent],B=z.nodes,E=[],D,A,x,w,v,y;if(t.state.selected){for(A=0,x=B.length;A<x;A++){u[B[A]].state.selected=true}this._data.core.selected=this._data.core.selected.concat(B)}else{for(A=0,x=B.length;A<x;A++){if(u[B[A]].state.selected){for(w=0,v=u[B[A]].children_d.length;w<v;w++){u[u[B[A]].children_d[w]].state.selected=true}this._data.core.selected=this._data.core.selected.concat(u[B[A]].children_d)}}}for(A=0,x=t.children_d.length;A<x;A++){if(!u[t.children_d[A]].children.length){E.push(u[t.children_d[A]].parent)}}this._data.core.selected=j.vakata.array_unique(this._data.core.selected)},this)).on("select_node.jstree",j.proxy(function(A,y){var x=y.node,t=this._model.data,B=this.get_node(x.parent),u=this.get_node(x,true),z,v,C,w;this._data.core.selected=j.vakata.array_unique(this._data.core.selected.concat(x.children_d));for(z=0,v=x.children_d.length;z<v;z++){w=t[x.children_d[z]];w.state.selected=true;if(w&&w.original&&w.original.state&&w.original.state.undetermined){w.original.state.undetermined=false}}if(u.length){u.find(".jstree-anchor").addClass("jstree-clicked")}},this)).on("deselect_all.jstree",j.proxy(function(z,x){var y=this.get_node("#"),t=this._model.data,w,u,v;for(w=0,u=y.children_d.length;w<u;w++){v=t[y.children_d[w]];if(v&&v.original&&v.original.state&&v.original.state.undetermined){v.original.state.undetermined=false}}},this)).on("deselect_node.jstree",j.proxy(function(y,w){var x=w.node,z=this.get_node(x,true),v,t,u;if(x&&x.original&&x.original.state&&x.original.state.undetermined){x.original.state.undetermined=false}for(v=0,t=x.children_d.length;v<t;v++){u=this._model.data[x.children_d[v]];u.state.selected=false;if(u&&u.original&&u.original.state&&u.original.state.undetermined){u.original.state.undetermined=false}}for(v=0,t=x.parents.length;v<t;v++){u=this._model.data[x.parents[v]];u.state.selected=false;if(u&&u.original&&u.original.state&&u.original.state.undetermined){u.original.state.undetermined=false}u=this.get_node(x.parents[v],true);if(u&&u.length){u.children(".jstree-anchor").removeClass("jstree-clicked")}}u=[];for(v=0,t=this._data.core.selected.length;v<t;v++){if(j.inArray(this._data.core.selected[v],x.children_d)===-1&&j.inArray(this._data.core.selected[v],x.parents)===-1){u.push(this._data.core.selected[v])}}this._data.core.selected=j.vakata.array_unique(u);if(z.length){z.find(".jstree-anchor").removeClass("jstree-clicked")}},this)).on("delete_node.jstree",j.proxy(function(z,x){var y=this.get_node(x.parent),t=this._model.data,w,u,A,v;while(y&&y.id!=="#"){A=0;for(w=0,u=y.children.length;w<u;w++){A+=t[y.children[w]].state.selected}if(A===u){y.state.selected=true;this._data.core.selected.push(y.id);v=this.get_node(y,true);if(v&&v.length){v.children(".jstree-anchor").addClass("jstree-clicked")}}else{break}y=this.get_node(y.parent)}},this)).on("move_node.jstree",j.proxy(function(C,A){var w=A.is_multi,B=A.old_parent,t=this.get_node(A.parent),v=this._model.data,u,D,z,x,y;if(!w){u=this.get_node(B);while(u&&u.id!=="#"){D=0;for(z=0,x=u.children.length;z<x;z++){D+=v[u.children[z]].state.selected}if(D===x){u.state.selected=true;this._data.core.selected.push(u.id);y=this.get_node(u,true);if(y&&y.length){y.children(".jstree-anchor").addClass("jstree-clicked")}}else{break}u=this.get_node(u.parent)}}u=t;while(u&&u.id!=="#"){D=0;for(z=0,x=u.children.length;z<x;z++){D+=v[u.children[z]].state.selected}if(D===x){if(!u.state.selected){u.state.selected=true;this._data.core.selected.push(u.id);y=this.get_node(u,true);if(y&&y.length){y.children(".jstree-anchor").addClass("jstree-clicked")}}}else{if(u.state.selected){u.state.selected=false;this._data.core.selected=j.vakata.array_remove_item(this._data.core.selected,u.id);y=this.get_node(u,true);if(y&&y.length){y.children(".jstree-anchor").removeClass("jstree-clicked")}}else{break}}u=this.get_node(u.parent)}},this))}};this._undetermined=function(){return;var x,v,u=this._model.data,y=this._data.core.selected,z=[],w=this;for(x=0,v=y.length;x<v;x++){if(u[y[x]]&&u[y[x]].parents){z=z.concat(u[y[x]].parents)}}this.element.find(".jstree-closed").not(":has(ul)").each(function(){var t=w.get_node(this),A;if(!t.state.loaded){if(t.original&&t.original.state&&t.original.state.undetermined&&t.original.state.undetermined===true){z.push(t.id);z=z.concat(t.parents)}}else{for(x=0,v=t.children_d.length;x<v;x++){A=u[t.children_d[x]];if(!A.state.loaded&&A.original&&A.original.state&&A.original.state.undetermined&&A.original.state.undetermined===true){z.push(A.id);z=z.concat(A.parents)}}}});z=j.vakata.array_unique(z);z=j.vakata.array_remove_item(z,"#");this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(x=0,v=z.length;x<v;x++){if(!u[z[x]].state.selected){y=this.get_node(z[x],true);if(y&&y.length){y.children("a").children(".jstree-checkbox").addClass("jstree-undetermined")}}}};this.redraw_node=function(w,t,v){w=s.redraw_node.call(this,w,t,v);if(w){var u=w.getElementsByTagName("A")[0];u.insertBefore(h.cloneNode(false),u.childNodes[0])}if(!v&&this.settings.checkbox.three_state){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout(j.proxy(this._undetermined,this),50)}return w};this.activate_node=function(u,t){if(this.settings.checkbox.whole_node||j(t.target).hasClass("jstree-checkbox")){t.ctrlKey=true}return s.activate_node.call(this,u,t)};this.show_checkboxes=function(){this._data.core.themes.checkboxes=true;this.element.children("ul").removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=false;this.element.children("ul").addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){if(this._data.core.themes.checkboxes){this.hide_checkboxes()}else{this.show_checkboxes()}}};j.jstree.defaults.contextmenu={select_node:true,show_at_node:true,items:function(s,r){return{create:{separator_before:false,separator_after:true,_disabled:false,label:"Create",action:function(u){var t=j.jstree.reference(u.reference),v=t.get_node(u.reference);t.create_node(v,{},"last",function(w){setTimeout(function(){t.edit(w)},0)})}},rename:{separator_before:false,separator_after:false,_disabled:false,label:"Rename",action:function(u){var t=j.jstree.reference(u.reference),v=t.get_node(u.reference);t.edit(v)}},remove:{separator_before:false,icon:false,separator_after:false,_disabled:false,label:"Delete",action:function(u){var t=j.jstree.reference(u.reference),v=t.get_node(u.reference);if(t.is_selected(v)){t.delete_node(t.get_selected())}else{t.delete_node(v)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(u){var t=j.jstree.reference(u.reference),v=t.get_node(u.reference);if(t.is_selected(v)){t.cut(t.get_selected())}else{t.cut(v)}}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(u){var t=j.jstree.reference(u.reference),v=t.get_node(u.reference);if(t.is_selected(v)){t.copy(t.get_selected())}else{t.copy(v)}}},paste:{separator_before:false,icon:false,_disabled:function(t){return !j.jstree.reference(t.reference).can_paste()},separator_after:false,label:"Paste",action:function(u){var t=j.jstree.reference(u.reference),v=t.get_node(u.reference);t.paste(v)}}}}}}};j.jstree.plugins.contextmenu=function(r,s){this.bind=function(){s.bind.call(this);var t=0;this.element.on("contextmenu.jstree",".jstree-anchor",j.proxy(function(u){u.preventDefault();t=u.ctrlKey?u.timeStamp:0;if(!this.is_loading(u.currentTarget)){this.show_contextmenu(u.currentTarget,u.pageX,u.pageY,u)}},this)).on("click.jstree",".jstree-anchor",j.proxy(function(u){if(this._data.contextmenu.visible&&(!t||u.timeStamp-t>250)){j.vakata.context.hide()}},this));j(document).on("context_hide.vakata",j.proxy(function(){this._data.contextmenu.visible=false},this))};this.teardown=function(){if(this._data.contextmenu.visible){j.vakata.context.hide()}s.teardown.call(this)};this.show_contextmenu=function(v,C,A,w){v=this.get_node(v);if(!v||v.id==="#"){return false}var D=this.settings.contextmenu,z=this.get_node(v,true),B=z.children(".jstree-anchor"),t=false,u=false;if(D.show_at_node||C===e||A===e){t=B.offset();C=t.left;A=t.top+this._data.core.li_height}if(this.settings.contextmenu.select_node&&!this.is_selected(v)){this.deselect_all();this.select_node(v,false,false,w)}u=D.items;if(j.isFunction(u)){u=u.call(this,v,j.proxy(function(x){this._show_contextmenu(v,C,A,x)},this))}if(j.isPlainObject(u)){this._show_contextmenu(v,C,A,u)}};this._show_contextmenu=function(w,t,A,v){var z=this.get_node(w,true),u=z.children(".jstree-anchor");j(document).one("context_show.vakata",j.proxy(function(B,y){var x="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";j(y.element).addClass(x)},this));this._data.contextmenu.visible=true;j.vakata.context.show(u,{x:t,y:A},v);this.trigger("show_contextmenu",{node:w,x:t,y:A})}};(function(s){var t=false,r={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};s.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(u){s(document).triggerHandler("context_"+u+".vakata",{reference:r.reference,element:r.element,position:{x:r.position_x,y:r.position_y}})},_execute:function(u){u=r.items[u];return u&&(!u._disabled||(s.isFunction(u._disabled)&&!u._disabled({item:u,reference:r.reference,element:r.element})))&&u.action?u.action.call(null,{item:u,reference:r.reference,element:r.element,position:{x:r.position_x,y:r.position_y}}):false},_parse:function(y,w){if(!y){return false}if(!w){r.html="";r.items=[]}var x="",u=false,v;if(w){x+="<ul>"}s.each(y,function(z,A){if(!A){return true}r.items.push(A);if(!u&&A.separator_before){x+="<li class='vakata-context-separator'><a href='#' "+(s.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"}u=false;x+="<li class='"+(A._class||"")+(A._disabled===true||(s.isFunction(A._disabled)&&A._disabled({item:A,reference:r.reference,element:r.element}))?" vakata-contextmenu-disabled ":"")+"' "+(A.shortcut?" data-shortcut='"+A.shortcut+"' ":"")+">";x+="<a href='#' rel='"+(r.items.length-1)+"'>";if(s.vakata.context.settings.icons){x+="<i ";if(A.icon){if(A.icon.indexOf("/")!==-1||A.icon.indexOf(".")!==-1){x+=" style='background:url(\""+A.icon+"\") center center no-repeat' "}else{x+=" class='"+A.icon+"' "}}x+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"}x+=(s.isFunction(A.label)?A.label({item:z,reference:r.reference,element:r.element}):A.label)+(A.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+A.shortcut+'">'+(A.shortcut_label||"")+"</span>":"")+"</a>";if(A.submenu){v=s.vakata.context._parse(A.submenu,true);if(v){x+=v}}x+="</li>";if(A.separator_after){x+="<li class='vakata-context-separator'><a href='#' "+(s.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>";u=true}});x=x.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(w){x+="</ul>"}if(!w){r.html=x;s.vakata.context._trigger("parse")}return x.length>10?x:false},_show_submenu:function(D){D=s(D);if(!D.length||!D.children("ul").length){return}var C=D.children("ul"),u=D.offset().left+D.outerWidth(),E=D.offset().top,v=C.width(),A=C.height(),z=s(window).width()+s(window).scrollLeft(),B=s(window).height()+s(window).scrollTop();if(t){D[u-(v+10+D.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left")}else{D[u+v+10>z?"addClass":"removeClass"]("vakata-context-right")}if(E+A+10>B){C.css("bottom","-1px")}C.show()},show:function(z,C,A){var v,D,H,G,I,B,u,F,E=true;if(r.element&&r.element.length){r.element.width("")}switch(E){case (!C&&!z):return false;case (!!C&&!!z):r.reference=z;r.position_x=C.x;r.position_y=C.y;break;case (!C&&!!z):r.reference=z;v=z.offset();r.position_x=v.left+z.outerHeight();r.position_y=v.top;break;case (!!C&&!z):r.position_x=C.x;r.position_y=C.y;break}if(!!z&&!A&&s(z).data("vakata_contextmenu")){A=s(z).data("vakata_contextmenu")}if(s.vakata.context._parse(A)){r.element.html(r.html)}if(r.items.length){D=r.element;H=r.position_x;G=r.position_y;I=D.width();B=D.height();u=s(window).width()+s(window).scrollLeft();F=s(window).height()+s(window).scrollTop();if(t){H-=D.outerWidth();if(H<s(window).scrollLeft()+20){H=s(window).scrollLeft()+20}}if(H+I+20>u){H=u-(I+20)}if(G+B+20>F){G=F-(B+20)}r.element.css({left:H,top:G}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover");r.is_visible=true;s.vakata.context._trigger("show")}},hide:function(){if(r.is_visible){r.element.hide().find("ul").hide().end().find(":focus").blur();r.is_visible=false;s.vakata.context._trigger("hide")}}};s(function(){t=s("body").css("direction")==="rtl";var u=false;r.element=s("<ul class='vakata-context'></ul>");r.element.on("mouseenter","li",function(v){v.stopImmediatePropagation();if(s.contains(this,v.relatedTarget)){return}if(u){clearTimeout(u)}r.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();s(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover");s.vakata.context._show_submenu(this)}).on("mouseleave","li",function(v){if(s.contains(this,v.relatedTarget)){return}s(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(v){s(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if(s.vakata.context.settings.hide_onmouseleave){u=setTimeout((function(w){return function(){s.vakata.context.hide()}}(this)),s.vakata.context.settings.hide_onmouseleave)}}).on("click","a",function(v){v.preventDefault()}).on("mouseup","a",function(v){if(!s(this).blur().parent().hasClass("vakata-context-disabled")&&s.vakata.context._execute(s(this).attr("rel"))!==false){s.vakata.context.hide()}}).on("keydown","a",function(v){var w=null;switch(v.which){case 13:case 32:v.type="mouseup";v.preventDefault();s(v.currentTarget).trigger(v);break;case 37:if(r.is_visible){r.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 38:if(r.is_visible){w=r.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!w.length){w=r.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()}w.addClass("vakata-context-hover").children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 39:if(r.is_visible){r.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 40:if(r.is_visible){w=r.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!w.length){w=r.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()}w.addClass("vakata-context-hover").children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 27:s.vakata.context.hide();v.preventDefault();break;default:break}}).on("keydown",function(w){w.preventDefault();var v=r.element.find(".vakata-contextmenu-shortcut-"+w.which).parent();if(v.parent().not(".vakata-context-disabled")){v.mouseup()}}).appendTo("body");s(document).on("mousedown",function(v){if(r.is_visible&&!s.contains(r.element[0],v.target)){s.vakata.context.hide()}}).on("context_show.vakata",function(w,v){r.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(t){r.element.addClass("vakata-context-rtl").css("direction","rtl")}r.element.find("ul").hide().end()})})}(j));j.jstree.defaults.dnd={copy:true,open_timeout:500,is_draggable:true,check_while_dragging:true,always_copy:false};j.jstree.plugins.dnd=function(r,s){this.bind=function(){s.bind.call(this);this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",j.proxy(function(v){var u=this.get_node(v.target),t=this.is_selected(u)?this.get_selected().length:1;if(u&&u.id&&u.id!=="#"&&(v.which===1||v.type==="touchstart")&&(this.settings.dnd.is_draggable===true||(j.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,(t>1?this.get_selected(true):[u]))))){this.element.trigger("mousedown.jstree");return j.vakata.dnd.start(v,{jstree:true,origin:this,obj:this.get_node(u,true),nodes:t>1?this.get_selected():[u.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+'"><i class="jstree-icon jstree-er"></i>'+(t>1?t+" "+this.get_string("nodes"):this.get_text(v.currentTarget,true))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}},this))}};j(function(){var u=false,t=false,s=false,r=j('<div id="jstree-marker">&#160;</div>').hide().appendTo("body");j(document).bind("dnd_start.vakata",function(w,v){u=false}).bind("dnd_move.vakata",function(K,M){if(s){clearTimeout(s)}if(!M.data.jstree){return}if(M.event.target.id&&M.event.target.id==="jstree-marker"){return}var v=j.jstree.reference(M.event.target),x=false,L=false,w=false,H,C,J,D,I,E,B,A,z,y,F,G;if(v&&v._data&&v._data.dnd){r.attr("class","jstree-"+v.get_theme());M.helper.children().attr("class","jstree-"+v.get_theme()).find(".jstree-copy:eq(0)")[M.data.origin&&(M.data.origin.settings.dnd.always_copy||(M.data.origin.settings.dnd.copy&&(M.event.metaKey||M.event.ctrlKey)))?"show":"hide"]();if((M.event.target===v.element[0]||M.event.target===v.get_container_ul()[0])&&v.get_container_ul().children().length===0){B=true;for(A=0,z=M.data.nodes.length;A<z;A++){B=B&&v.check((M.data.origin&&(M.data.origin.settings.dnd.always_copy||(M.data.origin.settings.dnd.copy&&(M.event.metaKey||M.event.ctrlKey)))?"copy_node":"move_node"),(M.data.origin&&M.data.origin!==v?M.data.origin.get_node(M.data.nodes[A]):M.data.nodes[A]),"#","last",{dnd:true,ref:v.get_node("#"),pos:"i",is_multi:(M.data.origin&&M.data.origin!==v),is_foreign:(!M.data.origin)});if(!B){break}}if(B){u={ins:v,par:"#",pos:"last"};r.hide();M.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok");return}}else{x=j(M.event.target).closest("a");if(x&&x.length&&x.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")){L=x.offset();w=M.event.pageY-L.top;J=x.height();if(w<J/3){E=["b","i","a"]}else{if(w>J-J/3){E=["a","i","b"]}else{E=w>J/2?["i","a","b"]:["i","b","a"]}}j.each(E,function(O,N){switch(N){case"b":H=L.left-6;C=L.top-5;D=v.get_parent(x);I=x.parent().index();break;case"i":H=L.left-2;C=L.top-5+J/2+1;D=v.get_node(x.parent()).id;I=0;break;case"a":H=L.left-6;C=L.top-5+J;D=v.get_parent(x);I=x.parent().index()+1;break}B=true;for(A=0,z=M.data.nodes.length;A<z;A++){y=M.data.origin&&(M.data.origin.settings.dnd.always_copy||(M.data.origin.settings.dnd.copy&&(M.event.metaKey||M.event.ctrlKey)))?"copy_node":"move_node";F=I;if(y==="move_node"&&N==="a"&&(M.data.origin&&M.data.origin===v)&&D===v.get_parent(M.data.nodes[A])){G=v.get_node(D);if(F>j.inArray(M.data.nodes[A],G.children)){F-=1}}B=B&&((v&&v.settings&&v.settings.dnd&&v.settings.dnd.check_while_dragging===false)||v.check(y,(M.data.origin&&M.data.origin!==v?M.data.origin.get_node(M.data.nodes[A]):M.data.nodes[A]),D,F,{dnd:true,ref:v.get_node(x.parent()),pos:N,is_multi:(M.data.origin&&M.data.origin!==v),is_foreign:(!M.data.origin)}));if(!B){if(v&&v.last_error){t=v.last_error()}break}}if(B){if(N==="i"&&x.parent().is(".jstree-closed")&&v.settings.dnd.open_timeout){s=setTimeout((function(P,Q){return function(){P.open_node(Q)}}(v,x)),v.settings.dnd.open_timeout)}u={ins:v,par:D,pos:I};r.css({left:H+"px",top:C+"px"}).show();M.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok");t={};E=true;return false}});if(E===true){return}}}}u=false;M.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");r.hide()}).bind("dnd_scroll.vakata",function(w,v){if(!v.data.jstree){return}r.hide();u=false;v.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er")}).bind("dnd_stop.vakata",function(z,y){if(s){clearTimeout(s)}if(!y.data.jstree){return}r.hide();var x,w,v=[];if(u){for(x=0,w=y.data.nodes.length;x<w;x++){v[x]=y.data.origin?y.data.origin.get_node(y.data.nodes[x]):y.data.nodes[x];if(y.data.origin){v[x].instance=y.data.origin}}u.ins[y.data.origin&&(y.data.origin.settings.dnd.always_copy||(y.data.origin.settings.dnd.copy&&(y.event.metaKey||y.event.ctrlKey)))?"copy_node":"move_node"](v,u.par,u.pos)}else{x=j(y.event.target).closest(".jstree");if(x.length&&t&&t.error&&t.error==="check"){x=x.jstree(true);if(x){x.settings.core.error.call(this,t)}}}}).bind("keyup keydown",function(w,v){v=j.vakata.dnd._get();if(v.data&&v.data.jstree){v.helper.find(".jstree-copy:eq(0)")[v.data.origin&&(v.data.origin.settings.dnd.always_copy||(v.data.origin.settings.dnd.copy&&(w.metaKey||w.ctrlKey)))?"show":"hide"]()}})});(function(s){var r={element:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false};s.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5},_trigger:function(v,u){var t=s.vakata.dnd._get();t.event=u;s(document).triggerHandler("dnd_"+v+".vakata",t)},_get:function(){return{data:r.data,element:r.element,helper:r.helper}},_clean:function(){if(r.helper){r.helper.remove()}if(r.scroll_i){clearInterval(r.scroll_i);r.scroll_i=false}r={element:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false};s(document).off("mousemove touchmove",s.vakata.dnd.drag);s(document).off("mouseup touchend",s.vakata.dnd.stop)},_scroll:function(v){if(!r.scroll_e||(!r.scroll_l&&!r.scroll_t)){if(r.scroll_i){clearInterval(r.scroll_i);r.scroll_i=false}return false}if(!r.scroll_i){r.scroll_i=setInterval(s.vakata.dnd._scroll,100);return false}if(v===true){return false}var u=r.scroll_e.scrollTop(),t=r.scroll_e.scrollLeft();r.scroll_e.scrollTop(u+r.scroll_t*s.vakata.dnd.settings.scroll_speed);r.scroll_e.scrollLeft(t+r.scroll_l*s.vakata.dnd.settings.scroll_speed);if(u!==r.scroll_e.scrollTop()||t!==r.scroll_e.scrollLeft()){s.vakata.dnd._trigger("scroll",r.scroll_e)}},start:function(v,u,t){if(v.type==="touchstart"&&v.originalEvent&&v.originalEvent.changedTouches&&v.originalEvent.changedTouches[0]){v.pageX=v.originalEvent.changedTouches[0].pageX;v.pageY=v.originalEvent.changedTouches[0].pageY;v.target=document.elementFromPoint(v.originalEvent.changedTouches[0].pageX-window.pageXOffset,v.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(r.is_drag){s.vakata.dnd.stop({})}try{v.currentTarget.unselectable="on";v.currentTarget.onselectstart=function(){return false};if(v.currentTarget.style){v.currentTarget.style.MozUserSelect="none"}}catch(w){}r.init_x=v.pageX;r.init_y=v.pageY;r.data=u;r.is_down=true;r.element=v.currentTarget;if(t!==false){r.helper=s("<div id='vakata-dnd'></div>").html(t).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})}s(document).bind("mousemove touchmove",s.vakata.dnd.drag);s(document).bind("mouseup touchend",s.vakata.dnd.stop);return false},drag:function(A){if(A.type==="touchmove"&&A.originalEvent&&A.originalEvent.changedTouches&&A.originalEvent.changedTouches[0]){A.pageX=A.originalEvent.changedTouches[0].pageX;A.pageY=A.originalEvent.changedTouches[0].pageY;A.target=document.elementFromPoint(A.originalEvent.changedTouches[0].pageX-window.pageXOffset,A.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(!r.is_down){return}if(!r.is_drag){if(Math.abs(A.pageX-r.init_x)>s.vakata.dnd.settings.threshold||Math.abs(A.pageY-r.init_y)>s.vakata.dnd.settings.threshold){if(r.helper){r.helper.appendTo("body");r.helper_w=r.helper.outerWidth()}r.is_drag=true;s.vakata.dnd._trigger("start",A)}else{return}}var B=false,E=false,C=false,u=false,t=false,y=false,x=false,z=false,D=false,v=false;r.scroll_t=0;r.scroll_l=0;r.scroll_e=false;s(s(A.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return(/^auto|scroll$/).test(s(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var w=s(this),F=w.offset();if(this.scrollHeight>this.offsetHeight){if(F.top+w.height()-A.pageY<s.vakata.dnd.settings.scroll_proximity){r.scroll_t=1}if(A.pageY-F.top<s.vakata.dnd.settings.scroll_proximity){r.scroll_t=-1}}if(this.scrollWidth>this.offsetWidth){if(F.left+w.width()-A.pageX<s.vakata.dnd.settings.scroll_proximity){r.scroll_l=1}if(A.pageX-F.left<s.vakata.dnd.settings.scroll_proximity){r.scroll_l=-1}}if(r.scroll_t||r.scroll_l){r.scroll_e=s(this);return false}});if(!r.scroll_e){B=s(document);E=s(window);C=B.height();u=E.height();t=B.width();y=E.width();x=B.scrollTop();z=B.scrollLeft();if(C>u&&A.pageY-x<s.vakata.dnd.settings.scroll_proximity){r.scroll_t=-1}if(C>u&&u-(A.pageY-x)<s.vakata.dnd.settings.scroll_proximity){r.scroll_t=1}if(t>y&&A.pageX-z<s.vakata.dnd.settings.scroll_proximity){r.scroll_l=-1}if(t>y&&y-(A.pageX-z)<s.vakata.dnd.settings.scroll_proximity){r.scroll_l=1}if(r.scroll_t||r.scroll_l){r.scroll_e=B}}if(r.scroll_e){s.vakata.dnd._scroll(true)}if(r.helper){D=parseInt(A.pageY+s.vakata.dnd.settings.helper_top,10);v=parseInt(A.pageX+s.vakata.dnd.settings.helper_left,10);if(C&&D+25>C){D=C-50}if(t&&v+r.helper_w>t){v=t-(r.helper_w+2)}r.helper.css({left:v+"px",top:D+"px"})}s.vakata.dnd._trigger("move",A)},stop:function(t){if(t.type==="touchend"&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]){t.pageX=t.originalEvent.changedTouches[0].pageX;t.pageY=t.originalEvent.changedTouches[0].pageY;t.target=document.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(r.is_drag){s.vakata.dnd._trigger("stop",t)}s.vakata.dnd._clean()}}}(jQuery));j.jstree.defaults.search={ajax:false,fuzzy:true,case_sensitive:false,show_only_matches:false,close_opened_onclear:true,search_leaves_only:false};j.jstree.plugins.search=function(r,s){this.bind=function(){s.bind.call(this);this._data.search.str="";this._data.search.dom=j();this._data.search.res=[];this._data.search.opn=[];this.element.on("before_open.jstree",j.proxy(function(z,y){var u,t,x,w=this._data.search.res,v=[],A=j();if(w&&w.length){this._data.search.dom=j();for(u=0,t=w.length;u<t;u++){v=v.concat(this.get_node(w[u]).parents);x=this.get_node(w[u],true);if(x){this._data.search.dom=this._data.search.dom.add(x)}}v=j.vakata.array_unique(v);for(u=0,t=v.length;u<t;u++){if(v[u]==="#"){continue}x=this.get_node(v[u],true);if(x){A=A.add(x)}}this._data.search.dom.children(".jstree-anchor").addClass("jstree-search");if(this.settings.search.show_only_matches&&this._data.search.res.length){this.element.find("li").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");A=A.add(this._data.search.dom);A.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){j(this).children("li:visible").eq(-1).addClass("jstree-last")})}}},this));if(this.settings.search.show_only_matches){this.element.on("search.jstree",function(u,t){if(t.nodes.length){j(this).find("li").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");t.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){j(this).children("li:visible").eq(-1).addClass("jstree-last")})}}).on("clear_search.jstree",function(u,t){if(t.nodes.length){j(this).find("li").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")}})}};this.search=function(y,A){if(y===false||j.trim(y)===""){return this.clear_search()}var B=this.settings.search,z=B.ajax?B.ajax:false,x=null,t=[],u=[],w,v;if(this._data.search.res.length){this.clear_search()}if(!A&&z!==false){if(j.isFunction(z)){return z.call(this,y,j.proxy(function(C){if(C&&C.d){C=C.d}this._load_nodes(!j.isArray(C)?[]:C,function(){this.search(y,true)})},this))}else{z=j.extend({},z);if(!z.data){z.data={}}z.data.str=y;return j.ajax(z).fail(j.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(z)};this.settings.core.error.call(this,this._data.core.last_error)},this)).done(j.proxy(function(C){if(C&&C.d){C=C.d}this._load_nodes(!j.isArray(C)?[]:C,function(){this.search(y,true)})},this))}}this._data.search.str=y;this._data.search.dom=j();this._data.search.res=[];this._data.search.opn=[];x=new j.vakata.search(y,true,{caseSensitive:B.case_sensitive,fuzzy:B.fuzzy});j.each(this._model.data,function(D,C){if(C.text&&x.search(C.text).isMatch&&(!B.search_leaves_only||(C.state.loaded&&C.children.length===0))){t.push(D);u=u.concat(C.parents)}});if(t.length){u=j.vakata.array_unique(u);this._search_open(u);for(w=0,v=t.length;w<v;w++){x=this.get_node(t[w],true);if(x){this._data.search.dom=this._data.search.dom.add(x)}}this._data.search.res=t;this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:y,res:this._data.search.res})};this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");if(this.settings.search.close_opened_onclear){this.close_node(this._data.search.opn,0)}this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=j()};this._search_open=function(v){var u=this;j.each(v.concat([]),function(w,t){if(t==="#"){return true}try{t=j("#"+t.replace(j.jstree.idregex,"\\$&"),u.element)}catch(x){}if(t&&t.length){if(u.is_closed(t)){u._data.search.opn.push(t[0].id);u.open_node(t,function(){u._search_open(v)},0)}}})}};(function(r){r.vakata.search=function(x,v,C){C=C||{};if(C.fuzzy!==false){C.fuzzy=true}x=C.caseSensitive?x:x.toLowerCase();var z=C.location||0,A=C.distance||100,y=C.threshold||0.6,s=x.length,t,u,w,B;if(s>32){C.fuzzy=false}if(C.fuzzy){t=1<<(s-1);u=(function(){var D={},E=0;for(E=0;E<s;E++){D[x.charAt(E)]=0}for(E=0;E<s;E++){D[x.charAt(E)]|=1<<(s-E-1)}return D}());w=function(G,D){var F=G/s,E=Math.abs(z-D);if(!A){return E?1:F}return F+(E/A)}}B=function(Q){Q=C.caseSensitive?Q:Q.toLowerCase();if(x===Q||Q.indexOf(x)!==-1){return{isMatch:true,score:0}}if(!C.fuzzy){return{isMatch:false,score:1}}var L,K,P=Q.length,H=y,J=Q.indexOf(x,z),N,G,E=s+P,D,F,O,S,R,I=1,M=[];if(J!==-1){H=Math.min(w(0,J),H);J=Q.lastIndexOf(x,z+s);if(J!==-1){H=Math.min(w(0,J),H)}}J=-1;for(L=0;L<s;L++){N=0;G=E;while(N<G){if(w(L,z+G)<=H){N=G}else{E=G}G=Math.floor((E-N)/2+N)}E=G;F=Math.max(1,z-G+1);O=Math.min(z+G,P)+s;S=new Array(O+2);S[O+1]=(1<<L)-1;for(K=O;K>=F;K--){R=u[Q.charAt(K-1)];if(L===0){S[K]=((S[K+1]<<1)|1)&R}else{S[K]=((S[K+1]<<1)|1)&R|(((D[K+1]|D[K])<<1)|1)|D[K+1]}if(S[K]&t){I=w(L,K-1);if(I<=H){H=I;J=K-1;M.push(J);if(J>z){F=Math.max(1,2*z-J)}else{break}}}}if(w(L+1,z)>H){break}D=S}return{isMatch:J>=0,score:I}};return v===true?{search:B}:B(v)}}(jQuery));j.jstree.defaults.sort=function(s,r){return this.get_text(s)>this.get_text(r)?1:-1};j.jstree.plugins.sort=function(r,s){this.bind=function(){s.bind.call(this);this.element.on("model.jstree",j.proxy(function(u,t){this.sort(t.parent,true)},this)).on("rename_node.jstree create_node.jstree",j.proxy(function(u,t){this.sort(t.parent||t.node.parent,false);this.redraw_node(t.parent||t.node.parent,true)},this)).on("move_node.jstree copy_node.jstree",j.proxy(function(u,t){this.sort(t.parent,false);this.redraw_node(t.parent,true)},this))};this.sort=function(w,t){var v,u;w=this.get_node(w);if(w&&w.children&&w.children.length){w.children.sort(j.proxy(this.settings.sort,this));if(t){for(v=0,u=w.children_d.length;v<u;v++){this.sort(w.children_d[v],false)}}}}};var p=false;j.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:false,filter:false};j.jstree.plugins.state=function(r,s){this.bind=function(){s.bind.call(this);var t=j.proxy(function(){this.element.on(this.settings.state.events,j.proxy(function(){if(p){clearTimeout(p)}p=setTimeout(j.proxy(function(){this.save_state()},this),100)},this))},this);this.element.on("ready.jstree",j.proxy(function(v,u){this.element.one("restore_state.jstree",t);if(!this.restore_state()){t()}},this))};this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+(new Date())};j.vakata.storage.set(this.settings.state.key,JSON.stringify(t))};this.restore_state=function(){var t=j.vakata.storage.get(this.settings.state.key);if(!!t){try{t=JSON.parse(t)}catch(u){return false}}if(!!t&&t.ttl&&t.sec&&+(new Date())-t.sec>t.ttl){return false}if(!!t&&t.state){t=t.state}if(!!t&&j.isFunction(this.settings.state.filter)){t=this.settings.state.filter.call(this,t)}if(!!t){this.element.one("set_state.jstree",function(w,v){v.instance.trigger("restore_state",{state:j.extend(true,{},t)})});this.set_state(t);return true}return false};this.clear_state=function(){return j.vakata.storage.del(this.settings.state.key)}};(function(r,s){r.vakata.storage={set:function(t,u){return window.localStorage.setItem(t,u)},get:function(t){return window.localStorage.getItem(t)},del:function(t){return window.localStorage.removeItem(t)}}}(jQuery));j.jstree.defaults.types={"#":{},"default":{}};j.jstree.plugins.types=function(r,s){this.init=function(w,u){var v,t;if(u&&u.types&&u.types["default"]){for(v in u.types){if(v!=="default"&&v!=="#"&&u.types.hasOwnProperty(v)){for(t in u.types["default"]){if(u.types["default"].hasOwnProperty(t)&&u.types[v][t]===e){u.types[v][t]=u.types["default"][t]}}}}}s.init.call(this,w,u);this._model.data["#"].type="#"};this.refresh=function(t){s.refresh.call(this,t);this._model.data["#"].type="#"};this.bind=function(){this.element.on("model.jstree",j.proxy(function(z,y){var u=this._model.data,B=y.nodes,x=this.settings.types,w,v,A="default";for(w=0,v=B.length;w<v;w++){A="default";if(u[B[w]].original&&u[B[w]].original.type&&x[u[B[w]].original.type]){A=u[B[w]].original.type}if(u[B[w]].data&&u[B[w]].data.jstree&&u[B[w]].data.jstree.type&&x[u[B[w]].data.jstree.type]){A=u[B[w]].data.jstree.type}u[B[w]].type=A;if(u[B[w]].icon===true&&x[A].icon!==e){u[B[w]].icon=x[A].icon}}},this));s.bind.call(this)};this.get_json=function(z,v,A){var y,u,t=this._model.data,x=v?j.extend(true,{},v,{no_id:false}):{},w=s.get_json.call(this,z,x,A);if(w===false){return false}if(j.isArray(w)){for(y=0,u=w.length;y<u;y++){w[y].type=w[y].id&&t[w[y].id]&&t[w[y].id].type?t[w[y].id].type:"default";if(v&&v.no_id){delete w[y].id;if(w[y].li_attr&&w[y].li_attr.id){delete w[y].li_attr.id}}}}else{w.type=w.id&&t[w.id]&&t[w.id].type?t[w.id].type:"default";if(v&&v.no_id){w=this._delete_ids(w)}}return w};this._delete_ids=function(v){if(j.isArray(v)){for(var u=0,t=v.length;u<t;u++){v[u]=this._delete_ids(v[u])}return v}delete v.id;if(v.li_attr&&v.li_attr.id){delete v.li_attr.id}if(v.children&&j.isArray(v.children)){v.children=this._delete_ids(v.children)}return v};this.check=function(B,w,z,C,A){if(s.check.call(this,B,w,z,C,A)===false){return false}w=w&&w.id?w:this.get_node(w);z=z&&z.id?z:this.get_node(z);var t=w&&w.id?j.jstree.reference(w.id):null,x,y,v,u;t=t&&t._model&&t._model.data?t._model.data:null;switch(B){case"create_node":case"move_node":case"copy_node":if(B!=="move_node"||j.inArray(w.id,z.children)===-1){x=this.get_rules(z);if(x.max_children!==e&&x.max_children!==-1&&x.max_children===z.children.length){this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+B,data:JSON.stringify({chk:B,pos:C,obj:w&&w.id?w.id:false,par:z&&z.id?z.id:false})};return false}if(x.valid_children!==e&&x.valid_children!==-1&&j.inArray(w.type,x.valid_children)===-1){this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+B,data:JSON.stringify({chk:B,pos:C,obj:w&&w.id?w.id:false,par:z&&z.id?z.id:false})};return false}if(t&&w.children_d&&w.parents){y=0;for(v=0,u=w.children_d.length;v<u;v++){y=Math.max(y,t[w.children_d[v]].parents.length)}y=y-w.parents.length+1}if(y<=0||y===e){y=1}do{if(x.max_depth!==e&&x.max_depth!==-1&&x.max_depth<y){this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+B,data:JSON.stringify({chk:B,pos:C,obj:w&&w.id?w.id:false,par:z&&z.id?z.id:false})};return false}z=this.get_node(z.parent);x=this.get_rules(z);y++}while(z)}break}return true};this.get_rules=function(u){u=this.get_node(u);if(!u){return false}var t=this.get_type(u,true);if(t.max_depth===e){t.max_depth=-1}if(t.max_children===e){t.max_children=-1}if(t.valid_children===e){t.valid_children=-1}return t};this.get_type=function(t,u){t=this.get_node(t);return(!t)?false:(u?j.extend({type:t.type},this.settings.types[t.type]):t.type)};this.set_type=function(A,y){var w,z,x,v,u;if(j.isArray(A)){A=A.slice();for(z=0,x=A.length;z<x;z++){this.set_type(A[z],y)}return true}w=this.settings.types;A=this.get_node(A);if(!w[y]||!A){return false}v=A.type;u=this.get_icon(A);A.type=y;if(u===true||(w[v]&&w[v].icon&&u===w[v].icon)){this.set_icon(A,w[y].icon!==e?w[y].icon:true)}return true}};j.jstree.plugins.unique=function(r,s){this.check=function(B,x,y,C,z){if(s.check.call(this,B,x,y,C,z)===false){return false}x=x&&x.id?x:this.get_node(x);y=y&&y.id?y:this.get_node(y);if(!y||!y.children){return true}var t=B==="rename_node"?C:x.text,A=[],u=this._model.data,w,v;for(w=0,v=y.children.length;w<v;w++){A.push(u[y.children[w]].text)}switch(B){case"delete_node":return true;case"rename_node":case"copy_node":w=(j.inArray(t,A)===-1);if(!w){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+t+" already exists. Preventing: "+B,data:JSON.stringify({chk:B,pos:C,obj:x&&x.id?x.id:false,par:y&&y.id?y.id:false})}}return w;case"move_node":w=(x.parent===y.id||j.inArray(t,A)===-1);if(!w){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+t+" already exists. Preventing: "+B,data:JSON.stringify({chk:B,pos:C,obj:x&&x.id?x.id:false,par:y&&y.id?y.id:false})}}return w}return true}};var b=document.createElement("DIV");b.setAttribute("unselectable","on");b.className="jstree-wholerow";b.innerHTML="&#160;";j.jstree.plugins.wholerow=function(r,s){this.bind=function(){s.bind.call(this);this.element.on("loading",j.proxy(function(){b.style.height=this._data.core.li_height+"px"},this)).on("ready.jstree set_state.jstree",j.proxy(function(){this.hide_dots()},this)).on("ready.jstree",j.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",j.proxy(function(u,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",j.proxy(function(x,w){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var v=false,u,t;for(u=0,t=w.selected.length;u<t;u++){v=this.get_node(w.selected[u],true);if(v&&v.length){v.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}}},this)).on("open_node.jstree",j.proxy(function(u,t){this.get_node(t.node,true).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",j.proxy(function(u,t){this.get_node(t.node,true).children(".jstree-wholerow")[u.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",j.proxy(function(u){u.preventDefault();var t=j.Event("contextmenu",{metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey,shiftKey:u.shiftKey,pageX:u.pageX,pageY:u.pageY});j(u.currentTarget).closest("li").children("a:eq(0)").trigger(t)},this)).on("click.jstree",".jstree-wholerow",function(u){u.stopImmediatePropagation();var t=j.Event("click",{metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey,shiftKey:u.shiftKey});j(u.currentTarget).closest("li").children("a:eq(0)").trigger(t).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",j.proxy(function(u){u.stopImmediatePropagation();var t=j.Event("click",{metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey,shiftKey:u.shiftKey});j(u.currentTarget).closest("li").children("a:eq(0)").trigger(t).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",j.proxy(function(t){t.stopImmediatePropagation();this.hover_node(t.currentTarget);return false},this)).on("mouseleave.jstree",".jstree-node",j.proxy(function(t){this.dehover_node(t.currentTarget)},this))};this.teardown=function(){if(this.settings.wholerow){this.element.find(".jstree-wholerow").remove()}s.teardown.call(this)};this.redraw_node=function(v,t,w){v=s.redraw_node.call(this,v,t,w);if(v){var u=b.cloneNode(true);if(j.inArray(v.id,this._data.core.selected)!==-1){u.className+=" jstree-wholerow-clicked"}v.insertBefore(u,v.childNodes[0])}return v}}}));
/*!
 * Globalize
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(l,g){var t,y,n,z,r,x,w,v,o,a,m,A,s,c,p,u,B,q,j,h,d,f,e,b;t=function(C){return new t.prototype.init(C)};if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){module.exports=t}else{l.Globalize=t}t.cultures={};t.prototype={constructor:t,init:function(C){this.cultures=t.cultures;this.cultureSelector=C;return this}};t.prototype.init.prototype=t.prototype;t.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-","NaN":"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"}}},messages:{}};t.cultures["default"].calendar=t.cultures["default"].calendars.standard;t.cultures.en=t.cultures["default"];t.cultureSelector="en";y=/^0x[a-f0-9]+$/i;n=/^[+\-]?infinity$/i;z=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;r=/^\s+|\s+$/g;x=function(F,E){if(F.indexOf){return F.indexOf(E)}for(var C=0,D=F.length;C<D;C++){if(F[C]===E){return C}}return -1};w=function(D,C){return D.substr(D.length-C.length)===C};v=function(){var L,E,C,D,I,J,H=arguments[0]||{},G=1,F=arguments.length,K=false;if(typeof H==="boolean"){K=H;H=arguments[1]||{};G=2}if(typeof H!=="object"&&!a(H)){H={}}for(;G<F;G++){if((L=arguments[G])!=null){for(E in L){C=H[E];D=L[E];if(H===D){continue}if(K&&D&&(m(D)||(I=o(D)))){if(I){I=false;J=C&&o(C)?C:[]}else{J=C&&m(C)?C:{}}H[E]=v(K,J,D)}else{if(D!==g){H[E]=D}}}}}return H};o=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"};a=function(C){return Object.prototype.toString.call(C)==="[object Function]"};m=function(C){return Object.prototype.toString.call(C)==="[object Object]"};A=function(D,C){return D.indexOf(C)===0};s=function(C){return(C+"").replace(r,"")};c=function(C){if(isNaN(C)){return NaN}return Math[C<0?"ceil":"floor"](C)};p=function(F,D,E){var C;for(C=F.length;C<D;C+=1){F=(E?("0"+F):(F+"0"))}return F};u=function(F,C){var E=0,H=false;for(var G=0,D=F.length;G<D;G++){var I=F.charAt(G);switch(I){case"'":if(H){C.push("'")}else{E++}H=false;break;case"\\":if(H){C.push("\\")}H=!H;break;default:C.push(I);H=false;break}}return E};B=function(G,F){F=F||"F";var E,D=G.patterns,C=F.length;if(C===1){E=D[F];if(!E){throw"Invalid date format string '"+F+"'."}F=E}else{if(C===2&&F.charAt(0)==="%"){F=F.charAt(1)}}return F};q=function(W,aa,ab){var O=ab.calendar,K=O.convert,ad;if(!aa||!aa.length||aa==="i"){if(ab&&ab.name.length){if(K){ad=q(W,O.patterns.F,ab)}else{var L=new Date(W.getTime()),S=d(W,O.eras);L.setFullYear(f(W,O,S));ad=L.toLocaleString()}}else{ad=W.toString()}return ad}var X=O.eras,D=aa==="s";aa=B(O,aa);ad=[];var H,Y=["0","00","000"],M,N,C=/([^d]|^)(d|dd)([^d]|$)/g,ac=0,T=h(),E;function J(ae,ah){var ag,af=ae+"";if(ah>1&&af.length<ah){ag=(Y[ah-2]+af);return ag.substr(ag.length-ah,ah)}else{ag=af}return ag}function Z(){if(M||N){return M}M=C.test(aa);N=true;return M}function F(af,ae){if(E){return E[ae]}switch(ae){case 0:return af.getFullYear();case 1:return af.getMonth();case 2:return af.getDate();default:throw"Invalid part value "+ae}}if(!D&&K){E=K.fromGregorian(W)}for(;;){var I=T.lastIndex,R=T.exec(aa);var P=aa.slice(I,R?R.index:aa.length);ac+=u(P,ad);if(!R){break}if(ac%2){ad.push(R[0]);continue}var U=R[0],G=U.length;switch(U){case"ddd":case"dddd":var Q=(G===3)?O.days.namesAbbr:O.days.names;ad.push(Q[W.getDay()]);break;case"d":case"dd":M=true;ad.push(J(F(W,2),G));break;case"MMM":case"MMMM":var V=F(W,1);ad.push((O.monthsGenitive&&Z())?(O.monthsGenitive[G===3?"namesAbbr":"names"][V]):(O.months[G===3?"namesAbbr":"names"][V]));break;case"M":case"MM":ad.push(J(F(W,1)+1,G));break;case"y":case"yy":case"yyyy":V=E?E[0]:f(W,O,d(W,X),D);if(G<4){V=V%100}ad.push(J(V,G));break;case"h":case"hh":H=W.getHours()%12;if(H===0){H=12}ad.push(J(H,G));break;case"H":case"HH":ad.push(J(W.getHours(),G));break;case"m":case"mm":ad.push(J(W.getMinutes(),G));break;case"s":case"ss":ad.push(J(W.getSeconds(),G));break;case"t":case"tt":V=W.getHours()<12?(O.AM?O.AM[0]:" "):(O.PM?O.PM[0]:" ");ad.push(G===1?V.charAt(0):V);break;case"f":case"ff":case"fff":ad.push(J(W.getMilliseconds(),3).substr(0,G));break;case"z":case"zz":H=W.getTimezoneOffset()/60;ad.push((H<=0?"+":"-")+J(Math.floor(Math.abs(H)),G));break;case"zzz":H=W.getTimezoneOffset()/60;ad.push((H<=0?"+":"-")+J(Math.floor(Math.abs(H)),2)+":"+J(Math.abs(W.getTimezoneOffset()%60),2));break;case"g":case"gg":if(O.eras){ad.push(O.eras[d(W,X)].name)}break;case"/":ad.push(O["/"]);break;default:throw"Invalid date format pattern '"+U+"'."}}return ad.join("")};(function(){var C;C=function(J,K,R){var H=R.groupSizes,D=H[0],E=1,O=Math.pow(10,K),F=Math.round(J*O)/O;if(!isFinite(F)){F=J}J=F;var I=J+"",Q="",N=I.split(/e/i),P=N.length>1?parseInt(N[1],10):0;I=N[0];N=I.split(".");I=N[0];Q=N.length>1?N[1]:"";var G;if(P>0){Q=p(Q,P,false);I+=Q.slice(0,P);Q=Q.substr(P)}else{if(P<0){P=-P;I=p(I,P+1,true);Q=I.slice(-P,I.length)+Q;I=I.slice(0,-P)}}if(K>0){Q=R["."]+((Q.length>K)?Q.slice(0,K):p(Q,K))}else{Q=""}var M=I.length-1,S=R[","],L="";while(M>=0){if(D===0||D>M){return I.slice(0,M+1)+(L.length?(S+L+Q):Q)}L=I.slice(M-D+1,M+1)+(L.length?(S+L):"");M-=D;if(E<H.length){D=H[E];E++}}return I.slice(0,M+1)+S+L+Q};j=function(O,N,H){if(!isFinite(O)){if(O===Infinity){return H.numberFormat.positiveInfinity}if(O===-Infinity){return H.numberFormat.negativeInfinity}return H.numberFormat.NaN}if(!N||N==="i"){return H.name.length?O.toLocaleString():O.toString()}N=N||"D";var F=H.numberFormat,G=Math.abs(O),I=-1,M;if(N.length>1){I=parseInt(N.slice(1),10)}var L=N.charAt(0).toUpperCase(),P;switch(L){case"D":M="n";G=c(G);if(I!==-1){G=p(""+G,I,true)}if(O<0){G="-"+G}break;case"N":P=F;case"C":P=P||F.currency;case"P":P=P||F.percent;M=O<0?P.pattern[0]:(P.pattern[1]||"n");if(I===-1){I=P.decimals}G=C(G*(L==="P"?100:1),I,P);break;default:throw"Bad number format specifier: "+L}var D=/n|\$|-|%/g,K="";for(;;){var J=D.lastIndex,E=D.exec(M);K+=M.slice(J,E?E.index:M.length);if(!E){break}switch(E[0]){case"n":K+=G;break;case"$":K+=F.currency.symbol;break;case"-":if(/[1-9]/.test(G)){K+=F["-"]}break;case"%":K+=F.percent.symbol;break}}return K}}());h=function(){return(/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g)};d=function(E,D){if(!D){return 0}var H,G=E.getTime();for(var F=0,C=D.length;F<C;F++){H=D[F].start;if(H===null||G>=H){return F}}return 0};f=function(D,F,C,G){var E=D.getFullYear();if(!G&&F.eras){E-=F.eras[C].offset}return E};(function(){var D,C,F,E,I,H,G;D=function(O,M){if(M<100){var K=new Date(),J=d(K),N=f(K,O,J),L=O.twoDigitYearMax;L=typeof L==="string"?new Date().getFullYear()%100+parseInt(L,10):L;M+=N-(N%100);if(M>L){M-=100}}return M};C=function(N,M,K){var J,O=N.days,L=N._upperDays;if(!L){N._upperDays=L=[G(O.names),G(O.namesAbbr),G(O.namesShort)]}M=H(M);if(K){J=x(L[1],M);if(J===-1){J=x(L[2],M)}}else{J=x(L[0],M)}return J};F=function(Q,P,L){var J=Q.months,K=Q.monthsGenitive||Q.months,N=Q._upperMonths,O=Q._upperMonthsGen;if(!N){Q._upperMonths=N=[G(J.names),G(J.namesAbbr)];Q._upperMonthsGen=O=[G(K.names),G(K.namesAbbr)]}P=H(P);var M=x(L?N[1]:N[0],P);if(M<0){M=x(L?O[1]:O[0],P)}return M};E=function(J,U){var W=J._parseRegExp;if(!W){J._parseRegExp=W={}}else{var N=W[U];if(N){return N}}var T=B(J,U).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),R=["^"],K=[],Q=0,M=0,Z=h(),O;while((O=Z.exec(T))!==null){var Y=T.slice(Q,O.index);Q=Z.lastIndex;M+=u(Y,R);if(M%2){R.push(O[0]);continue}var L=O[0],P=L.length,V;switch(L){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":V="(\\D+)";break;case"tt":case"t":V="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":V="(\\d{"+P+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":V="(\\d\\d?)";break;case"zzz":V="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":V="([+-]?\\d\\d?)";break;case"/":V="(\\/)";break;default:throw"Invalid date format pattern '"+L+"'."}if(V){R.push(V)}K.push(O[0])}u(T.slice(Q),R);R.push("$");var X=R.join("").replace(/\s+/g,"\\s+"),S={regExp:X,groups:K};return W[U]=S};I=function(L,J,K){return L<J||L>K};H=function(J){return J.split("\u00A0").join(" ").toUpperCase()};G=function(J){var M=[];for(var L=0,K=J.length;L<K;L++){M[L]=H(J[L])}return M};e=function(ad,ak,al){ad=s(ad);var W=al.calendar,aq=E(W,ak),Q=new RegExp(aq.regExp).exec(ad);if(Q===null){return null}var am=aq.groups,ab=null,U=null,ap=null,ao=null,V=null,O=0,ag,af=0,an=0,J=0,L=null,X=false;for(var ah=0,aj=am.length;ah<aj;ah++){var K=Q[ah+1];if(K){var ac=am[ah],N=ac.length,P=parseInt(K,10);switch(ac){case"dd":case"d":ao=P;if(I(ao,1,31)){return null}break;case"MMM":case"MMMM":ap=F(W,K,N===3);if(I(ap,0,11)){return null}break;case"M":case"MM":ap=P-1;if(I(ap,0,11)){return null}break;case"y":case"yy":case"yyyy":U=N<4?D(W,P):P;if(I(U,0,9999)){return null}break;case"h":case"hh":O=P;if(O===12){O=0}if(I(O,0,11)){return null}break;case"H":case"HH":O=P;if(I(O,0,23)){return null}break;case"m":case"mm":af=P;if(I(af,0,59)){return null}break;case"s":case"ss":an=P;if(I(an,0,59)){return null}break;case"tt":case"t":X=W.PM&&(K===W.PM[0]||K===W.PM[1]||K===W.PM[2]);if(!X&&(!W.AM||(K!==W.AM[0]&&K!==W.AM[1]&&K!==W.AM[2]))){return null}break;case"f":case"ff":case"fff":J=P*Math.pow(10,3-N);if(I(J,0,999)){return null}break;case"ddd":case"dddd":V=C(W,K,N===3);if(I(V,0,6)){return null}break;case"zzz":var M=K.split(/:/);if(M.length!==2){return null}ag=parseInt(M[0],10);if(I(ag,-12,13)){return null}var S=parseInt(M[1],10);if(I(S,0,59)){return null}L=(ag*60)+(A(K,"-")?-S:S);break;case"z":case"zz":ag=P;if(I(ag,-12,13)){return null}L=ag*60;break;case"g":case"gg":var Y=K;if(!Y||!W.eras){return null}Y=s(Y.toLowerCase());for(var ai=0,ae=W.eras.length;ai<ae;ai++){if(Y===W.eras[ai].name.toLowerCase()){ab=ai;break}}if(ab===null){return null}break}}}var T=new Date(),aa,R=W.convert;aa=R?R.fromGregorian(T)[0]:T.getFullYear();if(U===null){U=aa}else{if(W.eras){U+=W.eras[(ab||0)].offset}}if(ap===null){ap=0}if(ao===null){ao=1}if(R){T=R.toGregorian(U,ap,ao);if(T===null){return null}}else{T.setFullYear(U,ap,ao);if(T.getDate()!==ao){return null}if(V!==null&&T.getDay()!==V){return null}}if(X&&O<12){O+=12}T.setHours(O,af,an,J);if(L!==null){var Z=T.getMinutes()-(L+T.getTimezoneOffset());T.setHours(T.getHours()+parseInt(Z/60,10),Z%60)}return T}}());b=function(F,E,D){var H=E["-"],G=E["+"],C;switch(D){case"n -":H=" "+H;G=" "+G;case"n-":if(w(F,H)){C=["-",F.substr(0,F.length-H.length)]}else{if(w(F,G)){C=["+",F.substr(0,F.length-G.length)]}}break;case"- n":H+=" ";G+=" ";case"-n":if(A(F,H)){C=["-",F.substr(H.length)]}else{if(A(F,G)){C=["+",F.substr(G.length)]}}break;case"(n)":if(A(F,"(")&&w(F,")")){C=["-",F.substr(1,F.length-2)]}break}return C||["",F]};t.prototype.findClosestCulture=function(C){return t.findClosestCulture.call(this,C)};t.prototype.format=function(C,D,E){return t.format.call(this,C,D,E)};t.prototype.localize=function(C,D){return t.localize.call(this,C,D)};t.prototype.parseInt=function(D,C,E){return t.parseInt.call(this,D,C,E)};t.prototype.parseFloat=function(D,C,E){return t.parseFloat.call(this,D,C,E)};t.prototype.culture=function(C){return t.culture.call(this,C)};t.addCultureInfo=function(G,D,F){var E={},C=false;if(typeof G!=="string"){F=G;G=this.culture().name;E=this.cultures[G]}else{if(typeof D!=="string"){F=D;C=(this.cultures[G]==null);E=this.cultures[G]||this.cultures["default"]}else{C=true;E=this.cultures[D]}}this.cultures[G]=v(true,{},E,F);if(C){this.cultures[G].calendar=this.cultures[G].calendars.standard}};t.findClosestCulture=function(C){var K;if(!C){return this.findClosestCulture(this.cultureSelector)||this.cultures["default"]}if(typeof C==="string"){C=C.split(",")}if(o(C)){var E,O=this.cultures,M=C,J,F=M.length,N=[];for(J=0;J<F;J++){C=s(M[J]);var D,I=C.split(";");E=s(I[0]);if(I.length===1){D=1}else{C=s(I[1]);if(C.indexOf("q=")===0){C=C.substr(2);D=parseFloat(C);D=isNaN(D)?0:D}else{D=1}}N.push({lang:E,pri:D})}N.sort(function(Q,P){if(Q.pri<P.pri){return 1}else{if(Q.pri>P.pri){return -1}}return 0});for(J=0;J<F;J++){E=N[J].lang;K=O[E];if(K){return K}}for(J=0;J<F;J++){E=N[J].lang;do{var L=E.lastIndexOf("-");if(L===-1){break}E=E.substr(0,L);K=O[E];if(K){return K}}while(1)}for(J=0;J<F;J++){E=N[J].lang;for(var H in O){var G=O[H];if(G.language==E){return G}}}}else{if(typeof C==="object"){return C}}return K||null};t.format=function(D,E,F){var C=this.findClosestCulture(F);if(D instanceof Date){D=q(D,E,C)}else{if(typeof D==="number"){D=j(D,E,C)}}return D};t.localize=function(C,D){return this.findClosestCulture(D).messages[C]||this.cultures["default"].messages[C]};t.parseDate=function(K,I,G){G=this.findClosestCulture(G);var E,C,D;if(I){if(typeof I==="string"){I=[I]}if(I.length){for(var H=0,F=I.length;H<F;H++){var J=I[H];if(J){E=e(K,J,G);if(E){break}}}}}else{D=G.calendar.patterns;for(C in D){E=e(K,D[C],G);if(E){break}}}return E||null};t.parseInt=function(D,C,E){return c(t.parseFloat(D,C,E))};t.parseFloat=function(Q,J,L){if(typeof J!=="number"){L=J;J=10}var S=this.findClosestCulture(L);var V=NaN,H=S.numberFormat;if(Q.indexOf(S.numberFormat.currency.symbol)>-1){Q=Q.replace(S.numberFormat.currency.symbol,"");Q=Q.replace(S.numberFormat.currency["."],S.numberFormat["."])}if(Q.indexOf(S.numberFormat.percent.symbol)>-1){Q=Q.replace(S.numberFormat.percent.symbol,"")}Q=Q.replace(/ /g,"");if(n.test(Q)){V=parseFloat(Q)}else{if(!J&&y.test(Q)){V=parseInt(Q,16)}else{var E=b(Q,H,H.pattern[0]),U=E[0],K=E[1];if(U===""&&H.pattern[0]!=="(n)"){E=b(Q,H,"(n)");U=E[0];K=E[1]}if(U===""&&H.pattern[0]!=="-n"){E=b(Q,H,"-n");U=E[0];K=E[1]}U=U||"+";var P,M,T=K.indexOf("e");if(T<0){T=K.indexOf("E")}if(T<0){M=K;P=null}else{M=K.substr(0,T);P=K.substr(T+1)}var R,I,F=H["."],C=M.indexOf(F);if(C<0){R=M;I=null}else{R=M.substr(0,C);I=M.substr(C+F.length)}var N=H[","];R=R.split(N).join("");var G=N.replace(/\u00A0/g," ");if(N!==G){R=R.split(G).join("")}var O=U+R;if(I!==null){O+="."+I}if(P!==null){var D=b(P,H,"-n");O+="e"+(D[0]||"+")+D[1]}if(z.test(O)){V=parseFloat(O)}}}return V};t.culture=function(C){if(typeof C!=="undefined"){this.cultureSelector=C}return this.findClosestCulture(C)||this.cultures["default"]}}(this));(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var oneditbegin=settings.oneditbegin||settings.onedit||function(){};var oneditend=settings.oneditend||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;var oncomplete=settings.oncomplete||function(s){return s};if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===oneditbegin.apply(this,[settings,self,e])){return}e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width()-settings.widthBuffer:settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).outerHeight():settings.height}}if($(this).html().toLowerCase().replace(/(;|"|\/)/g,"")==settings.placeholder.toLowerCase().replace(/(;|"|\/)/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}else{if(((e.keyCode==9&&settings.submitontab)||(e.keyCode==13&&settings.submitonenter))&&($(this).val().length==0)){form.submit()}}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},100)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){result=oncomplete.apply(self,[result]);if(ajaxoptions.dataType=="html"){$(self).html(result)}self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false});oneditend.apply(this,[settings,self])});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){string=string.replace(/&amp;/g,"&");$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.css("width",settings.width)}if(settings.height!="none"){input.css("height",settings.height)}input.attr("autocomplete","off");$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}});if(!settings.submit){var form=this;$("select",this).change(function(){form.submit()})}}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",widthBuffer:0,height:"auto",event:"click.editable",onblur:"cancel",submitontab:true,submitonenter:true,loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(q,p,v){if(p!==undefined){v=e.extend({},c.defaults,v);if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();u.setDate(u.getDate()+r)}p=c.json?JSON.stringify(p):String(p);return(document.cookie=[encodeURIComponent(q),"=",c.raw?p:encodeURIComponent(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))}var g=c.raw?d:b;var s=document.cookie.split("; ");var w=q?undefined:{};for(var o=0,m=s.length;o<m;o++){var n=s[o].split("=");var h=g(n.shift());var j=g(n.join("="));if(q&&q===h){w=f(j);break}if(!q){w[h]=f(j)}}return w};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend(g,{expires:-1}));return true}return false}}));(function(a){jQuery.fn.equalHeights=function(b){b=b||0;return this.height(b+Math.max.apply(null,this.map(function(){return jQuery(this).height()}).get()))};jQuery.fn.equalWidths=function(b){b=b||0;if(a.support.cssFloat||jQuery(".gsp_i_c",this).length==0){return this.width(b+Math.max.apply(null,this.map(function(){return jQuery(this).width()}).get()))}else{return this.width(b+10+Math.max.apply(null,this.map(function(){return jQuery(".gsp_i_c",this).width()}).get()))}};jQuery.fn.equalSize=function(c,b){c=c||0;b=b||0;if(a.support.cssFloat||jQuery(".gsp_i_c",this).length==0){return this.width(c+Math.max.apply(null,this.map(function(){return jQuery(this).width()}).get())).height(b+Math.max.apply(null,this.map(function(){return jQuery(this).height()}).get()))}else{return this.height(b+Math.max.apply(null,this.map(function(){return jQuery(this).height()}).get())).width(c+10+Math.max.apply(null,this.map(function(){return jQuery(".gsp_i_c",this).width()}).get()))}}})(jQuery);(function(b,a,c){b.fn["paging"]=function(g,f){var e=this,d={setOptions:function(j){function h(q){var l=0,r=0,m=1,p={fstack:[],asterisk:0,inactive:0,blockwide:5,current:3,rights:0,lefts:0},t,o=/[*<>pq\[\]().-]|[nc]+!?/g;var s={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},n={};while((t=o.exec(q))){t=String(t);if(c===s[t]){if("("===t){r=++l}else{if(")"===t){r=0}else{if(m){if("*"===t){p.asterisk=1;p.inactive=0}else{p.asterisk=0;p.inactive="!"===t.charAt(t.length-1);p.blockwide=t.length-p.inactive;if(!(p.current=1+t.indexOf("c"))){p.current=(1+p.blockwide)>>1}}p.fstack[p.fstack.length]=({ftype:"block",fgroup:0,fpos:0});m=0}}}}else{p.fstack[p.fstack.length]=({ftype:s[t],fgroup:r,fpos:c===n[t]?n[t]=1:++n[t]});if("q"===t){++p.lefts}else{if("p"===t){++p.rights}}}}return p}this.opts=b.extend(this.opts||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",onLock:null,onFormat:function(l){},onSelect:function(l){return true},onRefresh:function(l){}},j||{});this.opts.lapping|=0;this.opts.perpage|=0;if(this.opts.page!==null){this.opts.page|=0}if(this.opts.perpage<1){this.opts.perpage=10}if(this.interval){a.clearInterval(this.interval)}if(this.opts.refresh["url"]){this.interval=a.setInterval(function(l){b.ajax({url:l.opts.refresh["url"],success:function(m){if(typeof(m)==="string"){try{m=b.parseJSON(m)}catch(n){return}}n.opts.onRefresh(m)}})},1000*this.opts.refresh["interval"],this)}this.format=h(this.opts.format);return this},setNumber:function(h){this.number=(c===h||h<0)?-1:h;return this},setPage:function(w){if(c===w){if(w=this.opts.page,null===w){return this}}else{if(this.opts.page==w){return this}}this.opts.page=(w|=0);if(null!==this.opts.onLock){this.opts.onLock.call(null,w);return this}var q=this.number;var h=this.opts;var y,l;var m,r;var n=1,x=this.format;var u,t,o,p;var v=x.fstack.length,s=v;if(h.perpage<=h.lapping){h.lapping=h.perpage-1}p=q<=h.lapping?0:h.lapping|0;if(q<0){q=-1;m=-1;y=Math.max(1,w-x.current+1-p);l=y+x.blockwide}else{m=1+Math.ceil((q-h.perpage)/(h.perpage-p));w=Math.max(1,Math.min(w<0?1+m+w:w,m));if(x.asterisk){y=1;l=1+m;x.current=w;x.blockwide=m}else{y=Math.max(1,Math.min(w-x.current,m-x.blockwide)+1);l=x.inactive?y+x.blockwide:Math.min(y+x.blockwide,1+m)}}while(s--){t=0;o=x.fstack[s];switch(o.ftype){case"left":t=(o.fpos<y);break;case"right":t=(l<=m-x.rights+o.fpos);break;case"first":t=(x.current<w);break;case"last":t=(x.blockwide<x.current+m-w);break;case"prev":t=(1<w);break;case"next":t=(w<m);break}n|=t<<o.fgroup}u={number:q,lapping:p,pages:m,perpage:h.perpage,page:w,slice:[(t=w*(h.perpage-p)+p)-h.perpage,Math.min(t,q)]};r="";function j(A,B,z){z=String(A.onFormat.call(B,z));if(B.value){r+=z.replace(/<a/i,'<a data-page="'+B.value+'"')}else{r+=z}}while(++s<v){o=x.fstack[s];t=(n>>o.fgroup&1);switch(o.ftype){case"block":for(;y<l;++y){u.value=y;u.pos=1+x.blockwide-l+y;u.active=y<=m||q<0;u.first=1===y;u.last=y==m&&0<q;j(h,u,o.ftype)}continue;case"left":u.value=o.fpos;u.active=o.fpos<y;break;case"right":u.value=m-x.rights+o.fpos;u.active=l<=u.value;break;case"first":u.value=1;u.active=t&&1<w;break;case"prev":u.value=Math.max(1,w-1);u.active=t&&1<w;break;case"last":if((u.active=(q<0))){u.value=1+w}else{u.value=m;u.active=t&&w<m}break;case"next":if((u.active=(q<0))){u.value=1+w}else{u.value=Math.min(1+w,m);u.active=t&&w<m}break;case"leap":case"fill":u.pos=o.fpos;u.active=t;j(h,u,o.ftype);continue}u.pos=o.fpos;u.last=u.first=c;j(h,u,o.ftype)}if(e.length){b("a",e.html(r)).click(function(z){z.preventDefault();var A=this;do{if("a"===A.nodeName.toLowerCase()){break}}while((A=A.parentNode));d.setPage(b(A).data("page"));if(d.locate){a.location=A.href}});this.locate=h.onSelect.call({number:q,lapping:p,pages:m,slice:u.slice},w)}return this}};return d.setNumber(g)["setOptions"](f)["setPage"]()}}(jQuery,this));(function(b){var a=0;b.fn.splitter=function(c){c=c||{};return this.each(function(){if(b(this).is(".splitter")){return}var o;function h(y){u.removeClass(n.barStateClasses).addClass(y)}function l(y){if(y.which!=1){return}u.removeClass(n.barHoverClass);if(n.outline){o=o||u.clone(false).insertAfter(s);u.removeClass(n.barDockedClass)}h(n.barActiveClass);j.css("-webkit-user-select","none").find("iframe").addClass(n.iframeClass);s._posSplit=s[0][n.pxSplit]-y[n.eventPos];b(document).bind("mousemove"+n.eventNamespace,m).bind("mouseup"+n.eventNamespace,q)}function m(z){var B=s._posSplit+z[n.eventPos],A=Math.max(0,Math.min(B,d._DA-u._DA)),y=Math.max(s._min,d._DA-r._max,Math.min(B,s._max,d._DA-u._DA-r._min));if(n.outline){if((n.dockPane==s&&B<Math.max(s._min,u._DA))||(n.dockPane==r&&B>Math.min(B,s._max,d._DA-u._DA-r._min))){u.addClass(n.barDockedClass).css(n.origin,A)}else{u.removeClass(n.barDockedClass).css(n.origin,y)}u._DA=u[0][n.pxSplit]}else{f(B)}h(B==y?n.barActiveClass:n.barLimitClass)}function q(y){h(n.barNormalClass);u.addClass(n.barHoverClass);var z=s._posSplit+y[n.eventPos];if(n.outline){o.remove();o=null;f(z)}j.css("-webkit-user-select","text").find("iframe").removeClass(n.iframeClass);b(document).unbind("mousemove"+n.eventNamespace+" mouseup"+n.eventNamespace)}function f(y){u._DA=u[0][n.pxSplit];if((n.dockPane==s&&y<Math.max(s._min,u._DA))||(n.dockPane==r&&y>Math.min(y,s._max,d._DA-u._DA-r._min))){u.addClass(n.barDockedClass);u._DA=u[0][n.pxSplit];y=n.dockPane==s?0:d._DA-u._DA;if(u._pos==null){u._pos=s[0][n.pxSplit]}}else{u.removeClass(n.barDockedClass);u._DA=u[0][n.pxSplit];u._pos=null;y=Math.max(s._min,d._DA-r._max,Math.min(y,s._max,d._DA-u._DA-r._min))}u.css(n.origin,y).css(n.fixed,d._DF);s.css(n.origin,0).css(n.split,y).css(n.fixed,d._DF);r.css(n.origin,y+u._DA).css(n.split,d._DA-u._DA-y).css(n.fixed,d._DF);if(!v()){for(i=0;i<=a;i++){j.trigger("resize"+g+i)}}}function t(B,A){var z=0;for(var y=1;y<arguments.length;y++){z+=Math.max(parseInt(B.css(arguments[y]),10)||0,0)}return z}function v(){return(b.browser.msie&&(parseInt(b.browser.version)<9))}var x=(c.splitHorizontal?"h":c.splitVertical?"v":c.type)||"v";var g=".splitter";var n=b.extend({splitterClass:"splitter gsp-ui-widget gsp-ui-widget-content",paneClass:"splitter-pane",barClass:"splitter-bar",barNormalClass:"gsp-ui-state-default",barHoverClass:"gsp-ui-state-hover",barActiveClass:"gsp-ui-state-highlight",barLimitClass:"gsp-ui-state-error",iframeClass:"splitter-iframe-hide",eventNamespace:g+(++a),pxPerKey:8,tabIndex:0,accessKey:""},{v:{keyLeft:39,keyRight:37,cursor:"e-resize",barStateClass:"splitter-bar-vertical",barDockedClass:"splitter-bar-vertical-docked"},h:{keyTop:40,keyBottom:38,cursor:"n-resize",barStateClass:"splitter-bar-horizontal",barDockedClass:"splitter-bar-horizontal-docked"}}[x],c,{v:{type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}}[x]);n.barStateClasses=[n.barNormalClass,n.barHoverClass,n.barActiveClass,n.barLimitClass].join(" ");var d=b(this).css({position:"relative"}).addClass(n.splitterClass);var j=b(">*",d[0]).addClass(n.paneClass).css({position:"absolute","z-index":"1","-moz-outline-style":"none"});var s=b(j[0]),r=b(j[1]);n.dockPane=n.dock&&(/right|bottom/.test(n.dock)?r:s);var e=b('<a href="javascript:void(0)"></a>').attr({accessKey:n.accessKey,tabIndex:n.tabIndex,title:n.splitbarClass}).bind((b.browser.opera?"click":"focus")+n.eventNamespace,function(){this.focus();u.addClass(n.barActiveClass)}).bind("keydown"+n.eventNamespace,function(A){var z=A.which||A.keyCode;var y=z==n["key"+n.side1]?1:z==n["key"+n.side2]?-1:0;if(y){f(s[0][n.pxSplit]+y*n.pxPerKey,false)}}).bind("blur"+n.eventNamespace,function(){u.removeClass(n.barActiveClass)});var u=b("<div></div>").insertAfter(s).addClass(n.barClass).addClass(n.barStateClass).append(e).attr({unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","z-index":"100"}).bind("mousedown"+n.eventNamespace,l).bind("mouseover"+n.eventNamespace,function(){b(this).addClass(n.barHoverClass)}).bind("mouseout"+n.eventNamespace,function(){b(this).removeClass(n.barHoverClass)});if(/^(auto|default|)$/.test(u.css("cursor"))){u.css("cursor",n.cursor)}u._DA=u[0][n.pxSplit];d._PBF=t(d,"border"+n.side3+"Width","border"+n.side4+"Width");d._PBA=t(d,"border"+n.side1+"Width","border"+n.side2+"Width");s._pane=n.side1;r._pane=n.side2;b.each([s,r],function(){this._splitter_style=this.style;this._min=n["min"+this._pane]||t(this,"min-"+n.split);this._max=n["max"+this._pane]||t(this,"max-"+n.split)||9999;this._init=n["size"+this._pane]===true?parseInt(b.css(this[0],n.split),10):n["size"+this._pane]});var w=s._init;if(!isNaN(r._init)){w=d[0][n.pxSplit]-d._PBA-r._init-u._DA}if(n.cookie){if(!b.cookie){alert("jQuery.splitter(): jQuery cookie plugin required")}var p=parseInt(b.cookie(n.cookie),10);if(!isNaN(p)){w=p}b(window).bind("unload"+n.eventNamespace,function(){var y=String(u.css(n.origin));b.cookie(n.cookie,y,{expires:n.cookieExpires||365,path:n.cookiePath||document.location.pathname})})}if(isNaN(w)){w=Math.round((d[0][n.pxSplit]-d._PBA-u._DA)/2)}if(n.anchorToWindow){n.resizeTo=window}if(n.resizeTo){d._hadjust=t(d,"borderTopWidth","borderBottomWidth","marginBottom","paddingBottom");d._hadjust+=t(b("body"),"paddingBottom");d._hadjust+=t(b("html"),"paddingBottom");d._hadjust+=1;d._hmin=Math.max(t(d,"minHeight"),20);b(window).bind("resize"+n.eventNamespace,function(z){if(z.target==window){var y=d.offset().top;var A=b(n.resizeTo).height();d.css("height",Math.max(A-y-d._hadjust-0,d._hmin)+"px");if(!v()){d.trigger("resize"+n.eventNamespace)}}}).trigger("resize"+n.eventNamespace)}else{if(n.resizeToWidth&&!v()){b(window).bind("resize"+n.eventNamespace,function(y){if(y.target==window){d.trigger("resize"+n.eventNamespace)}})}}if(n.dock){d.bind("toggleDock"+n.eventNamespace,function(){var y=n.dockPane[0][n.pxSplit];d.trigger(y?"dock"+n.eventNamespace:"undock"+n.eventNamespace)}).bind("dock"+n.eventNamespace,function(){var z=s[0][n.pxSplit];if(!z){return}u._pos=z;var y={};y[n.origin]=n.dockPane==s?0:d[0][n.pxSplit]-d._PBA-u[0][n.pxSplit];u.animate(y,n.dockSpeed||1,n.dockEasing,function(){u.addClass(n.barDockedClass);f(y[n.origin])})}).bind("undock"+n.eventNamespace,function(){var z=n.dockPane[0][n.pxSplit];if(z){return}var y={};y[n.origin]=u._pos+"px";u.removeClass(n.barDockedClass).animate(y,n.undockSpeed||n.dockSpeed||1,n.undockEasing||n.dockEasing,function(){f(u._pos);u._pos=null})});if(n.dockKey){b('<a title="'+n.splitbarClass+' toggle dock" href="javascript:void(0)"></a>').attr({accessKey:n.dockKey,tabIndex:-1}).appendTo(u).bind(b.browser.opera?"click":"focus",function(){d.trigger("toggleDock"+n.eventNamespace);this.blur()})}u.bind("dblclick",function(){d.trigger("toggleDock"+n.eventNamespace)})}d.bind("destroy"+n.eventNamespace,function(){b([window,document]).unbind(n.eventNamespace);u.unbind().remove();j.removeClass(n.paneClass);d.removeClass(n.splitterClass).add(j).unbind(n.eventNamespace).attr("style",function(y){return this._splitter_style||""});d=u=e=j=s=r=n=c=null}).bind("resize"+n.eventNamespace,function(z,y){if(z.target!=this){return}d._DF=d[0][n.pxFixed]-d._PBF;d._DA=d[0][n.pxSplit]-d._PBA;if(d._DF<=0||d._DA<=0){return}f(!isNaN(y)?y:(!(n.sizeRight||n.sizeBottom)?s[0][n.pxSplit]:d._DA-r[0][n.pxSplit]-u._DA));h(n.barNormalClass)}).trigger("resize"+n.eventNamespace,[w])})}})(jQuery);(function(a){a.fn.autoSuggest=function(f,c){var j={asHtmlID:false,startText:"Enter Name Here",emptyText:"No Results Found",preFill:{},limitText:"No More Selections Are Allowed",selectedItemProp:"value",selectedValuesProp:"value",searchObjProps:"value",queryParam:"q",retrieveLimit:false,extraParams:"",matchCase:false,minChars:1,keyDelay:400,resultsHighlight:true,neverSubmit:false,selectionLimit:false,showResultList:true,start:function(){},selectionClick:function(l){},selectionAdded:function(l){},selectionRemoved:function(l){l.remove()},formatList:false,beforeRetrieve:function(l){return l},retrieveComplete:function(l){return l},resultClick:function(l){},resultsComplete:function(){}};var e=a.extend(j,c);var d="object";var h=0;if(typeof f=="string"){d="string";var b=f}else{var g=f;for(k in f){if(f.hasOwnProperty(k)){h++}}}if((d=="object"&&h>0)||d=="string"){return this.each(function(z){if(!e.asHtmlID){z=z+""+Math.floor(Math.random()*100);var m="as-input-"+z}else{z=e.asHtmlID;var m=z}e.start.call(this);var B=a(this);B.attr("autocomplete","off").addClass("as-input").attr("id",m).val(e.startText);var F=false;B.wrap('<ul class="as-selections" id="as-selections-'+z+'"></ul>').wrap('<li class="as-original" id="as-original-'+z+'"></li>');var G=a("#as-selections-"+z);var v=a("#as-original-"+z);var o=a('<div class="as-results" id="as-results-'+z+'"></div>').hide();var p=a('<ul class="as-list"></ul>');var J=a('<input type="hidden" class="as-values" name="as_values_'+z+'" id="as-values-'+z+'" />');var u="";if(typeof e.preFill=="string"){var C=e.preFill.split(",");for(var H=0;H<C.length;H++){var n={};n[e.selectedValuesProp]=C[H];if(C[H]!=""){I(n,"000"+H)}}u=e.preFill}else{u="";var K=0;for(k in e.preFill){if(e.preFill.hasOwnProperty(k)){K++}}if(K>0){for(var H=0;H<K;H++){var D=e.preFill[H][e.selectedValuesProp];if(D==undefined){D=""}u=u+D+",";if(D!=""){I(e.preFill[H],"000"+H)}}}}if(u!=""){B.val("");var A=u.substring(u.length-1);if(A!=","){u=u+","}J.val(","+u);a("li.as-selection-item",G).addClass("blur").removeClass("selected")}B.after(J);G.click(function(){F=true;B.focus()}).mousedown(function(){F=false}).after(o);var y=null;var E="";var q=0;var r=false;B.focus(function(){if(a(this).val()==e.startText&&J.val()==""){a(this).val("")}else{if(F){a("li.as-selection-item",G).removeClass("blur");if(a(this).val()!=""){p.css("width",G.outerWidth());o.show()}}}F=true;return true}).blur(function(){if(a(this).val()==""&&J.val()==""&&u==""){a(this).val(e.startText)}else{if(F){a("li.as-selection-item",G).addClass("blur").removeClass("selected");o.hide()}}}).keydown(function(P){lastKeyPressCode=P.keyCode;first_focus=false;switch(P.keyCode){case 38:P.preventDefault();w("up");break;case 40:P.preventDefault();w("down");break;case 8:if(B.val()==""){var L=J.val().split(",");L=L[L.length-2];G.children().not(v.prev()).removeClass("selected");if(v.prev().hasClass("selected")){J.val(J.val().replace(","+L+",",","));e.selectionRemoved.call(this,v.prev())}else{e.selectionClick.call(this,v.prev());v.prev().addClass("selected")}}if(B.val().length==1){o.hide();E=""}if(a(":visible",o).length>0){if(y){clearTimeout(y)}y=setTimeout(function(){l()},e.keyDelay)}break;case 9:case 188:case 13:var O=a("li.active:first",o);if(O.length>0){r=false;O.click().removeClass("active");o.hide();if(e.neverSubmit||O.length>0){P.preventDefault()}}else{r=true;var N=B.val().replace(/(,)/g,"");if(N!=""&&J.val().search(","+N+",")<0&&N.length>=e.minChars){P.preventDefault();var M={};M[e.selectedItemProp]=N;M[e.selectedValuesProp]=N;var x=a("li",G).length;I(M,"00"+(x+1));B.val("")}}break;case 27:o.hide();B.val("");break;default:if(e.showResultList){if(e.selectionLimit&&a("li.as-selection-item",G).length>=e.selectionLimit){p.html('<li class="as-message">'+e.limitText+"</li>");o.show()}else{if(y){clearTimeout(y)}y=setTimeout(function(){l()},e.keyDelay)}}break}});function l(){if(lastKeyPressCode==46||(lastKeyPressCode>8&&lastKeyPressCode<32)){return o.hide()}var L=B.val().replace(/[\\]+|[\/]+/g,"");if(L==E){return}E=L;if(L.length>=e.minChars){G.addClass("loading");if(d=="string"){var x="";if(e.retrieveLimit){x="&limit="+encodeURIComponent(e.retrieveLimit)}if(e.beforeRetrieve){L=e.beforeRetrieve.call(this,L)}a.getJSON(b+"?"+e.queryParam+"="+encodeURIComponent(L)+x+e.extraParams,function(N){h=0;var M=e.retrieveComplete.call(this,N);for(k in M){if(M.hasOwnProperty(k)){h++}}s(M,L)})}else{if(e.beforeRetrieve){L=e.beforeRetrieve.call(this,L)}s(g,L)}}else{G.removeClass("loading");o.hide()}}var t=0;function s(N,T){if(!e.matchCase){T=T.toLowerCase()}var V=0;o.html(p.html("")).hide();for(var O=0;O<h;O++){var P=O;t++;var Q=false;if(e.searchObjProps=="value"){var R=N[P].value}else{var R="";var S=e.searchObjProps.split(",");for(var U=0;U<S.length;U++){var x=a.trim(S[U]);R=R+N[P][x]+" "}}if(R){if(!e.matchCase){R=R.toLowerCase()}if(R.search(T)!=-1&&J.val().search(","+N[P][e.selectedValuesProp]+",")==-1){Q=true}}if(Q){var M=a('<li class="as-result-item" id="as-result-item-'+P+'"></li>').click(function(){var Z=a(this).data("data");var X=Z.num;if(a("#as-selection-"+X,G).length<=0&&!r){var Y=Z.attributes;B.val("").focus();E="";I(Y,X);e.resultClick.call(this,Z);o.hide()}r=false}).mousedown(function(){F=false}).mouseover(function(){a("li",p).removeClass("active");a(this).addClass("active")}).data("data",{attributes:N[P],num:t});var W=a.extend({},N[P]);if(!e.matchCase){var L=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+T+")(?![^<>]*>)(?![^&;]+;)","gi")}else{var L=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+T+")(?![^<>]*>)(?![^&;]+;)","g")}if(e.resultsHighlight){W[e.selectedItemProp]=W[e.selectedItemProp].replace(L,"<em>$1</em>")}if(!e.formatList){M=M.html(W[e.selectedItemProp])}else{M=e.formatList.call(this,W,M)}p.append(M);delete W;V++;if(e.retrieveLimit&&e.retrieveLimit==V){break}}}G.removeClass("loading");if(V<=0){p.html('<li class="as-message">'+e.emptyText+"</li>")}p.css("width",G.outerWidth());o.show();e.resultsComplete.call(this)}function I(M,x){J.val(J.val()+M[e.selectedValuesProp]+",");var L=a('<li class="as-selection-item" id="as-selection-'+x+'"></li>').click(function(){e.selectionClick.call(this,a(this));G.children().removeClass("selected");a(this).addClass("selected")}).mousedown(function(){F=false});var N=a('<a class="as-close">&times;</a>').click(function(){J.val(J.val().replace(","+M[e.selectedValuesProp]+",",","));e.selectionRemoved.call(this,L);F=true;B.focus();return false});v.before(L.html(M[e.selectedItemProp]).prepend(N));e.selectionAdded.call(this,v.prev())}function w(M){if(a(":visible",o).length>0){var x=a("li",o);if(M=="down"){var N=x.eq(0)}else{var N=x.filter(":last")}var L=a("li.active:first",o);if(L.length>0){if(M=="down"){N=L.next()}else{N=L.prev()}}x.removeClass("active");N.addClass("active")}}})}}})(jQuery);(function(a){a.widget("ui.menubar",{version:"@VERSION",options:{autoExpand:false,buttons:false,items:"li",menuElement:"ul",menuIcon:false,position:{my:"left top",at:"left bottom"}},_create:function(){var b=this;this.menuItems=this.element.children(this.options.items);this.items=this.menuItems.children("button, a");this.menuItems.addClass("ui-menubar-item").attr("role","presentation");this.items.slice(1).attr("tabIndex",-1);this.element.addClass("ui-menubar ui-widget-header ui-helper-clearfix").attr("role","menubar");this._focusable(this.items);this._hoverable(this.items);this.items.siblings(this.options.menuElement).menu({position:{within:this.options.position.within},select:function(c,d){d.item.parents("ul.ui-menu:last").hide();b._close();a(c.target).prev().focus();b._trigger("select",c,d)},menus:b.options.menuElement}).hide().attr({"aria-hidden":"true","aria-expanded":"false"}).bind("keydown.menubar",function(c){var d=a(this);if(d.is(":hidden")){return}switch(c.keyCode){case a.ui.keyCode.LEFT:b.previous(c);c.preventDefault();break;case a.ui.keyCode.RIGHT:b.next(c);c.preventDefault();break}});this.items.each(function(){var c=a(this),d=c.next(b.options.menuElement);if(d.length){c.bind("click.menubar focus.menubar mouseenter.menubar",function(e){if(e.type==="focus"&&!e.originalEvent){return}e.preventDefault();if(e.type==="click"&&d.is(":visible")&&b.active&&b.active[0]===d[0]){b._close();return}if((b.open&&e.type==="mouseenter")||e.type==="click"||b.options.autoExpand){if(b.options.autoExpand){clearTimeout(b.closeTimer)}if(b.options.autoExpand){b.openTimer=window.setTimeout(function(){b._open(e,d)},200)}else{b._open(e,d)}}}).bind("keydown",function(e){switch(e.keyCode){case a.ui.keyCode.SPACE:case a.ui.keyCode.UP:case a.ui.keyCode.DOWN:b._open(e,a(this).next());e.preventDefault();break;case a.ui.keyCode.LEFT:b.previous(e);e.preventDefault();break;case a.ui.keyCode.RIGHT:b.next(e);e.preventDefault();break}}).attr("aria-haspopup","true");if(b.options.menuIcon){c.addClass("ui-state-default").append("<span class='ui-button-icon-secondary ui-icon ui-icon-triangle-1-s'></span>");c.removeClass("ui-button-text-only").addClass("ui-button-text-icon-secondary")}}else{c.bind("click.menubar mouseenter.menubar",function(e){if((b.open&&e.type==="mouseenter")||e.type==="click"){b._close()}})}c.addClass("ui-button ui-widget ui-button-text-only ui-menubar-link").attr("role","menuitem").wrapInner("<span class='ui-button-text'></span>");if(b.options.buttons){c.removeClass("ui-menubar-link").addClass("ui-state-default")}});b._on({keydown:function(c){if(c.keyCode===a.ui.keyCode.ESCAPE&&b.active&&b.active.menu("collapse",c)!==true){var d=b.active;b.active.blur();b._close(c);d.prev().focus()}},focusin:function(c){clearTimeout(b.closeTimer)},focusout:function(c){clearTimeout(b.openTimer);b.closeTimer=setTimeout(function(){b._close(c)},150)},"mouseleave .ui-menubar-item":function(c){if(b.options.autoExpand){clearTimeout(b.openTimer);b.closeTimer=setTimeout(function(){b._close(c)},150)}},"mouseenter .ui-menubar-item":function(c){clearTimeout(b.closeTimer)}});this.openSubmenus=0},_destroy:function(){this.menuItems.removeClass("ui-menubar-item").removeAttr("role");this.element.removeClass("ui-menubar ui-widget-header ui-helper-clearfix").removeAttr("role").unbind(".menubar");this.items.unbind(".menubar").removeClass("ui-button ui-widget ui-button-text-only ui-menubar-link ui-state-default").removeAttr("role").removeAttr("aria-haspopup").children("span.ui-button-text").each(function(b,d){var c=a(this);c.parent().html(c.html())}).end().children(".ui-icon").remove();this.element.find(":ui-menu").menu("destroy").show().removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("tabindex").unbind(".menubar")},_close:function(){if(!this.active||!this.active.length){return}this.active.menu("collapseAll").hide().attr({"aria-hidden":"true","aria-expanded":"false"});this.active.prev().removeClass("ui-state-active").removeAttr("tabIndex");this.active=null;this.open=false;this.openSubmenus=0},_open:function(c,d){if(this.active&&this.active[0]===d[0]){return}if(this.active){this.active.menu("collapseAll").hide().attr({"aria-hidden":"true","aria-expanded":"false"});this.active.prev().removeClass("ui-state-active")}var b=d.prev().addClass("ui-state-active").attr("tabIndex",-1);this.active=d.slideDown(200).position(a.extend({of:b},this.options.position)).removeAttr("aria-hidden").attr("aria-expanded","true").menu("focus",c,d.children(".ui-menu-item").first()).focus().focusin();this.open=true},next:function(b){if(this.open&&this.active.data("menu").active.has(".ui-menu").length){this.openSubmenus++;return}this.openSubmenus=0;this._move("next","first",b)},previous:function(b){if(this.open&&this.openSubmenus){this.openSubmenus--;return}this.openSubmenus=0;this._move("prev","last",b)},_move:function(f,d,e){var c,b;if(this.open){c=this.active.closest(".ui-menubar-item")[f+"All"](this.options.items).first().children(".ui-menu").eq(0);b=this.menuItems[d]().children(".ui-menu").eq(0)}else{if(e){c=a(e.target).closest(".ui-menubar-item")[f+"All"](this.options.items).children(".ui-menubar-link").eq(0);b=this.menuItems[d]().children(".ui-menubar-link").eq(0)}else{c=b=this.menuItems.children("a").eq(0)}}if(c.length){if(this.open){this._open(e,c)}else{c.removeAttr("tabIndex")[0].focus()}}else{if(this.open){this._open(e,b)}else{b.removeAttr("tabIndex")[0].focus()}}}})}(jQuery));(function(b){b.fn.rateit=function(h,f){var c={};var g="init";var e=function(j){return j.charAt(0).toUpperCase()+j.substr(1)};if(this.length==0){return this}var d=b.type(h);if(d=="object"||h===undefined||h==null){c=b.extend({},b.fn.rateit.defaults,h)}else{if(d=="string"&&f===undefined){return this.data("rateit"+e(h))}else{if(d=="string"){g="setvalue"}}}return this.each(function(){var r=b(this);var s=function(t,u){arguments[0]="rateit"+e(t);return r.data.apply(r,arguments)};if(!r.hasClass("rateit")){r.addClass("rateit")}var j=r.css("direction")!="rtl";if(g=="setvalue"){if(!s("init")){throw"Can't set value before init"}if(h=="readonly"&&!s("readonly")){r.find(".rateit-range").unbind();s("wired",false)}if(h=="value"&&f==null){f=s("min")}if(s("backingfld")){var m=b(s("backingfld"));if(h=="value"){m.val(f)}if(h=="min"&&m[0].min){m[0].min=f}if(h=="max"&&m[0].max){m[0].max=f}if(h=="step"&&m[0].step){m[0].step=f}}s(h,f)}if(!s("init")){s("min",s("min")||c.min);s("max",s("max")||c.max);s("step",s("step")||c.step);s("readonly",s("readonly")!==undefined?s("readonly"):c.readonly);s("resetable",s("resetable")!==undefined?s("resetable"):c.resetable);s("backingfld",s("backingfld")||c.backingfld);s("starwidth",s("starwidth")||c.starwidth);s("starheight",s("starheight")||c.starheight);s("value",s("value")||c.value||c.min);s("ispreset",s("ispreset")!==undefined?s("ispreset"):c.ispreset);if(s("backingfld")){var m=b(s("backingfld"));s("value",m.hide().val());if(m.attr("disabled")||m.attr("readonly")){s("readonly",true)}if(m[0].nodeName=="INPUT"){if(m[0].type=="range"||m[0].type=="text"){s("min",parseInt(m.attr("min"))||s("min"));s("max",parseInt(m.attr("max"))||s("max"));s("step",parseInt(m.attr("step"))||s("step"))}}if(m[0].nodeName=="SELECT"&&m[0].options.length>1){s("min",Number(m[0].options[0].value));s("max",Number(m[0].options[m[0].length-1].value));s("step",Number(m[0].options[1].value)-Number(m[0].options[0].value))}}r.append('<div class="rateit-reset"></div><div class="rateit-range"><div class="rateit-selected" style="height:'+s("starheight")+'px"></div><div class="rateit-hover" style="height:'+s("starheight")+'px"></div></div>');if(!j){r.find(".rateit-reset").css("float","right");r.find(".rateit-selected").addClass("rateit-selected-rtl");r.find(".rateit-hover").addClass("rateit-hover-rtl")}s("init",true)}var o=r.find(".rateit-range");o.width(s("starwidth")*(s("max")-s("min"))).height(s("starheight"));var n="rateit-preset"+((j)?"":"-rtl");if(s("ispreset")){r.find(".rateit-selected").addClass(n)}else{r.find(".rateit-selected").removeClass(n)}if(s("value")!=null){var l=(s("value")-s("min"))*s("starwidth");r.find(".rateit-selected").width(l)}var p=r.find(".rateit-reset");if(p.data("wired")!==true){p.click(function(){s("value",s("min"));o.find(".rateit-hover").hide().width(0);o.find(".rateit-selected").width(0).show();if(s("backingfld")){b(s("backingfld")).val(s("min"))}r.trigger("reset")}).data("wired",true)}var q=function(u,w){var v=(w.changedTouches)?w.changedTouches[0].pageX:w.pageX;var t=v-b(u).offset().left;if(!j){t=o.width()-t}if(t>o.width()){t=o.width()}if(t<0){t=0}return l=Math.ceil(t/s("starwidth")*(1/s("step")))};if(!s("readonly")){if(!s("resetable")){p.hide()}if(!s("wired")){o.bind("touchmove touchend",a);o.mousemove(function(x){var y=q(this,x);var t=y*s("starwidth")*s("step");var u=o.find(".rateit-hover");if(u.data("width")!=t){o.find(".rateit-selected").hide();u.width(t).show().data("width",t);var v=[(y*s("step"))+s("min")];r.trigger("hover",v).trigger("over",v)}});o.mouseleave(function(t){o.find(".rateit-hover").hide().width(0).data("width","");r.trigger("hover",[null]).trigger("over",[null]);o.find(".rateit-selected").show()});o.mouseup(function(u){var v=q(this,u);var t=(v*s("step"))+s("min");s("value",t);if(s("backingfld")){b(s("backingfld")).val(t)}if(s("ispreset")){o.find(".rateit-selected").removeClass(n);s("ispreset",false)}o.find(".rateit-hover").hide();o.find(".rateit-selected").width(v*s("starwidth")*s("step")).show();r.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[t])});s("wired",true)}if(s("resetable")){p.show()}}else{p.hide()}})};function a(e){var f=e.originalEvent.changedTouches,g=f[0],c="";switch(e.type){case"touchmove":c="mousemove";break;case"touchend":c="mouseup";break;default:return}var d=document.createEvent("MouseEvent");d.initMouseEvent(c,true,true,window,1,g.screenX,g.screenY,g.clientX,g.clientY,false,false,false,false,0,null);g.target.dispatchEvent(d);e.preventDefault()}b.fn.rateit.defaults={min:0,max:5,step:0.5,starwidth:16,starheight:16,readonly:false,resetable:true,ispreset:false}})(jQuery);(function(a){a.supersized=function(b){var c=this;c.init=function(){a.supersized.vars=a.extend(a.supersized.vars,a.supersized.themeVars);a.supersized.vars.options=a.extend({},a.supersized.defaultOptions,a.supersized.themeOptions,b);c.options=a.supersized.vars.options;c._build()};c._build=function(){var g=0,d="",l="",h,e="",j;a("body").children(":visible").hide().addClass("supersized_hidden");a("body").append(a(a.supersized.vars.options.html_template),'<div id="supersized-loader"></div><ul id="supersized"></ul>');var f="#supersized";c.$el=a(f);c.el=f;vars=a.supersized.vars;c.$el.data("supersized",c);api=c.$el.data("supersized");while(g<=c.options.slides.length-1){switch(c.options.slide_links){case"num":h=g;break;case"name":h=c.options.slides[g].title;break;case"blank":h="";break}d=d+'<li class="slide-'+g+'"></li>';if(g==c.options.start_slide-1){if(c.options.slide_links){l=l+'<li class="slide-link-'+g+' current-slide"><a>'+h+"</a></li>"}if(c.options.thumb_links){c.options.slides[g].thumb?j=c.options.slides[g].thumb:j=c.options.slides[g].image;e=e+'<li class="thumb'+g+' current-thumb"><img src="'+j+'"/></li>'}}else{if(c.options.slide_links){l=l+'<li class="slide-link-'+g+'" ><a>'+h+"</a></li>"}if(c.options.thumb_links){c.options.slides[g].thumb?j=c.options.slides[g].thumb:j=c.options.slides[g].image;e=e+'<li class="thumb'+g+'"><img src="'+j+'"/></li>'}}g++}if(c.options.slide_links){a(vars.slide_list).html(l)}if(c.options.thumb_links&&vars.thumb_tray.length){a(vars.thumb_tray).append('<ul id="'+vars.thumb_list.replace("#","")+'">'+e+"</ul>")}a(c.el).append(d);if(c.options.thumbnail_navigation){vars.current_slide-1<0?prevThumb=c.options.slides.length-1:prevThumb=vars.current_slide-1;a(vars.prev_thumb).show().html(a("<img/>").attr("src",c.options.slides[prevThumb].image));vars.current_slide==c.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1;a(vars.next_thumb).show().html(a("<img/>").attr("src",c.options.slides[nextThumb].image))}c._start()};c._start=function(){if(c.options.start_slide){vars.current_slide=c.options.start_slide-1}else{vars.current_slide=Math.floor(Math.random()*c.options.slides.length)}var o=c.options.new_window?' target="_blank"':"";if(c.options.performance==3){c.$el.addClass("speed")}else{if((c.options.performance==1)||(c.options.performance==2)){c.$el.addClass("quality")}}if(c.options.random){arr=c.options.slides;for(var g,m,h=arr.length;h;g=parseInt(Math.random()*h),m=arr[--h],arr[h]=arr[g],arr[g]=m){}c.options.slides=arr}if(c.options.slides.length>1){if(c.options.slides.length>2){vars.current_slide-1<0?loadPrev=c.options.slides.length-1:loadPrev=vars.current_slide-1;var f=(c.options.slides[loadPrev].url)?"href='"+c.options.slides[loadPrev].url+"'":"";var q=a('<img src="'+c.options.slides[loadPrev].image+'"/>');var n=c.el+" li:eq("+loadPrev+")";q.appendTo(n).wrap("<a "+f+o+"></a>").parent().parent().addClass("image-loading prevslide");q.load(function(){a(this).data("origWidth",a(this).width()).data("origHeight",a(this).height());c.resizeNow()})}}else{}f=(api.getField("url"))?"href='"+api.getField("url")+"'":"";var l=a('<img src="'+api.getField("image")+'"/>');var e=c.el+" li:eq("+vars.current_slide+")";l.appendTo(e).wrap("<a "+f+o+"></a>").parent().parent().addClass("image-loading activeslide").css("visibility","visible");l.load(function(){c._origDim(a(this));c.resizeNow();c.launch();if(typeof theme!="undefined"&&typeof theme._init=="function"){theme._init()}});if(c.options.slides.length>1){vars.current_slide==c.options.slides.length-1?loadNext=0:loadNext=vars.current_slide+1;f=(c.options.slides[loadNext].url)?"href='"+c.options.slides[loadNext].url+"'":"";var d=a('<img src="'+c.options.slides[loadNext].image+'"/>');var p=c.el+" li:eq("+loadNext+")";d.appendTo(p).wrap("<a "+f+o+"></a>").parent().parent().addClass("image-loading");d.load(function(){a(this).data("origWidth",a(this).width()).data("origHeight",a(this).height());c.resizeNow()})}c.$el.css("visibility","hidden");a(".load-item").hide()};c.launch=function(){a("#supersized-loader").remove();if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function"){theme.beforeAnimation("next")}a(".load-item").show();if(c.options.keyboard_nav){a(document.documentElement).on("keyup.supersized",function(d){if(vars.in_animation){return false}if(a(document.activeElement).is("input, textarea")){return false}if((d.keyCode==37)||(d.keyCode==40)){clearInterval(vars.slideshow_interval);c.prevSlide()}else{if((d.keyCode==39)||(d.keyCode==38)){clearInterval(vars.slideshow_interval);c.nextSlide()}else{if(d.keyCode==32&&!vars.hover_pause){clearInterval(vars.slideshow_interval);c.playToggle()}}}})}if(c.options.slideshow&&c.options.pause_hover){a(c.el).hover(function(){if(vars.in_animation){return false}vars.hover_pause=true;if(!vars.is_paused){vars.hover_pause="resume";c.playToggle()}},function(){if(vars.hover_pause=="resume"){c.playToggle();vars.hover_pause=false}})}if(c.options.slide_links){a(vars.slide_list+"> li").click(function(){index=a(vars.slide_list+"> li").index(this);targetSlide=index+1;c.goTo(targetSlide);return false})}if(c.options.thumb_links){a(vars.thumb_list+"> li").click(function(){index=a(vars.thumb_list+"> li").index(this);targetSlide=index+1;api.goTo(targetSlide);return false})}if(c.options.slideshow&&c.options.slides.length>1){if(c.options.autoplay&&c.options.slides.length>1){vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval)}else{vars.is_paused=true}a(".load-item img").bind("contextmenu mousedown",function(){return false})}a(window).resize(function(){c.resizeNow()})};c.resizeNow=function(){return c.$el.each(function(){a("img",c.el).each(function(){thisSlide=a(this);var e=(thisSlide.data("origHeight")/thisSlide.data("origWidth")).toFixed(2);var d=c.$el.width(),g=c.$el.height(),h;if(c.options.fit_always){if((g/d)>e){f()}else{j()}}else{if((g<=c.options.min_height)&&(d<=c.options.min_width)){if((g/d)>e){c.options.fit_landscape&&e<1?f(true):j(true)}else{c.options.fit_portrait&&e>=1?j(true):f(true)}}else{if(d<=c.options.min_width){if((g/d)>e){c.options.fit_landscape&&e<1?f(true):j()}else{c.options.fit_portrait&&e>=1?j():f(true)}}else{if(g<=c.options.min_height){if((g/d)>e){c.options.fit_landscape&&e<1?f():j(true)}else{c.options.fit_portrait&&e>=1?j(true):f()}}else{if((g/d)>e){c.options.fit_landscape&&e<1?f():j()}else{c.options.fit_portrait&&e>=1?j():f()}}}}}function f(l){if(l){if(thisSlide.width()<d||thisSlide.width()<c.options.min_width){if(thisSlide.width()*e>=c.options.min_height){thisSlide.width(c.options.min_width);thisSlide.height(thisSlide.width()*e)}else{j()}}}else{if(c.options.min_height>=g&&!c.options.fit_landscape){if(d*e>=c.options.min_height||(d*e>=c.options.min_height&&e<=1)){thisSlide.width(d);thisSlide.height(d*e)}else{if(e>1){thisSlide.height(c.options.min_height);thisSlide.width(thisSlide.height()/e)}else{if(thisSlide.width()<d){thisSlide.width(d);thisSlide.height(thisSlide.width()*e)}}}}else{thisSlide.width(d);thisSlide.height(d*e)}}}function j(l){if(l){if(thisSlide.height()<g){if(thisSlide.height()/e>=c.options.min_width){thisSlide.height(c.options.min_height);thisSlide.width(thisSlide.height()/e)}else{f(true)}}}else{if(c.options.min_width>=d){if(g/e>=c.options.min_width||e>1){thisSlide.height(g);thisSlide.width(g/e)}else{if(e<=1){thisSlide.width(c.options.min_width);thisSlide.height(thisSlide.width()*e)}}}else{thisSlide.height(g);thisSlide.width(g/e)}}}if(thisSlide.parents("li").hasClass("image-loading")){a(".image-loading").removeClass("image-loading")}if(c.options.horizontal_center){a(this).css("left",(d-a(this).width())/2)}if(c.options.vertical_center){a(this).css("top",(g-a(this).height())/2)}});if(c.options.image_protect){a("img",c.el).bind("contextmenu mousedown",function(){return false})}return false})};c.nextSlide=function(){if(c.options.slideshow&&!vars.is_paused&&c.options.auto_exit&&(vars.current_slide==c.options.slides.length-1)){c.destroy();return false}var h=vars.current_slide;if(vars.current_slide<c.options.slides.length-1){vars.current_slide++}else{if(c.options.loop){vars.current_slide=0}}if(h==vars.current_slide){vars.in_animation=false;return false}if(vars.in_animation||!api.options.slideshow){return false}else{vars.in_animation=true}clearInterval(vars.slideshow_interval);var g=c.options.slides,d=c.$el.find(".activeslide");a(".prevslide").removeClass("prevslide");d.removeClass("activeslide").addClass("prevslide");var f=a(c.el+" li:eq("+vars.current_slide+")"),j=c.$el.find(".prevslide");if(c.options.performance==1){c.$el.removeClass("quality").addClass("speed")}loadSlide=false;vars.current_slide==c.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var m=c.el+" li:eq("+loadSlide+")";if(!a(m).html()){var l=c.options.new_window?' target="_blank"':"";imageLink=(c.options.slides[loadSlide].url)?"href='"+c.options.slides[loadSlide].url+"'":"";var e=a('<img src="'+c.options.slides[loadSlide].image+'"/>');e.appendTo(m).wrap("<a "+imageLink+l+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");e.load(function(){c._origDim(a(this));c.resizeNow()})}if(c.options.thumbnail_navigation==1){vars.current_slide-1<0?prevThumb=c.options.slides.length-1:prevThumb=vars.current_slide-1;a(vars.prev_thumb).html(a("<img/>").attr("src",c.options.slides[prevThumb].image));nextThumb=loadSlide;a(vars.next_thumb).html(a("<img/>").attr("src",c.options.slides[nextThumb].image))}if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function"){theme.beforeAnimation("next")}if(c.options.slide_links){a(".current-slide").removeClass("current-slide");a(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")}f.css("visibility","hidden").addClass("activeslide");switch(c.options.transition){case 0:case"none":f.css("visibility","visible");vars.in_animation=false;c.afterAnimation();break;case 1:case"fade":f.css({opacity:0,visibility:"visible"}).animate({opacity:1,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 2:case"slideTop":f.css({top:-c.$el.height(),visibility:"visible"}).animate({top:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 3:case"slideRight":f.css({left:c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 4:case"slideBottom":f.css({top:c.$el.height(),visibility:"visible"}).animate({top:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 5:case"slideLeft":f.css({left:-c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 6:case"carouselRight":f.css({left:c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});d.animate({left:-c.$el.width(),avoidTransforms:false},c.options.transition_speed);break;case 7:case"carouselLeft":f.css({left:-c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});d.animate({left:c.$el.width(),avoidTransforms:false},c.options.transition_speed);break}return false};c.prevSlide=function(){if(vars.in_animation||!api.options.slideshow){return false}else{vars.in_animation=true}var h=vars.current_slide;if(vars.current_slide>0){vars.current_slide--}else{if(c.options.loop){vars.current_slide=c.options.slides.length-1}}if(h==vars.current_slide){vars.in_animation=false;return false}clearInterval(vars.slideshow_interval);var g=c.options.slides,d=c.$el.find(".activeslide");a(".prevslide").removeClass("prevslide");d.removeClass("activeslide").addClass("prevslide");var f=a(c.el+" li:eq("+vars.current_slide+")"),j=c.$el.find(".prevslide");if(c.options.performance==1){c.$el.removeClass("quality").addClass("speed")}loadSlide=vars.current_slide;var m=c.el+" li:eq("+loadSlide+")";if(!a(m).html()){var l=c.options.new_window?' target="_blank"':"";imageLink=(c.options.slides[loadSlide].url)?"href='"+c.options.slides[loadSlide].url+"'":"";var e=a('<img src="'+c.options.slides[loadSlide].image+'"/>');e.appendTo(m).wrap("<a "+imageLink+l+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");e.load(function(){c._origDim(a(this));c.resizeNow()})}if(c.options.thumbnail_navigation==1){loadSlide==0?prevThumb=c.options.slides.length-1:prevThumb=loadSlide-1;a(vars.prev_thumb).html(a("<img/>").attr("src",c.options.slides[prevThumb].image));vars.current_slide==c.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1;a(vars.next_thumb).html(a("<img/>").attr("src",c.options.slides[nextThumb].image))}if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function"){theme.beforeAnimation("prev")}if(c.options.slide_links){a(".current-slide").removeClass("current-slide");a(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")}f.css("visibility","hidden").addClass("activeslide");switch(c.options.transition){case 0:case"none":f.css("visibility","visible");vars.in_animation=false;c.afterAnimation();break;case 1:case"fade":f.css({opacity:0,visibility:"visible"}).animate({opacity:1,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 2:case"slideTop":f.css({top:c.$el.height(),visibility:"visible"}).animate({top:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 3:case"slideRight":f.css({left:-c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 4:case"slideBottom":f.css({top:-c.$el.height(),visibility:"visible"}).animate({top:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 5:case"slideLeft":f.css({left:c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});break;case 6:case"carouselRight":f.css({left:-c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});d.css({left:0}).animate({left:c.$el.width(),avoidTransforms:false},c.options.transition_speed);break;case 7:case"carouselLeft":f.css({left:c.$el.width(),visibility:"visible"}).animate({left:0,avoidTransforms:false},c.options.transition_speed,function(){c.afterAnimation()});d.css({left:0}).animate({left:-c.$el.width(),avoidTransforms:false},c.options.transition_speed);break}return false};c.playToggle=function(){if(vars.in_animation||!api.options.slideshow){return false}if(vars.is_paused){vars.is_paused=false;if(typeof theme!="undefined"&&typeof theme.playToggle=="function"){theme.playToggle("play")}vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval)}else{vars.is_paused=true;if(typeof theme!="undefined"&&typeof theme.playToggle=="function"){theme.playToggle("pause")}clearInterval(vars.slideshow_interval)}return false};c.destroy=function(){if(vars.in_animation||!api.options.slideshow){return}if(vars.is_paused){api.playToggle()}clearInterval(vars.slideshow_interval);a(document.documentElement).off(".supersized");a(".ssControlsContainer *").off("click");var d=vars.options.slides[vars.current_slide].id;vars=null;api=null;a("#supersized-loader,#supersized,.ssControlsContainer").remove();a("body .supersized_hidden").show().removeClass("supersized_hidden");c.options.on_destroy.apply(null,[d])};c.goTo=function(e){if(vars.in_animation||!api.options.slideshow){return false}var d=c.options.slides.length;if(e<0){e=d}else{if(e>d){e=1}}e=d-e+1;clearInterval(vars.slideshow_interval);if(typeof theme!="undefined"&&typeof theme.goTo=="function"){theme.goTo()}if(vars.current_slide==d-e){if(!(vars.is_paused)){vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval)}return false}if(d-e>vars.current_slide){vars.current_slide=d-e-1;vars.update_images="next";c._placeSlide(vars.update_images)}else{if(d-e<vars.current_slide){vars.current_slide=d-e+1;vars.update_images="prev";c._placeSlide(vars.update_images)}}if(c.options.slide_links){a(vars.slide_list+"> .current-slide").removeClass("current-slide");a(vars.slide_list+"> li").eq((d-e)).addClass("current-slide")}if(c.options.thumb_links){a(vars.thumb_list+"> .current-thumb").removeClass("current-thumb");a(vars.thumb_list+"> li").eq((d-e)).addClass("current-thumb")}};c._placeSlide=function(d){var g=c.options.new_window?' target="_blank"':"";loadSlide=false;if(d=="next"){vars.current_slide==c.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var f=c.el+" li:eq("+loadSlide+")";if(!a(f).html()){var g=c.options.new_window?' target="_blank"':"";imageLink=(c.options.slides[loadSlide].url)?"href='"+c.options.slides[loadSlide].url+"'":"";var e=a('<img src="'+c.options.slides[loadSlide].image+'"/>');e.appendTo(f).wrap("<a "+imageLink+g+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");e.load(function(){c._origDim(a(this));c.resizeNow()})}c.nextSlide()}else{if(d=="prev"){vars.current_slide-1<0?loadSlide=c.options.slides.length-1:loadSlide=vars.current_slide-1;var f=c.el+" li:eq("+loadSlide+")";if(!a(f).html()){var g=c.options.new_window?' target="_blank"':"";imageLink=(c.options.slides[loadSlide].url)?"href='"+c.options.slides[loadSlide].url+"'":"";var e=a('<img src="'+c.options.slides[loadSlide].image+'"/>');e.appendTo(f).wrap("<a "+imageLink+g+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");e.load(function(){c._origDim(a(this));c.resizeNow()})}c.prevSlide()}}};c._origDim=function(d){d.data("origWidth",d.width()).data("origHeight",d.height())};c.afterAnimation=function(){if(c.options.performance==1){c.$el.removeClass("speed").addClass("quality")}if(vars.update_images){vars.current_slide-1<0?setPrev=c.options.slides.length-1:setPrev=vars.current_slide-1;vars.update_images=false;a(".prevslide").removeClass("prevslide");a(c.el+" li:eq("+setPrev+")").addClass("prevslide")}vars.in_animation=false;if(!vars.is_paused&&c.options.slideshow){vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval);if(!c.options.loop&&!c.options.auto_exit&&vars.current_slide==c.options.slides.length-1){c.playToggle()}}if(typeof theme!="undefined"&&typeof theme.afterAnimation=="function"){theme.afterAnimation()}return false};c.getField=function(d){return c.options.slides[vars.current_slide][d]};c.init()};a.supersized.vars={thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",slide_list:"#slide-list",current_slide:0,in_animation:false,is_paused:false,hover_pause:false,slideshow_interval:false,update_images:false,options:{}};a.supersized.defaultOptions={slideshow:1,autoplay:1,auto_exit:0,start_slide:1,loop:1,random:0,slide_interval:5000,transition:1,transition_speed:750,new_window:1,pause_hover:0,keyboard_nav:1,performance:1,image_protect:1,fit_always:0,fit_landscape:0,fit_portrait:1,min_width:0,min_height:0,horizontal_center:1,vertical_center:1,slide_links:1,thumb_links:1,thumbnail_navigation:0,on_destroy:function(){}};a.fn.supersized=function(b){return this.each(function(){(new a.supersized(b))})}})(jQuery);(function(a){theme={_init:function(){if(api.options.slide_links){var b=a(vars.slide_list).parent().width()-400;a(vars.slide_list).css("margin-left",-a(vars.slide_list).width()/2).css("max-width",b)}if(api.options.autoplay){if(api.options.progress_bar){theme.progressBar()}else{a(vars.progress_bar).parent().hide()}}else{if(a(vars.play_button).attr("src")){a(vars.play_button).attr("src",api.options.image_path+"play.png")}if(api.options.progress_bar){a(vars.progress_bar).stop().css({left:-a(window).width()})}else{a(vars.progress_bar).parent().hide()}}a(vars.thumb_tray).css({bottom:-(a(vars.thumb_tray).outerHeight()+5)});a(vars.tray_button).toggle(function(){a(vars.thumb_tray).stop().animate({bottom:0,avoidTransforms:true},300);if(a(vars.tray_arrow).attr("src")){a(vars.tray_arrow).attr("src",api.options.image_path+"button-tray-down.png")}return false},function(){a(vars.thumb_tray).stop().animate({bottom:-(a(vars.thumb_tray).outerHeight()+5),avoidTransforms:true},300);if(a(vars.tray_arrow).attr("src")){a(vars.tray_arrow).attr("src",api.options.image_path+"button-tray-up.png")}return false});a(vars.thumb_list).width(a("> li",vars.thumb_list).length*a("> li",vars.thumb_list).outerWidth(true));if(a(vars.slide_total).length){a(vars.slide_total).html(api.options.slides.length)}if(api.options.thumb_links){if(a(vars.thumb_list).width()<=a(vars.thumb_tray).width()){a(vars.thumb_back+","+vars.thumb_forward).fadeOut(0)}vars.thumb_interval=Math.floor(a(vars.thumb_tray).width()/a("> li",vars.thumb_list).outerWidth(true))*a("> li",vars.thumb_list).outerWidth(true);vars.thumb_page=0;a(vars.thumb_forward).click(function(){if(vars.thumb_page-vars.thumb_interval<=-a(vars.thumb_list).width()){vars.thumb_page=0;a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}else{vars.thumb_page=vars.thumb_page-vars.thumb_interval;a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}});a(vars.thumb_back).click(function(){if(vars.thumb_page+vars.thumb_interval>0){vars.thumb_page=Math.floor(a(vars.thumb_list).width()/vars.thumb_interval)*-vars.thumb_interval;if(a(vars.thumb_list).width()<=-vars.thumb_page){vars.thumb_page=vars.thumb_page+vars.thumb_interval}a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}else{vars.thumb_page=vars.thumb_page+vars.thumb_interval;a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}})}a(vars.next_slide).click(function(){api.nextSlide()});a(vars.prev_slide).click(function(){api.prevSlide()});if(jQuery.support.opacity){a(vars.prev_slide+","+vars.next_slide).mouseover(function(){a(this).stop().animate({opacity:1},100)}).mouseout(function(){a(this).stop().animate({opacity:0.6},100)})}if(api.options.thumbnail_navigation){a(vars.next_thumb).click(function(){api.nextSlide()});a(vars.prev_thumb).click(function(){api.prevSlide()})}a(vars.play_button).click(function(){api.playToggle()});if(api.options.mouse_scrub){a(vars.thumb_tray).mousemove(function(g){var d=a(vars.thumb_tray).width(),h=a(vars.thumb_list).width();if(h>d){var c=1,f=g.pageX-c;if(f>10||f<-10){c=g.pageX;newX=(d-h)*(g.pageX/d);f=parseInt(Math.abs(parseInt(a(vars.thumb_list).css("left"))-newX)).toFixed(0);a(vars.thumb_list).stop().animate({left:newX},{duration:f*3,easing:"easeOutExpo"})}}})}a(window).resize(function(){if(api.options.progress_bar&&!vars.in_animation){if(vars.slideshow_interval){clearInterval(vars.slideshow_interval)}if(api.options.slides.length-1>0){clearInterval(vars.slideshow_interval)}a(vars.progress_bar).stop().css({left:-a(window).width()});if(!vars.progressDelay&&api.options.slideshow){vars.progressDelay=setTimeout(function(){if(!vars.is_paused){theme.progressBar();vars.slideshow_interval=setInterval(api.nextSlide,api.options.slide_interval)}vars.progressDelay=false},1000)}}if(api.options.thumb_links&&vars.thumb_tray.length){vars.thumb_page=0;vars.thumb_interval=Math.floor(a(vars.thumb_tray).width()/a("> li",vars.thumb_list).outerWidth(true))*a("> li",vars.thumb_list).outerWidth(true);if(a(vars.thumb_list).width()>a(vars.thumb_tray).width()){a(vars.thumb_back+","+vars.thumb_forward).fadeIn("fast");a(vars.thumb_list).stop().animate({left:0},200)}else{a(vars.thumb_back+","+vars.thumb_forward).fadeOut("fast")}}if(api.options.slide_links){b=a(vars.slide_list).parent().width()-400;a(vars.slide_list).css("margin-left",-a(vars.slide_list).width()/2).css("max-width",b);console.log(b)}})},goTo:function(){if(api.options.progress_bar&&!vars.is_paused){a(vars.progress_bar).stop().css({left:-a(window).width()});theme.progressBar()}},playToggle:function(b){if(b=="play"){if(a(vars.play_button).attr("src")){a(vars.play_button).attr("src",api.options.image_path+"pause.png")}if(api.options.progress_bar&&!vars.is_paused){theme.progressBar()}}else{if(b=="pause"){if(a(vars.play_button).attr("src")){a(vars.play_button).attr("src",api.options.image_path+"play.png")}if(api.options.progress_bar&&vars.is_paused){a(vars.progress_bar).stop().css({left:-a(window).width()})}}}},beforeAnimation:function(b){if(api.options.progress_bar&&!vars.is_paused){a(vars.progress_bar).stop().css({left:-a(window).width()})}if(a(vars.slide_caption).length){(api.getField("title"))?a(vars.slide_caption).html(api.getField("title")):a(vars.slide_caption).html("")}if(vars.slide_current.length){a(vars.slide_current).html(vars.current_slide+1)}if(api.options.thumb_links){a(".current-thumb").removeClass("current-thumb");a("li",vars.thumb_list).eq(vars.current_slide).addClass("current-thumb");if(a(vars.thumb_list).width()>a(vars.thumb_tray).width()){if(b=="next"){if(vars.current_slide==0){vars.thumb_page=0;a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}else{if(a(".current-thumb").offset().left-a(vars.thumb_tray).offset().left>=vars.thumb_interval){vars.thumb_page=vars.thumb_page-vars.thumb_interval;a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}}}else{if(b=="prev"){if(vars.current_slide==api.options.slides.length-1){vars.thumb_page=Math.floor(a(vars.thumb_list).width()/vars.thumb_interval)*-vars.thumb_interval;if(a(vars.thumb_list).width()<=-vars.thumb_page){vars.thumb_page=vars.thumb_page+vars.thumb_interval}a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}else{if(a(".current-thumb").offset().left-a(vars.thumb_tray).offset().left<0){if(vars.thumb_page+vars.thumb_interval>0){return false}vars.thumb_page=vars.thumb_page+vars.thumb_interval;a(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}}}}}}},afterAnimation:function(){if(api.options.progress_bar&&!vars.is_paused){theme.progressBar()}},progressBar:function(){a(vars.progress_bar).stop().css({left:-a(window).width()}).animate({left:0},api.options.slide_interval)}};a.supersized.themeVars={progress_delay:false,thumb_page:false,thumb_interval:false,play_button:"#pauseplay",next_slide:"#nextslide",prev_slide:"#prevslide",next_thumb:"#nextthumb",prev_thumb:"#prevthumb",slide_caption:"#slidecaption",slide_current:".slidenumber",slide_total:".totalslides",slide_list:"#slide-list",thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",thumb_forward:"#thumb-forward",thumb_back:"#thumb-back",tray_arrow:"#tray-arrow",tray_button:"#tray-button",progress_bar:"#progress-bar"};a.supersized.themeOptions={progress_bar:1,image_path:"img/",mouse_scrub:0,html_template:'<div class="ssControlsContainer"> 		<!--Thumbnail Navigation--> 		<div id="prevthumb"></div> 		<div id="nextthumb"></div> 		<!--Arrow Navigation--> 		<a id="prevslide" class="load-item"></a> 		<a id="nextslide" class="load-item"></a> 		<div id="thumb-tray" class="load-item"> 			<div id="thumb-back"></div> 			<div id="thumb-forward"></div> 		</div> 		<!--Time Bar--> 		<div id="progress-back" class="load-item"> 			<div id="progress-bar"></div> 		</div> 		<!--Control Bar--> 		<div id="controls-wrapper" class="load-item"> 			<div id="controls"> 				<a id="play-button"> 					<img id="pauseplay" src="img/pause.png" /></a> 				<a id="stop-button"> 					<img src="img/stop.png" /></a> 				<!--Slide counter--> 				<div id="slidecounter"> 					<span class="slidenumber"></span>/ <span class="totalslides"></span> 				</div> 				<!--Slide captions displayed here--> 				<div id="slidecaption"></div> 				<!--Thumb Tray button--> 				<a id="tray-button"> 					<img id="tray-arrow" src="img/button-tray-up.png" /></a> 				<!--Navigation--> 				<ul id="slide-list"></ul> 			</div> 		</div> </div>'}})(jQuery);(function(b,c){var a=0;b.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:false,multiple:true,position:{}},_create:function(){var g=this.element.hide(),j=this.options;this.speed=b.fx.speeds._default;this._isOpen=false;var f=(this.button=b('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(j.classes).attr({title:g.attr("title"),"aria-haspopup":true,tabIndex:g.attr("tabIndex")}).insertAfter(g),d=(this.buttonlabel=b("<span />")).html(j.noneSelectedText).appendTo(f),h=(this.menu=b("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(j.classes).appendTo(document.body),m=(this.header=b("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(h),e=(this.headerLinkContainer=b("<ul />")).addClass("ui-helper-reset").html(function(){if(j.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+j.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+j.uncheckAllText+"</span></a></li>"}else{if(typeof j.header==="string"){return"<li>"+j.header+"</li>"}else{return""}}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(m),l=(this.checkboxContainer=b("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(h);this._bindEvents();this.refresh(true);if(!j.multiple){h.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(j){var f=this.element,h=this.options,g=this.menu,m=this.checkboxContainer,d=[],e="",l=f.attr("id")||a++;f.find("option").each(function(p){var q=b(this),v=this.parentNode,t=this.innerHTML,x=this.title,u=this.value,o="ui-multiselect-"+(this.id||l+"-option-"+p),y=this.disabled,n=this.selected,s=["ui-corner-all"],r=(y?"ui-multiselect-disabled ":" ")+this.className,w;if(v.tagName==="OPTGROUP"){w=v.getAttribute("label");if(b.inArray(w,d)===-1){e+='<li class="ui-multiselect-optgroup-label '+v.className+'"><a href="#">'+w+"</a></li>";d.push(w)}}if(y){s.push("ui-state-disabled")}if(n&&!h.multiple){s.push("ui-state-active")}e+='<li class="'+r+'">';e+='<label for="'+o+'" title="'+x+'" class="'+s.join(" ")+'">';e+='<input id="'+o+'" name="multiselect_'+l+'" type="'+(h.multiple?"checkbox":"radio")+'" value="'+u.replace(/\"/g,"&quot;")+'" title="'+t.replace(/\"/g,"&quot;")+'"';if(n){e+=' checked="checked"';e+=' aria-selected="true"'}if(y){e+=' disabled="disabled"';e+=' aria-disabled="true"'}e+=" /><span>"+t+"</span></label></li>"});m.html(e);this.labels=g.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!j){this._trigger("refresh")}},update:function(){var h=this.options,e=this.inputs,d=e.filter(":checked"),f=d.length,g;if(f===0){g=h.noneSelectedText}else{if(b.isFunction(h.selectedText)){g=h.selectedText.call(this,f,e.length,d.get())}else{if(/\d/.test(h.selectedList)&&h.selectedList>0&&f<=h.selectedList){g=d.map(function(){return b(this).next().html()}).get().join(", ")}else{g=h.selectedText.replace("#",f).replace("#",e.length)}}}this.buttonlabel.html(g);return g},_bindEvents:function(){var d=this,e=this.button;function f(){d[d._isOpen?"close":"open"]();return false}e.find("span").bind("click.multiselect",f);e.bind({click:f,keypress:function(g){switch(g.which){case 27:case 38:case 37:d.close();break;case 39:case 40:d.open();break}},mouseenter:function(){if(!e.hasClass("ui-state-disabled")){b(this).addClass("ui-state-hover")}},mouseleave:function(){b(this).removeClass("ui-state-hover")},focus:function(){if(!e.hasClass("ui-state-disabled")){b(this).addClass("ui-state-focus")}},blur:function(){b(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(g){if(b(this).hasClass("ui-multiselect-close")){d.close()}else{d[b(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}g.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(m){m.preventDefault();var l=b(this),j=l.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),g=j.get(),h=l.parent().text();if(d._trigger("beforeoptgrouptoggle",m,{inputs:g,label:h})===false){return}d._toggleChecked(j.filter(":checked").length!==j.length,j);d._trigger("optgrouptoggle",m,{inputs:g,label:h,checked:g[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!b(this).hasClass("ui-state-disabled")){d.labels.removeClass("ui-state-hover");b(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(g){g.preventDefault();switch(g.which){case 9:case 27:d.close();break;case 38:case 40:case 37:case 39:d._traverse(g.which,this);break;case 13:b(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(l){var j=b(this),m=this.value,h=this.checked,g=d.element.find("option");if(this.disabled||d._trigger("click",l,{value:m,text:this.title,checked:h})===false){l.preventDefault();return}j.focus();j.attr("aria-selected",h);g.each(function(){if(this.value===m){this.selected=h}else{if(!d.options.multiple){this.selected=false}}});if(!d.options.multiple){d.labels.removeClass("ui-state-active");j.closest("label").toggleClass("ui-state-active",h);d.close()}d.element.trigger("change");setTimeout(b.proxy(d.update,d),10)});b(document).bind("mousedown.multiselect",function(g){if(d._isOpen&&!b.contains(d.menu[0],g.target)&&!b.contains(d.button[0],g.target)&&g.target!==d.button[0]){d.close()}});b(this.element[0].form).bind("reset.multiselect",function(){setTimeout(b.proxy(d.refresh,d),10)})},_setButtonWidth:function(){var d=this.element.outerWidth(),e=this.options;if(/\d/.test(e.minWidth)&&d<e.minWidth){d=e.minWidth}this.button.width(d)},_setMenuWidth:function(){var d=this.menu,e=this.button.outerWidth()-parseInt(d.css("padding-left"),10)-parseInt(d.css("padding-right"),10)-parseInt(d.css("border-right-width"),10)-parseInt(d.css("border-left-width"),10);d.width(e||this.button.outerWidth())},_traverse:function(h,j){var f=b(j),e=h===38||h===37,d=f.parent()[e?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[e?"last":"first"]();if(!d.length){var g=this.menu.find("ul").last();this.menu.find("label")[e?"last":"first"]().trigger("mouseover");g.scrollTop(e?g.height():0)}else{d.find("label").trigger("mouseover")}},_toggleState:function(e,d){return function(){if(!this.disabled){this[e]=d}if(d){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(d,h){var g=(h&&h.length)?h:this.inputs,f=this;g.each(this._toggleState("checked",d));g.eq(0).focus();this.update();var e=g.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&b.inArray(this.value,e)>-1){f._toggleState("selected",d).call(this)}});if(g.length){this.element.trigger("change")}},_toggleDisabled:function(e){this.button.attr({disabled:e,"aria-disabled":e})[e?"addClass":"removeClass"]("ui-state-disabled");var d=this.menu.find("input");var f="ech-multiselect-disabled";if(e){d=d.filter(":enabled").data(f,true)}else{d=d.filter(function(){return b.data(this,f)===true}).removeData(f)}d.attr({disabled:e,"arial-disabled":e}).parent()[e?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:e,"aria-disabled":e})},open:function(j){var p=this,h=this.button,d=this.menu,g=this.speed,f=this.options,l=[];if(this._trigger("beforeopen")===false||h.hasClass("ui-state-disabled")||this._isOpen){return}var n=d.find("ul").last(),q=f.show,m=h.offset();if(b.isArray(f.show)){q=f.show[0];g=f.show[1]||p.speed}if(q){l=[q,g]}n.scrollTop(0).height(f.height);if(b.ui.position&&!b.isEmptyObject(f.position)){f.position.of=f.position.of||h;d.show().position(f.position).hide()}else{d.css({top:m.top+h.outerHeight(),left:m.left})}b.fn.show.apply(d,l);this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");h.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var g=this.options,e=g.hide,f=this.speed,d=[];if(b.isArray(g.hide)){e=g.hide[0];f=g.hide[1]||this.speed}if(e){d=[e,f]}b.fn.hide.apply(this.menu,d);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(d){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){b.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(d,e){var f=this.menu;switch(d){case"header":f.find("div.ui-multiselect-header")[e?"show":"hide"]();break;case"checkAllText":f.find("a.ui-multiselect-all span").eq(-1).text(e);break;case"uncheckAllText":f.find("a.ui-multiselect-none span").eq(-1).text(e);break;case"height":f.find("ul").last().height(parseInt(e,10));break;case"minWidth":this.options[d]=parseInt(e,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[d]=e;this.update();break;case"classes":f.add(this.button).removeClass(this.options.classes).addClass(e);break;case"multiple":f.toggleClass("ui-multiselect-single",!e);this.options.multiple=e;this.element[0].multiple=e;this.refresh()}b.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
/*!
 * jQCloud Plugin for jQuery
 *
 * Version 1.0.4
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: 2013-05-09 18:54:22 +0200
*/
(function(a){a.fn.jQCloud=function(c,d){var f=this;var e=f.attr("id")||Math.floor((Math.random()*1000000)).toString(36);var g={width:f.width(),height:f.height(),center:{x:((d&&d.width)?d.width:f.width())/2,y:((d&&d.height)?d.height:f.height())/2},delayedMode:c.length>50,shape:false,encodeURI:true,removeOverflowing:true};d=a.extend(g,d||{});f.addClass("jqcloud").width(d.width).height(d.height);if(f.css("position")==="static"){f.css("position","relative")}var b=function(){var j=function(t,r){var q=function(v,u){if(Math.abs(2*v.offsetLeft+v.offsetWidth-2*u.offsetLeft-u.offsetWidth)<v.offsetWidth+u.offsetWidth){if(Math.abs(2*v.offsetTop+v.offsetHeight-2*u.offsetTop-u.offsetHeight)<v.offsetHeight+u.offsetHeight){return true}}return false};var s=0;for(s=0;s<r.length;s++){if(q(t,r[s])){return true}}return false};for(var l=0;l<c.length;l++){c[l].weight=parseFloat(c[l].weight,10)}c.sort(function(r,q){if(r.weight<q.weight){return 1}else{if(r.weight>q.weight){return -1}else{return 0}}});var o=(d.shape==="rectangular")?18:2,h=[],m=d.width/d.height;var n=function(t,C){var F=e+"_word_"+t,u="#"+F,D=6.28*Math.random(),r=0,v=0,H=0,x=5,B="",E="",w;C.html=a.extend(C.html,{id:F});if(C.html&&C.html["class"]){B=C.html["class"];delete C.html["class"]}if(c[0].weight>c[c.length-1].weight){x=Math.round((C.weight-c[c.length-1].weight)/(c[0].weight-c[c.length-1].weight)*9)+1}w=a("<span>").attr(C.html).addClass("w"+x+" "+B);if(C.link){if(typeof C.link==="string"){C.link={href:C.link}}if(d.encodeURI){C.link=a.extend(C.link,{href:encodeURI(C.link.href).replace(/'/g,"%27")})}E=a("<a>").attr(C.link).text(C.text)}else{E=C.text}w.append(E);if(!!C.handlers){for(var q in C.handlers){if(C.handlers.hasOwnProperty(q)&&typeof C.handlers[q]==="function"){a(w).bind(q,C.handlers[q])}}}f.append(w);var A=w.width(),z=w.height(),s=d.center.x-A/2,y=d.center.y-z/2;var G=w[0].style;G.position="absolute";G.left=s+"px";G.top=y+"px";while(j(w[0],h)){if(d.shape==="rectangular"){v++;if(v*o>(1+Math.floor(H/2))*o*((H%4%2)===0?1:m)){v=0;H++}switch(H%4){case 1:s+=o*m+Math.random()*2;break;case 2:y-=o+Math.random()*2;break;case 3:s-=o*m+Math.random()*2;break;case 0:y+=o+Math.random()*2;break}}else{r+=o;D+=(t%2===0?1:-1)*o;s=d.center.x-(A/2)+(r*Math.cos(D))*m;y=d.center.y+r*Math.sin(D)-(z/2)}G.left=s+"px";G.top=y+"px"}if(d.removeOverflowing&&(s<0||y<0||(s+A)>d.width||(y+z)>d.height)){w.remove();return}h.push(w[0]);if(a.isFunction(C.afterWordRender)){C.afterWordRender.call(w)}};var p=function(q){q=q||0;if(!f.is(":visible")){setTimeout(function(){p(q)},10);return}if(q<c.length){n(q,c[q]);setTimeout(function(){p(q+1)},10)}else{if(a.isFunction(d.afterCloudRender)){d.afterCloudRender.call(f)}}};if(d.delayedMode){p()}else{a.each(c,n);if(a.isFunction(d.afterCloudRender)){d.afterCloudRender.call(f)}}};setTimeout(function(){b()},10);return f}})(jQuery);
/*!
	* jQuery UI Touch Punch 0.2.3
	* http://touchpunch.furf.com
	*
	* Copyright 2011–2014, Dave Furfero
	* Dual licensed under the MIT or GPL Version 2 licenses.
	*
	* Depends:
	*  jquery.ui.widget.js
	*  jquery.ui.mouse.js
	*/
(function(b){b.support.touch="ontouchend" in document;if(!b.support.touch){return}var d=b.ui.mouse.prototype,f=d._mouseInit,c=d._mouseDestroy,a;function e(h,j){if(h.originalEvent.touches.length>1){return}h.preventDefault();var l=h.originalEvent.changedTouches[0],g=document.createEvent("MouseEvents");g.initMouseEvent(j,true,true,window,1,l.screenX,l.screenY,l.clientX,l.clientY,false,false,false,false,0,null);h.target.dispatchEvent(g)}d._touchStart=function(h){var g=this;if(a||!g._mouseCapture(h.originalEvent.changedTouches[0])){return}a=true;g._touchMoved=false;e(h,"mouseover");e(h,"mousemove");e(h,"mousedown")};d._touchMove=function(g){if(!a){return}this._touchMoved=true;e(g,"mousemove")};d._touchEnd=function(g){if(!a){return}e(g,"mouseup");e(g,"mouseout");if(!this._touchMoved){e(g,"click")}a=false};d._mouseInit=function(){var g=this;g.element.bind({touchstart:b.proxy(g,"_touchStart"),touchmove:b.proxy(g,"_touchMove"),touchend:b.proxy(g,"_touchEnd")});f.call(g)};d._mouseDestroy=function(){var g=this;g.element.unbind({touchstart:b.proxy(g,"_touchStart"),touchmove:b.proxy(g,"_touchMove"),touchend:b.proxy(g,"_touchEnd")});c.call(g)}})(jQuery);